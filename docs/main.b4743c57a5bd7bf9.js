"use strict";(self.webpackChunkproducts_app=self.webpackChunkproducts_app||[]).push([[179],{2011:(gt,be,k)=>{k.d(be,{Dh:()=>ve,GT:()=>se,cc:()=>De,hO:()=>je,on:()=>j,pX:()=>ie,xv:()=>ce});var f=k(4650),Y=k(9260),O=k(4976);gt=k.hmd(gt);const re=["ngOnDestroy"],ie=(Me,xe,Ue,Re={})=>new Proxy(Me,{get:(_e,we)=>Ue.runOutsideAngular(()=>{var $e;if(Me[we])return!(null===($e=Re?.spy)||void 0===$e)&&$e.get&&Re.spy.get(we,Me[we]),Me[we];if(re.indexOf(we)>-1)return()=>{};const Ne=xe.toPromise().then(nt=>{const ne=nt&&nt[we];return"function"==typeof ne?ne.bind(nt):ne&&ne.then?ne.then(Ct=>Ue.run(()=>Ct)):Ue.run(()=>ne)});return new Proxy(()=>{},{get:(nt,ne)=>Ne[ne],apply:(nt,ne,Ct)=>Ne.then(Xe=>{var Ht;const st=Xe&&Xe(...Ct);return!(null===(Ht=Re?.spy)||void 0===Ht)&&Ht.apply&&Re.spy.apply(we,Ct,st),st})})})}),se=(Me,xe)=>{xe.forEach(Ue=>{Object.getOwnPropertyNames(Ue.prototype||Ue).forEach(Re=>{Object.defineProperty(Me.prototype,Re,Object.getOwnPropertyDescriptor(Ue.prototype||Ue,Re))})})};class fe{constructor(xe){return xe}}const ve=new f.OlP("angularfire2.app.options"),ce=new f.OlP("angularfire2.app.name");function j(Me,xe,Ue){const _e="object"==typeof Ue&&Ue||{};_e.name=_e.name||"string"==typeof Ue&&Ue||"[DEFAULT]";const $e=Y.Z.apps.filter(Ne=>Ne&&Ne.name===_e.name)[0]||xe.runOutsideAngular(()=>Y.Z.initializeApp(Me,_e));try{JSON.stringify(Me)!==JSON.stringify($e.options)&&B("error",`${$e.name} Firebase App already initialized with different options${gt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new fe($e)}const B=(Me,...xe)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Me](...xe)},q={provide:fe,useFactory:j,deps:[ve,f.R0b,[new f.FiY,ce]]};let je=(()=>{class Me{constructor(Ue){Y.Z.registerVersion("angularfire",O.q4.full,"core"),Y.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Y.Z.registerVersion("angular",f.q4F.full,Ue.toString())}static initializeApp(Ue,Re){return{ngModule:Me,providers:[{provide:ve,useValue:Ue},{provide:ce,useValue:Re}]}}}return Me.\u0275fac=function(Ue){return new(Ue||Me)(f.LFG(f.Lbi))},Me.\u0275mod=f.oAB({type:Me}),Me.\u0275inj=f.cJS({providers:[q]}),Me})();function De(Me,xe,Ue,Re,_e){const[,we,$e]=globalThis.\u0275AngularfireInstanceCache.find(Ne=>Ne[0]===Me)||[];if(we)return function We(Me,xe){try{return Me.toString()===xe.toString()}catch{return Me===xe}}(_e,$e)||(de("error",`${xe} was already initialized on the ${Ue} Firebase App with different settings.${ct?" You may need to reload as Firebase is not HMR aware.":""}`),de("warn",{is:_e,was:$e})),we;{const Ne=Re();return globalThis.\u0275AngularfireInstanceCache.push([Me,Ne,_e]),Ne}}const ct=!!gt.hot,de=(Me,...xe)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Me](...xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(gt,be,k)=>{k.d(be,{q4:()=>oa,iC:()=>Wf,HU:()=>Di,vb:()=>wc,JM:()=>Pl});var f=k(4650),Y=k(259),O=k(5861),re=k(6881),ie=k(2090),se=k(4859),fe=k(1877);const ve=(E,D)=>D.some(M=>E instanceof M);let ce,j;const je=new WeakMap,De=new WeakMap,We=new WeakMap,ct=new WeakMap,de=new WeakMap;let Ue={get(E,D,M){if(E instanceof IDBTransaction){if("done"===D)return De.get(E);if("objectStoreNames"===D)return E.objectStoreNames||We.get(E);if("store"===D)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return $e(E[D])},set:(E,D,M)=>(E[D]=M,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function we(E){return"function"==typeof E?function _e(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function q(){return j||(j=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(Ne(this),D),$e(je.get(this))}:function(...D){return $e(E.apply(Ne(this),D))}:function(D,...M){const P=E.call(Ne(this),D,...M);return We.set(P,D.sort?D.sort():[D]),$e(P)}}(E):(E instanceof IDBTransaction&&function xe(E){if(De.has(E))return;const D=new Promise((M,P)=>{const $=()=>{E.removeEventListener("complete",W),E.removeEventListener("error",te),E.removeEventListener("abort",te)},W=()=>{M(),$()},te=()=>{P(E.error||new DOMException("AbortError","AbortError")),$()};E.addEventListener("complete",W),E.addEventListener("error",te),E.addEventListener("abort",te)});De.set(E,D)}(E),ve(E,function B(){return ce||(ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,Ue):E)}function $e(E){if(E instanceof IDBRequest)return function Me(E){const D=new Promise((M,P)=>{const $=()=>{E.removeEventListener("success",W),E.removeEventListener("error",te)},W=()=>{M($e(E.result)),$()},te=()=>{P(E.error),$()};E.addEventListener("success",W),E.addEventListener("error",te)});return D.then(M=>{M instanceof IDBCursor&&je.set(M,E)}).catch(()=>{}),de.set(D,E),D}(E);if(ct.has(E))return ct.get(E);const D=we(E);return D!==E&&(ct.set(E,D),de.set(D,E)),D}const Ne=E=>de.get(E),Ct=["get","getKey","getAll","getAllKeys","count"],Xe=["put","add","delete","clear"],Ht=new Map;function st(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(Ht.get(D))return Ht.get(D);const M=D.replace(/FromIndex$/,""),P=D!==M,$=Xe.includes(M);if(!(M in(P?IDBIndex:IDBObjectStore).prototype)||!$&&!Ct.includes(M))return;const W=function(){var te=(0,O.Z)(function*(ze,...Ge){const at=this.transaction(ze,$?"readwrite":"readonly");let Rt=at.store;return P&&(Rt=Rt.index(Ge.shift())),(yield Promise.all([Rt[M](...Ge),$&&at.done]))[0]});return function(Ge){return te.apply(this,arguments)}}();return Ht.set(D,W),W}!function Re(E){Ue=E(Ue)}(E=>({...E,get:(D,M,P)=>st(D,M)||E.get(D,M,P),has:(D,M)=>!!st(D,M)||E.has(D,M)}));const le="@firebase/installations",he="0.6.4",Ee=1e4,Te=`w:${he}`,He="FIS_v2",Be="https://firebaseinstallations.googleapis.com/v1",lt=36e5,$t=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Dt(E){return E instanceof ie.ZR&&E.code.includes("request-failed")}function nn({projectId:E}){return`${Be}/projects/${E}/installations`}function vn(E){return{token:E.token,requestStatus:2,expiresIn:jo(E.expiresIn),creationTime:Date.now()}}function Cn(E,D){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,O.Z)(function*(E,D){const P=(yield D.json()).error;return $t.create("request-failed",{requestName:E,serverCode:P.code,serverMessage:P.message,serverStatus:P.status})})).apply(this,arguments)}function Vr({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function Cs(E){return fi.apply(this,arguments)}function fi(){return(fi=(0,O.Z)(function*(E){const D=yield E();return D.status>=500&&D.status<600?E():D})).apply(this,arguments)}function jo(E){return Number(E.replace("s","000"))}function ht(){return(ht=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:D},{fid:M}){const P=nn(E),$=Vr(E),W=D.getImmediate({optional:!0});if(W){const at=yield W.getHeartbeatsHeader();at&&$.append("x-firebase-client",at)}const ze={method:"POST",headers:$,body:JSON.stringify({fid:M,authVersion:He,appId:E.appId,sdkVersion:Te})},Ge=yield Cs(()=>fetch(P,ze));if(Ge.ok){const at=yield Ge.json();return{fid:at.fid||M,registrationStatus:2,refreshToken:at.refreshToken,authToken:vn(at.authToken)}}throw yield Cn("Create Installation",Ge)})).apply(this,arguments)}function Yr(E){return new Promise(D=>{setTimeout(D,E)})}const mr=/^[cdef][\w-]{21}$/,Ur="";function Gi(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const M=function en(E){return function rl(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return mr.test(M)?M:Ur}catch{return Ur}}function rn(E){return`${E.appName}!${E.appId}`}const rt=new Map;function At(E,D){const M=rn(E);ar(M,D),function Br(E,D){const M=function Jr(){return!Sn&&"BroadcastChannel"in self&&(Sn=new BroadcastChannel("[Firebase] FID Change"),Sn.onmessage=E=>{ar(E.data.key,E.data.fid)}),Sn}();M&&M.postMessage({key:E,fid:D}),function gn(){0===rt.size&&Sn&&(Sn.close(),Sn=null)}()}(M,D)}function ar(E,D){const M=rt.get(E);if(M)for(const P of M)P(D)}let Sn=null;const bs="firebase-installations-database",Zt=1,zi="firebase-installations-store";let sn=null;function gi(){return sn||(sn=function nt(E,D,{blocked:M,upgrade:P,blocking:$,terminated:W}={}){const te=indexedDB.open(E,D),ze=$e(te);return P&&te.addEventListener("upgradeneeded",Ge=>{P($e(te.result),Ge.oldVersion,Ge.newVersion,$e(te.transaction))}),M&&te.addEventListener("blocked",()=>M()),ze.then(Ge=>{W&&Ge.addEventListener("close",()=>W()),$&&Ge.addEventListener("versionchange",()=>$())}).catch(()=>{}),ze}(bs,Zt,{upgrade:(E,D)=>{0===D&&E.createObjectStore(zi)}})),sn}function Rn(E,D){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,O.Z)(function*(E,D){const M=rn(E),$=(yield gi()).transaction(zi,"readwrite"),W=$.objectStore(zi),te=yield W.get(M);return yield W.put(D,M),yield $.done,(!te||te.fid!==D.fid)&&At(E,D.fid),D})).apply(this,arguments)}function Ni(E){return En.apply(this,arguments)}function En(){return(En=(0,O.Z)(function*(E){const D=rn(E),P=(yield gi()).transaction(zi,"readwrite");yield P.objectStore(zi).delete(D),yield P.done})).apply(this,arguments)}function Pi(E,D){return jr.apply(this,arguments)}function jr(){return(jr=(0,O.Z)(function*(E,D){const M=rn(E),$=(yield gi()).transaction(zi,"readwrite"),W=$.objectStore(zi),te=yield W.get(M),ze=D(te);return void 0===ze?yield W.delete(M):yield W.put(ze,M),yield $.done,ze&&(!te||te.fid!==ze.fid)&&At(E,ze.fid),ze})).apply(this,arguments)}function V(E){return L.apply(this,arguments)}function L(){return L=(0,O.Z)(function*(E){let D;const M=yield Pi(E.appConfig,P=>{const $=function z(E){return bn(E||{fid:Gi(),registrationStatus:0})}(P),W=function pe(E,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject($t.create("app-offline"))};const M={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},P=function Q(E,D){return Oe.apply(this,arguments)}(E,M);return{installationEntry:M,registrationPromise:P}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:bt(E)}:{installationEntry:D}}(E,$);return D=W.registrationPromise,W.installationEntry});return M.fid===Ur?{installationEntry:yield D}:{installationEntry:M,registrationPromise:D}}),L.apply(this,arguments)}function Oe(){return Oe=(0,O.Z)(function*(E,D){try{const M=yield function Mr(E,D){return ht.apply(this,arguments)}(E,D);return Rn(E.appConfig,M)}catch(M){throw Dt(M)&&409===M.customData.serverCode?yield Ni(E.appConfig):yield Rn(E.appConfig,{fid:D.fid,registrationStatus:0}),M}}),Oe.apply(this,arguments)}function bt(E){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,O.Z)(function*(E){let D=yield Ln(E.appConfig);for(;1===D.registrationStatus;)yield Yr(100),D=yield Ln(E.appConfig);if(0===D.registrationStatus){const{installationEntry:M,registrationPromise:P}=yield V(E);return P||M}return D})).apply(this,arguments)}function Ln(E){return Pi(E,D=>{if(!D)throw $t.create("installation-not-found");return bn(D)})}function bn(E){return function cn(E){return 1===E.registrationStatus&&E.registrationTime+Ee<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function xr(){return(xr=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:D},M){const P=function Oi(E,{fid:D}){return`${nn(E)}/${D}/authTokens:generate`}(E,M),$=function Ar(E,{refreshToken:D}){const M=Vr(E);return M.append("Authorization",function Ys(E){return`${He} ${E}`}(D)),M}(E,M),W=D.getImmediate({optional:!0});if(W){const at=yield W.getHeartbeatsHeader();at&&$.append("x-firebase-client",at)}const ze={method:"POST",headers:$,body:JSON.stringify({installation:{sdkVersion:Te,appId:E.appId}})},Ge=yield Cs(()=>fetch(P,ze));if(Ge.ok)return vn(yield Ge.json());throw yield Cn("Generate Auth Token",Ge)})).apply(this,arguments)}function qi(E){return Ma.apply(this,arguments)}function Ma(){return Ma=(0,O.Z)(function*(E,D=!1){let M;const P=yield Pi(E.appConfig,W=>{if(!jt(W))throw $t.create("not-registered");const te=W.authToken;if(!D&&function ft(E){return 2===E.requestStatus&&!function tn(E){const D=Date.now();return D<E.creationTime||E.creationTime+E.expiresIn<D+lt}(E)}(te))return W;if(1===te.requestStatus)return M=function ae(E,D){return X.apply(this,arguments)}(E,D),W;{if(!navigator.onLine)throw $t.create("app-offline");const ze=function Qt(E){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:D})}(W);return M=function dt(E,D){return Et.apply(this,arguments)}(E,ze),ze}});return M?yield M:P.authToken}),Ma.apply(this,arguments)}function X(){return(X=(0,O.Z)(function*(E,D){let M=yield Ae(E.appConfig);for(;1===M.authToken.requestStatus;)yield Yr(100),M=yield Ae(E.appConfig);const P=M.authToken;return 0===P.requestStatus?qi(E,D):P})).apply(this,arguments)}function Ae(E){return Pi(E,D=>{if(!jt(D))throw $t.create("not-registered");return function ur(E){return 1===E.requestStatus&&E.requestTime+Ee<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Et(){return Et=(0,O.Z)(function*(E,D){try{const M=yield function zt(E,D){return xr.apply(this,arguments)}(E,D),P=Object.assign(Object.assign({},D),{authToken:M});return yield Rn(E.appConfig,P),M}catch(M){if(!Dt(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const P=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Rn(E.appConfig,P)}else yield Ni(E.appConfig);throw M}}),Et.apply(this,arguments)}function jt(E){return void 0!==E&&2===E.registrationStatus}function Pu(){return(Pu=(0,O.Z)(function*(E){const D=E,{installationEntry:M,registrationPromise:P}=yield V(D);return P?P.catch(console.error):qi(D).catch(console.error),M.fid})).apply(this,arguments)}function $o(){return $o=(0,O.Z)(function*(E,D=!1){const M=E;return yield function mi(E){return qe.apply(this,arguments)}(M),(yield qi(M,D)).token}),$o.apply(this,arguments)}function qe(){return(qe=(0,O.Z)(function*(E){const{registrationPromise:D}=yield V(E);D&&(yield D)})).apply(this,arguments)}function rs(E){return $t.create("missing-app-config-values",{valueName:E})}const Lt="installations",Js=E=>{const D=E.getProvider("app").getImmediate(),M=function xa(E){if(!E||!E.options)throw rs("App Configuration");if(!E.name)throw rs("App Name");const D=["projectId","apiKey","appId"];for(const M of D)if(!E.options[M])throw rs(M);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(D);return{app:D,appConfig:M,heartbeatServiceProvider:(0,re._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},is=E=>{const D=E.getProvider("app").getImmediate(),M=(0,re._getProvider)(D,Lt).getImmediate();return{getId:()=>function Gn(E){return Pu.apply(this,arguments)}(M),getToken:$=>function Af(E){return $o.apply(this,arguments)}(M,$)}};(function Xs(){(0,re._registerComponent)(new se.wA(Lt,Js,"PUBLIC")),(0,re._registerComponent)(new se.wA("installations-internal",is,"PRIVATE"))})(),(0,re.registerVersion)(le,he),(0,re.registerVersion)(le,he,"esm2017");const Vn="@firebase/remote-config",yr=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class os{constructor(D,M,P,$){this.client=D,this.storage=M,this.storageCache=P,this.logger=$}isCachedDataFresh(D,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const P=Date.now()-M,$=P<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${P}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${$}.`),$}fetch(D){var M=this;return(0,O.Z)(function*(){const[P,$]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if($&&M.isCachedDataFresh(D.cacheMaxAgeMillis,P))return $;D.eTag=$&&$.eTag;const W=yield M.client.fetch(D),te=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===W.status&&te.push(M.storage.setLastSuccessfulFetchResponse(W)),yield Promise.all(te),W})()}}function Og(E=navigator){return E.languages&&E.languages[0]||E.language}class ol{constructor(D,M,P,$,W,te){this.firebaseInstallations=D,this.sdkVersion=M,this.namespace=P,this.projectId=$,this.apiKey=W,this.appId=te}fetch(D){var M=this;return(0,O.Z)(function*(){const[P,$]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),te=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},Ge={sdk_version:M.sdkVersion,app_instance_id:P,app_instance_id_token:$,app_id:M.appId,language_code:Og()},at={method:"POST",headers:ze,body:JSON.stringify(Ge)},Rt=fetch(te,at),Nt=new Promise((ri,Pr)=>{D.signal.addEventListener(()=>{const Co=new Error("The operation was aborted.");Co.name="AbortError",Pr(Co)})});let Ci;try{yield Promise.race([Rt,Nt]),Ci=yield Rt}catch(ri){let Pr="fetch-client-network";throw"AbortError"===ri?.name&&(Pr="fetch-timeout"),yr.create(Pr,{originalErrorMessage:ri?.message})}let On=Ci.status;const aa=Ci.headers.get("ETag")||void 0;let Ec,Do;if(200===Ci.status){let ri;try{ri=yield Ci.json()}catch(Pr){throw yr.create("fetch-client-parse",{originalErrorMessage:Pr?.message})}Ec=ri.entries,Do=ri.state}if("INSTANCE_STATE_UNSPECIFIED"===Do?On=500:"NO_CHANGE"===Do?On=304:("NO_TEMPLATE"===Do||"EMPTY_CONFIG"===Do)&&(Ec={}),304!==On&&200!==On)throw yr.create("fetch-status",{httpStatus:On});return{status:On,eTag:aa,config:Ec}})()}}class xf{constructor(D,M){this.client=D,this.storage=M}fetch(D){var M=this;return(0,O.Z)(function*(){const P=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(D,P)})()}attemptFetch(D,{throttleEndTimeMillis:M,backoffCount:P}){var $=this;return(0,O.Z)(function*(){yield function kg(E,D){return new Promise((M,P)=>{const $=Math.max(D-Date.now(),0),W=setTimeout(M,$);E.addEventListener(()=>{clearTimeout(W),P(yr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,M);try{const W=yield $.client.fetch(D);return yield $.storage.deleteThrottleMetadata(),W}catch(W){if(!function Sd(E){if(!(E instanceof ie.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}(W))throw W;const te={throttleEndTimeMillis:Date.now()+(0,ie.$s)(P),backoffCount:P+1};return yield $.storage.setThrottleMetadata(te),$.attemptFetch(D,te)}})()}}class av{constructor(D,M,P,$,W){this.app=D,this._client=M,this._storageCache=P,this._storage=$,this._logger=W,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Lu(E,D){const M=E.target.error||void 0;return yr.create(D,{originalErrorMessage:M&&M?.message})}const _i="app_namespace_store";class uv{constructor(D,M,P,$=function Wo(){return new Promise((E,D)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=P=>{D(Lu(P,"storage-open"))},M.onsuccess=P=>{E(P.target.result)},M.onupgradeneeded=P=>{0===P.oldVersion&&P.target.result.createObjectStore(_i,{keyPath:"compositeKey"})}}catch(M){D(yr.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=D,this.appName=M,this.namespace=P,this.openDbPromise=$}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var M=this;return(0,O.Z)(function*(){const P=yield M.openDbPromise;return new Promise(($,W)=>{const ze=P.transaction([_i],"readonly").objectStore(_i),Ge=M.createCompositeKey(D);try{const at=ze.get(Ge);at.onerror=Rt=>{W(Lu(Rt,"storage-get"))},at.onsuccess=Rt=>{const Nt=Rt.target.result;$(Nt?Nt.value:void 0)}}catch(at){W(yr.create("storage-get",{originalErrorMessage:at?.message}))}})})()}set(D,M){var P=this;return(0,O.Z)(function*(){const $=yield P.openDbPromise;return new Promise((W,te)=>{const Ge=$.transaction([_i],"readwrite").objectStore(_i),at=P.createCompositeKey(D);try{const Rt=Ge.put({compositeKey:at,value:M});Rt.onerror=Nt=>{te(Lu(Nt,"storage-set"))},Rt.onsuccess=()=>{W()}}catch(Rt){te(yr.create("storage-set",{originalErrorMessage:Rt?.message}))}})})()}delete(D){var M=this;return(0,O.Z)(function*(){const P=yield M.openDbPromise;return new Promise(($,W)=>{const ze=P.transaction([_i],"readwrite").objectStore(_i),Ge=M.createCompositeKey(D);try{const at=ze.delete(Ge);at.onerror=Rt=>{W(Lu(Rt,"storage-delete"))},at.onsuccess=()=>{$()}}catch(at){W(yr.create("storage-delete",{originalErrorMessage:at?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Nf{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const M=D.storage.getLastFetchStatus(),P=D.storage.getLastSuccessfulFetchTimestampMillis(),$=D.storage.getActiveConfig(),W=yield M;W&&(D.lastFetchStatus=W);const te=yield P;te&&(D.lastSuccessfulFetchTimestampMillis=te);const ze=yield $;ze&&(D.activeConfig=ze)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function al(){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,O.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function as(){(0,re._registerComponent)(new se.wA("remote-config",function E(D,{instanceIdentifier:M}){const P=D.getProvider("app").getImmediate(),$=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw yr.create("registration-window");if(!(0,ie.hl)())throw yr.create("indexed-db-unavailable");const{projectId:W,apiKey:te,appId:ze}=P.options;if(!W)throw yr.create("registration-project-id");if(!te)throw yr.create("registration-api-key");if(!ze)throw yr.create("registration-app-id");const Ge=new uv(ze,P.name,M=M||"firebase"),at=new Nf(Ge),Rt=new fe.Yd(Vn);Rt.logLevel=fe.in.ERROR;const Nt=new ol($,re.SDK_VERSION,M,W,te,ze),Ci=new xf(Nt,Ge),On=new os(Ci,Ge,at,Rt),aa=new av(P,On,at,Ge,Rt);return function ei(E){const D=(0,ie.m9)(E);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(aa),aa},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(Vn,"0.4.4"),(0,re.registerVersion)(Vn,"0.4.4","esm2017")}();const xd=(E,D)=>D.some(M=>E instanceof M);let ul,Ss;const Uu=new WeakMap,As=new WeakMap,$r=new WeakMap,Rr=new WeakMap,ka=new WeakMap;let us={get(E,D,M){if(E instanceof IDBTransaction){if("done"===D)return As.get(E);if("objectStoreNames"===D)return E.objectStoreNames||$r.get(E);if("store"===D)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return Nr(E[D])},set:(E,D,M)=>(E[D]=M,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function Nd(E){return"function"==typeof E?function Rd(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Vu(){return Ss||(Ss=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(er(this),D),Nr(Uu.get(this))}:function(...D){return Nr(E.apply(er(this),D))}:function(D,...M){const P=E.call(er(this),D,...M);return $r.set(P,D.sort?D.sort():[D]),Nr(P)}}(E):(E instanceof IDBTransaction&&function Zo(E){if(As.has(E))return;const D=new Promise((M,P)=>{const $=()=>{E.removeEventListener("complete",W),E.removeEventListener("error",te),E.removeEventListener("abort",te)},W=()=>{M(),$()},te=()=>{P(E.error||new DOMException("AbortError","AbortError")),$()};E.addEventListener("complete",W),E.addEventListener("error",te),E.addEventListener("abort",te)});As.set(E,D)}(E),xd(E,function Pf(){return ul||(ul=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,us):E)}function Nr(E){if(E instanceof IDBRequest)return function lr(E){const D=new Promise((M,P)=>{const $=()=>{E.removeEventListener("success",W),E.removeEventListener("error",te)},W=()=>{M(Nr(E.result)),$()},te=()=>{P(E.error),$()};E.addEventListener("success",W),E.addEventListener("error",te)});return D.then(M=>{M instanceof IDBCursor&&Uu.set(M,E)}).catch(()=>{}),ka.set(D,E),D}(E);if(Rr.has(E))return Rr.get(E);const D=Nd(E);return D!==E&&(Rr.set(E,D),ka.set(D,E)),D}const er=E=>ka.get(E);function Bu(E,D,{blocked:M,upgrade:P,blocking:$,terminated:W}={}){const te=indexedDB.open(E,D),ze=Nr(te);return P&&te.addEventListener("upgradeneeded",Ge=>{P(Nr(te.result),Ge.oldVersion,Ge.newVersion,Nr(te.transaction))}),M&&te.addEventListener("blocked",()=>M()),ze.then(Ge=>{W&&Ge.addEventListener("close",()=>W()),$&&Ge.addEventListener("versionchange",()=>$())}).catch(()=>{}),ze}function cs(E,{blocked:D}={}){const M=indexedDB.deleteDatabase(E);return D&&M.addEventListener("blocked",()=>D()),Nr(M).then(()=>{})}const cl=["get","getKey","getAll","getAllKeys","count"],Ms=["put","add","delete","clear"],Ko=new Map;function Fa(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(Ko.get(D))return Ko.get(D);const M=D.replace(/FromIndex$/,""),P=D!==M,$=Ms.includes(M);if(!(M in(P?IDBIndex:IDBObjectStore).prototype)||!$&&!cl.includes(M))return;const W=function(){var te=(0,O.Z)(function*(ze,...Ge){const at=this.transaction(ze,$?"readwrite":"readonly");let Rt=at.store;return P&&(Rt=Rt.index(Ge.shift())),(yield Promise.all([Rt[M](...Ge),$&&at.done]))[0]});return function(Ge){return te.apply(this,arguments)}}();return Ko.set(D,W),W}!function dr(E){us=E(us)}(E=>({...E,get:(D,M,P)=>Fa(D,M)||E.get(D,M,P),has:(D,M)=>!!Fa(D,M)||E.has(D,M)}));const Mt="/firebase-messaging-sw.js",La="/firebase-cloud-messaging-push-scope",Pd="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Od="https://fcmregistrations.googleapis.com/v1",ju="google.c.a.c_id",kd="google.c.a.c_l",$u="google.c.a.ts",Fg="google.c.a.e";var ue=(()=>{return(E=ue||(ue={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",ue;var E})();function Ft(E){const D=new Uint8Array(E);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Hu(E){const M=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),P=atob(M),$=new Uint8Array(P.length);for(let W=0;W<P.length;++W)$[W]=P.charCodeAt(W);return $}const Gu="fcm_token_details_db",tr=5,no="fcm_token_object_Store";function Hr(){return Hr=(0,O.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(W=>W.name).includes(Gu))return null;let D=null;return(yield Bu(Gu,tr,{upgrade:(P=(0,O.Z)(function*($,W,te,ze){var Ge;if(W<2||!$.objectStoreNames.contains(no))return;const at=ze.objectStore(no),Rt=yield at.index("fcmSenderId").get(E);if(yield at.clear(),Rt)if(2===W){const Nt=Rt;if(!Nt.auth||!Nt.p256dh||!Nt.endpoint)return;D={token:Nt.fcmToken,createTime:null!==(Ge=Nt.createTime)&&void 0!==Ge?Ge:Date.now(),subscriptionOptions:{auth:Nt.auth,p256dh:Nt.p256dh,endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:"string"==typeof Nt.vapidKey?Nt.vapidKey:Ft(Nt.vapidKey)}}}else if(3===W){const Nt=Rt;D={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:Ft(Nt.auth),p256dh:Ft(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:Ft(Nt.vapidKey)}}}else if(4===W){const Nt=Rt;D={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:Ft(Nt.auth),p256dh:Ft(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:Ft(Nt.vapidKey)}}}}),function(W,te,ze,Ge){return P.apply(this,arguments)})})).close(),yield cs(Gu),yield cs("fcm_vapid_details_db"),yield cs("undefined"),function Ld(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:D}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}(D)?D:null;var P}),Hr.apply(this,arguments)}const qu="firebase-messaging-database",Lg=1,ls="firebase-messaging-store";let Va=null;function qn(){return Va||(Va=Bu(qu,Lg,{upgrade:(E,D)=>{0===D&&E.createObjectStore(ls)}})),Va}function wi(E){return Ki.apply(this,arguments)}function Ki(){return Ki=(0,O.Z)(function*(E){const D=Wu(E),P=yield(yield qn()).transaction(ls).objectStore(ls).get(D);if(P)return P;{const $=yield function zu(E){return Hr.apply(this,arguments)}(E.appConfig.senderId);if($)return yield ro(E,$),$}}),Ki.apply(this,arguments)}function ro(E,D){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,O.Z)(function*(E,D){const M=Wu(E),$=(yield qn()).transaction(ls,"readwrite");return yield $.objectStore(ls).put(D,M),yield $.done,D})).apply(this,arguments)}function Ua(){return(Ua=(0,O.Z)(function*(E){const D=Wu(E),P=(yield qn()).transaction(ls,"readwrite");yield P.objectStore(ls).delete(D),yield P.done})).apply(this,arguments)}function Wu({appConfig:E}){return E.appId}const Wn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Yo(E,D){return ll.apply(this,arguments)}function ll(){return(ll=(0,O.Z)(function*(E,D){const M=yield dl(E),P=Bd(D),$={method:"POST",headers:M,body:JSON.stringify(P)};let W;try{W=yield(yield fetch(Ba(E.appConfig),$)).json()}catch(te){throw Wn.create("token-subscribe-failed",{errorInfo:te?.toString()})}if(W.error)throw Wn.create("token-subscribe-failed",{errorInfo:W.error.message});if(!W.token)throw Wn.create("token-subscribe-no-token");return W.token})).apply(this,arguments)}function Ud(){return(Ud=(0,O.Z)(function*(E,D){const M=yield dl(E),P=Bd(D.subscriptionOptions),$={method:"PATCH",headers:M,body:JSON.stringify(P)};let W;try{W=yield(yield fetch(`${Ba(E.appConfig)}/${D.token}`,$)).json()}catch(te){throw Wn.create("token-update-failed",{errorInfo:te?.toString()})}if(W.error)throw Wn.create("token-update-failed",{errorInfo:W.error.message});if(!W.token)throw Wn.create("token-update-no-token");return W.token})).apply(this,arguments)}function Ku(E,D){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,O.Z)(function*(E,D){const P={method:"DELETE",headers:yield dl(E)};try{const W=yield(yield fetch(`${Ba(E.appConfig)}/${D}`,P)).json();if(W.error)throw Wn.create("token-unsubscribe-failed",{errorInfo:W.error.message})}catch($){throw Wn.create("token-unsubscribe-failed",{errorInfo:$?.toString()})}})).apply(this,arguments)}function Ba({projectId:E}){return`${Od}/projects/${E}/registrations`}function dl(E){return ja.apply(this,arguments)}function ja(){return(ja=(0,O.Z)(function*({appConfig:E,installations:D}){const M=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Bd({p256dh:E,auth:D,endpoint:M,vapidKey:P}){const $={web:{endpoint:M,auth:D,p256dh:E}};return P!==Pd&&($.web.applicationPubKey=P),$}const Qu=6048e5;function Ju(){return Ju=(0,O.Z)(function*(E){const D=yield function Ff(E,D){return jd.apply(this,arguments)}(E.swRegistration,E.vapidKey),M={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:D.endpoint,auth:Ft(D.getKey("auth")),p256dh:Ft(D.getKey("p256dh"))},P=yield wi(E.firebaseDependencies);if(P){if(function Ug(E,D){return D.vapidKey===E.vapidKey&&D.endpoint===E.endpoint&&D.auth===E.auth&&D.p256dh===E.p256dh}(P.subscriptionOptions,M))return Date.now()>=P.createTime+Qu?function Tn(E,D){return Xu.apply(this,arguments)}(E,{token:P.token,createTime:Date.now(),subscriptionOptions:M}):P.token;try{yield Ku(E.firebaseDependencies,P.token)}catch($){console.warn($)}return kf(E.firebaseDependencies,M)}return kf(E.firebaseDependencies,M)}),Ju.apply(this,arguments)}function ds(){return ds=(0,O.Z)(function*(E){const D=yield wi(E.firebaseDependencies);D&&(yield Ku(E.firebaseDependencies,D.token),yield function Vd(E){return Ua.apply(this,arguments)}(E.firebaseDependencies));const M=yield E.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()}),ds.apply(this,arguments)}function Xu(){return Xu=(0,O.Z)(function*(E,D){try{const M=yield function Zu(E,D){return Ud.apply(this,arguments)}(E.firebaseDependencies,D),P=Object.assign(Object.assign({},D),{token:M,createTime:Date.now()});return yield ro(E.firebaseDependencies,P),M}catch(M){throw yield function vr(E){return ds.apply(this,arguments)}(E),M}}),Xu.apply(this,arguments)}function kf(E,D){return io.apply(this,arguments)}function io(){return(io=(0,O.Z)(function*(E,D){const P={token:yield Yo(E,D),createTime:Date.now(),subscriptionOptions:D};return yield ro(E,P),P.token})).apply(this,arguments)}function jd(){return(jd=(0,O.Z)(function*(E,D){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Hu(D)})})).apply(this,arguments)}function ec(E){const D={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function hl(E,D){if(!D.notification)return;E.notification={};const M=D.notification.title;M&&(E.notification.title=M);const P=D.notification.body;P&&(E.notification.body=P);const $=D.notification.image;$&&(E.notification.image=$);const W=D.notification.icon;W&&(E.notification.icon=W)}(D,E),function fl(E,D){D.data&&(E.data=D.data)}(D,E),function $d(E,D){var M,P,$,W,te;if(!(D.fcmOptions||null!==(M=D.notification)&&void 0!==M&&M.click_action))return;E.fcmOptions={};const ze=null!==($=null===(P=D.fcmOptions)||void 0===P?void 0:P.link)&&void 0!==$?$:null===(W=D.notification)||void 0===W?void 0:W.click_action;ze&&(E.fcmOptions.link=ze);const Ge=null===(te=D.fcmOptions)||void 0===te?void 0:te.analytics_label;Ge&&(E.fcmOptions.analyticsLabel=Ge)}(D,E),D}function Qo(E,D){const M=[];for(let P=0;P<E.length;P++)M.push(E.charAt(P)),P<D.length&&M.push(D.charAt(P));return M.join("")}function hs(E){return Wn.create("missing-app-config-values",{valueName:E})}Qo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Qo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Bg{constructor(D,M,P){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const $=function Jo(E){if(!E||!E.options)throw hs("App Configuration Object");if(!E.name)throw hs("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:M}=E;for(const P of D)if(!M[P])throw hs(P);return{appName:E.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:$,installations:M,analyticsProvider:P}}_delete(){return Promise.resolve()}}function Lf(E){return tc.apply(this,arguments)}function tc(){return(tc=(0,O.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(Mt,{scope:La}),E.swRegistration.update().catch(()=>{})}catch(D){throw Wn.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function $a(){return($a=(0,O.Z)(function*(E,D){if(!D&&!E.swRegistration&&(yield Lf(E)),D||!E.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Wn.create("invalid-sw-registration");E.swRegistration=D}})).apply(this,arguments)}function oo(){return(oo=(0,O.Z)(function*(E,D){D?E.vapidKey=D:E.vapidKey||(E.vapidKey=Pd)})).apply(this,arguments)}function Xo(){return Xo=(0,O.Z)(function*(E,D){if(!navigator)throw Wn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Wn.create("permission-blocked");return yield function so(E,D){return oo.apply(this,arguments)}(E,D?.vapidKey),yield function cv(E,D){return $a.apply(this,arguments)}(E,D?.serviceWorkerRegistration),function Of(E){return Ju.apply(this,arguments)}(E)}),Xo.apply(this,arguments)}function ao(){return(ao=(0,O.Z)(function*(E,D,M){const P=function uo(E){switch(E){case ue.NOTIFICATION_CLICKED:return"notification_open";case ue.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(D);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(P,{message_id:M[ju],message_name:M[kd],message_time:M[$u],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function co(){return co=(0,O.Z)(function*(E,D){const M=D.data;if(!M.isFirebaseMessaging)return;E.onMessageHandler&&M.messageType===ue.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(ec(M)):E.onMessageHandler.next(ec(M)));const P=M.data;(function pl(E){return"object"==typeof E&&!!E&&ju in E})(P)&&"1"===P[Fg]&&(yield function gl(E,D,M){return ao.apply(this,arguments)}(E,M.messageType,P))}),co.apply(this,arguments)}const xs="@firebase/messaging",lo=E=>{const D=new Bg(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function rc(E,D){return co.apply(this,arguments)}(D,M)),D},ic=E=>{const D=E.getProvider("messaging").getImmediate();return{getToken:P=>function nc(E,D){return Xo.apply(this,arguments)}(D,P)}};function Vf(){return sc.apply(this,arguments)}function sc(){return(sc=(0,O.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ha(){(0,re._registerComponent)(new se.wA("messaging",lo,"PUBLIC")),(0,re._registerComponent)(new se.wA("messaging-internal",ic,"PRIVATE")),(0,re.registerVersion)(xs,"0.12.4"),(0,re.registerVersion)(xs,"0.12.4","esm2017")}();const mn="analytics",qd="firebase_id",oc="origin",yl=6e4,ac="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",uc="https://www.googletagmanager.com/gtag/js",nr=new fe.Yd("@firebase/analytics"),Un=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function vl(E){if(!E.startsWith(uc)){const D=Un.create("invalid-gtag-resource",{gtagURL:E});return nr.warn(D.message),""}return E}function Ga(E){return Promise.all(E.map(D=>D.catch(M=>M)))}function po(){return(po=(0,O.Z)(function*(E,D,M,P,$,W){const te=P[$];try{if(te)yield D[te];else{const Ge=(yield Ga(M)).find(at=>at.measurementId===$);Ge&&(yield D[Ge.appId])}}catch(ze){nr.error(ze)}E("config",$,W)})).apply(this,arguments)}function qa(){return(qa=(0,O.Z)(function*(E,D,M,P,$){try{let W=[];if($&&$.send_to){let te=$.send_to;Array.isArray(te)||(te=[te]);const ze=yield Ga(M);for(const Ge of te){const at=ze.find(Nt=>Nt.measurementId===Ge),Rt=at&&D[at.appId];if(!Rt){W=[];break}W.push(Rt)}}0===W.length&&(W=Object.values(D)),yield Promise.all(W),E("event",P,$||{})}catch(W){nr.error(W)}})).apply(this,arguments)}const Wa=30,mo=new class go{constructor(D={},M=1e3){this.throttleMetadata=D,this.intervalMillis=M}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,M){this.throttleMetadata[D]=M}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function jf(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function Kt(){return(Kt=(0,O.Z)(function*(E){var D;const{appId:M,apiKey:P}=E,$={method:"GET",headers:jf(P)},W=ac.replace("{app-id}",M),te=yield fetch(W,$);if(200!==te.status&&304!==te.status){let ze="";try{const Ge=yield te.json();null!==(D=Ge.error)&&void 0!==D&&D.message&&(ze=Ge.error.message)}catch{}throw Un.create("config-fetch-failed",{httpStatus:te.status,responseMessage:ze})}return te.json()})).apply(this,arguments)}function Za(){return(Za=(0,O.Z)(function*(E,D=mo,M){const{appId:P,apiKey:$,measurementId:W}=E.options;if(!P)throw Un.create("no-app-id");if(!$){if(W)return{measurementId:W,appId:P};throw Un.create("no-api-key")}const te=D.getThrottleMetadata(P)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new dv;return setTimeout((0,O.Z)(function*(){ze.abort()}),void 0!==M?M:yl),wl({appId:P,apiKey:$,measurementId:W},te,ze,D)})).apply(this,arguments)}function wl(E,D,M){return El.apply(this,arguments)}function El(){return El=(0,O.Z)(function*(E,{throttleEndTimeMillis:D,backoffCount:M},P,$=mo){var W;const{appId:te,measurementId:ze}=E;try{yield function lv(E,D){return new Promise((M,P)=>{const $=Math.max(D-Date.now(),0),W=setTimeout(M,$);E.addEventListener(()=>{clearTimeout(W),P(Un.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(P,D)}catch(Ge){if(ze)return nr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${Ge?.message}]`),{appId:te,measurementId:ze};throw Ge}try{const Ge=yield function Wd(E){return Kt.apply(this,arguments)}(E);return $.deleteThrottleMetadata(te),Ge}catch(Ge){const at=Ge;if(!function $f(E){if(!(E instanceof ie.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}(at)){if($.deleteThrottleMetadata(te),ze)return nr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${at?.message}]`),{appId:te,measurementId:ze};throw Ge}const Rt=503===Number(null===(W=at?.customData)||void 0===W?void 0:W.httpStatus)?(0,ie.$s)(M,$.intervalMillis,Wa):(0,ie.$s)(M,$.intervalMillis),Nt={throttleEndTimeMillis:Date.now()+Rt,backoffCount:M+1};return $.setThrottleMetadata(te,Nt),nr.debug(`Calling attemptFetch again in ${Rt} millis`),wl(E,Nt,P,$)}}),El.apply(this,arguments)}class dv{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let yo,zf;function Hf(){return(Hf=(0,O.Z)(function*(E,D,M,P,$){if($&&$.global)E("event",M,P);else{const W=yield D;E("event",M,Object.assign(Object.assign({},P),{send_to:W}))}})).apply(this,arguments)}function ln(){return(ln=(0,O.Z)(function*(){if(!(0,ie.hl)())return nr.warn(Un.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(E){return nr.warn(Un.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function ia(){return ia=(0,O.Z)(function*(E,D,M,P,$,W,te){var ze;const Ge=function jg(E){return Za.apply(this,arguments)}(E);Ge.then(On=>{M[On.measurementId]=On.appId,E.options.measurementId&&On.measurementId!==E.options.measurementId&&nr.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${On.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(On=>nr.error(On)),D.push(Ge);const at=function Gr(){return ln.apply(this,arguments)}().then(On=>{if(On)return P.getId()}),[Rt,Nt]=yield Promise.all([Ge,at]);(function ra(E){const D=window.document.getElementsByTagName("script");for(const M of Object.values(D))if(M.src&&M.src.includes(uc)&&M.src.includes(E))return M;return null})(W)||function ps(E,D){const M=function za(E,D){let M;return window.trustedTypes&&(M=window.trustedTypes.createPolicy(E,D)),M}("firebase-js-sdk-policy",{createScriptURL:vl}),P=document.createElement("script"),$=`${uc}?l=${E}&id=${D}`;P.src=M?M?.createScriptURL($):$,P.async=!0,document.head.appendChild(P)}(W,Rt.measurementId),zf&&($("consent","default",zf),function Dl(E){zf=E}(void 0)),$("js",new Date);const Ci=null!==(ze=te?.config)&&void 0!==ze?ze:{};return Ci[oc]="firebase",Ci.update=!0,null!=Nt&&(Ci[qd]=Nt),$("config",Rt.measurementId,Ci),yo&&($("set",yo),function fc(E){yo=E}(void 0)),Rt.measurementId}),ia.apply(this,arguments)}class Ns{constructor(D){this.app=D}_delete(){return delete Ii[this.app.options.appId],Promise.resolve()}}let Ii={},Zd=[];const Cl={};let Ps,yn,pc="dataLayer",_o="gtag",vt=!1;function Qa(E,D,M){!function Ya(){const E=[];if((0,ie.ru)()&&E.push("This is a browser extension environment."),(0,ie.zI)()||E.push("Cookies are not available."),E.length>0){const D=E.map((P,$)=>`(${$+1}) ${P}`).join(" "),M=Un.create("invalid-analytics-context",{errorInfo:D});nr.warn(M.message)}}();const P=E.options.appId;if(!P)throw Un.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw Un.create("no-api-key");nr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ii[P])throw Un.create("already-exists",{id:P});if(!vt){!function Uf(E){let D=[];Array.isArray(window[E])?D=window[E]:window[E]=D}(pc);const{wrappedGtag:W,gtagCore:te}=function Rs(E,D,M,P,$){let W=function(...te){window[P].push(arguments)};return window[$]&&"function"==typeof window[$]&&(W=window[$]),window[$]=function na(E,D,M,P){function W(){return W=(0,O.Z)(function*(te,...ze){try{if("event"===te){const[Ge,at]=ze;yield function _l(E,D,M,P,$){return qa.apply(this,arguments)}(E,D,M,Ge,at)}else if("config"===te){const[Ge,at]=ze;yield function cc(E,D,M,P,$,W){return po.apply(this,arguments)}(E,D,M,P,Ge,at)}else if("consent"===te){const[Ge]=ze;E("consent","update",Ge)}else if("get"===te){const[Ge,at,Rt]=ze;E("get",Ge,at,Rt)}else if("set"===te){const[Ge]=ze;E("set",Ge)}else E(te,...ze)}catch(Ge){nr.error(Ge)}}),W.apply(this,arguments)}return function $(te){return W.apply(this,arguments)}}(W,E,D,M),{gtagCore:W,wrappedGtag:window[$]}}(Ii,Zd,Cl,pc,_o);yn=W,Ps=te,vt=!0}return Ii[P]=function _r(E,D,M,P,$,W,te){return ia.apply(this,arguments)}(E,Zd,Cl,D,Ps,pc,M),new Ns(E)}function Xa(){return ni.apply(this,arguments)}function ni(){return(ni=(0,O.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const vc="@firebase/analytics";!function Os(){(0,re._registerComponent)(new se.wA(mn,(D,{options:M})=>Qa(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,re._registerComponent)(new se.wA("analytics-internal",function E(D){try{const M=D.getProvider(mn).getImmediate();return{logEvent:(P,$,W)=>function Yd(E,D,M,P){E=(0,ie.m9)(E),function hv(E,D,M,P,$){return Hf.apply(this,arguments)}(yn,Ii[E.app.options.appId],D,M,P).catch($=>nr.error($))}(M,P,$,W)}}catch(M){throw Un.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,re.registerVersion)(vc,"0.10.0"),(0,re.registerVersion)(vc,"0.10.0","esm2017")}();var Tl=k(4408),eu=k(7565);const Qd=new class tu extends eu.v{}(class ks extends Tl.o{constructor(D,M){super(D,M),this.scheduler=D,this.work=M}schedule(D,M=0){return M>0?super.schedule(D,M):(this.delay=M,this.state=D,this.scheduler.flush(this),this)}execute(D,M){return M>0||this.closed?super.execute(D,M):this._execute(D,M)}requestAsyncId(D,M,P=0){return null!=P&&P>0||null==P&&this.delay>0?super.requestAsyncId(D,M,P):(D.flush(this),0)}});var Sl=k(4986),Al=k(8505),Ml=k(9468),nu=k(5363);const oa=new f.GfV("7.5.0"),Eo="__angularfire_symbol__analyticsIsSupportedValue",ru="__angularfire_symbol__analyticsIsSupported",xl="__angularfire_symbol__remoteConfigIsSupportedValue",Io="__angularfire_symbol__remoteConfigIsSupported",Rl="__angularfire_symbol__messagingIsSupportedValue",_c="__angularfire_symbol__messagingIsSupported";function Pl(E,D,M){if(D){if(1===D.length)return D[0];const W=D.filter(te=>te.app===M);if(1===W.length)return W[0]}return M.container.getProvider(E).getImmediate({optional:!0})}globalThis[ru]||(globalThis[ru]=Xa().then(E=>globalThis[Eo]=E).catch(()=>globalThis[Eo]=!1)),globalThis[_c]||(globalThis[_c]=Vf().then(E=>globalThis[Rl]=E).catch(()=>globalThis[Rl]=!1)),globalThis[Io]||(globalThis[Io]=al().then(E=>globalThis[xl]=E).catch(()=>globalThis[xl]=!1));const wc=(E,D)=>{const M=D?[D]:(0,Y.C6)(),P=[];return M.forEach($=>{$.container.getProvider(E).instances.forEach(te=>{P.includes(te)||P.push(te)})}),P};function Qi(){}class iu{constructor(D,M=Qd){this.zone=D,this.delegate=M}now(){return this.delegate.now()}schedule(D,M,P){const $=this.zone;return this.delegate.schedule(function(te){$.runGuarded(()=>{D.apply(this,[te])})},M,P)}}class su{constructor(D){this.zone=D,this.task=null}call(D,M){const P=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Qi,{},Qi,Qi)),M.pipe((0,Al.b)({next:P,complete:P,error:P})).subscribe(D).add(P)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Di=(()=>{class E{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new iu(Zone.current)),this.insideAngular=M.run(()=>new iu(Zone.current,Sl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(M){return new(M||E)(f.LFG(f.R0b))},E.\u0275prov=f.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function Fs(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function Wf(E){return Fs(),function $g(E){return function(M){return(M=M.lift(new su(E.ngZone))).pipe((0,Ml.R)(E.outsideAngular),(0,nu.Q)(E.insideAngular))}}(Fs())(E)}},2090:(gt,be,k)=>{k.d(be,{$s:()=>Ni,BH:()=>we,G6:()=>Te,L:()=>ce,LL:()=>Je,Pz:()=>_e,Sg:()=>$e,UG:()=>ne,US:()=>se,ZB:()=>q,ZR:()=>xt,aH:()=>Re,b$:()=>Ht,eu:()=>Be,hl:()=>He,jU:()=>Ct,m9:()=>jr,ne:()=>rn,pd:()=>Gi,r3:()=>fi,ru:()=>Xe,tV:()=>j,uI:()=>nt,vZ:()=>ht,w1:()=>le,xO:()=>mr,xb:()=>Ys,z$:()=>Ne,zI:()=>lt,zd:()=>Ur});const re=function(V){const L=[];let z=0;for(let pe=0;pe<V.length;pe++){let Q=V.charCodeAt(pe);Q<128?L[z++]=Q:Q<2048?(L[z++]=Q>>6|192,L[z++]=63&Q|128):55296==(64512&Q)&&pe+1<V.length&&56320==(64512&V.charCodeAt(pe+1))?(Q=65536+((1023&Q)<<10)+(1023&V.charCodeAt(++pe)),L[z++]=Q>>18|240,L[z++]=Q>>12&63|128,L[z++]=Q>>6&63|128,L[z++]=63&Q|128):(L[z++]=Q>>12|224,L[z++]=Q>>6&63|128,L[z++]=63&Q|128)}return L},se={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,L){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,pe=[];for(let Q=0;Q<V.length;Q+=3){const Oe=V[Q],bt=Q+1<V.length,Yt=bt?V[Q+1]:0,Ln=Q+2<V.length,bn=Ln?V[Q+2]:0;let xr=(15&Yt)<<2|bn>>6,Oi=63&bn;Ln||(Oi=64,bt||(xr=64)),pe.push(z[Oe>>2],z[(3&Oe)<<4|Yt>>4],z[xr],z[Oi])}return pe.join("")},encodeString(V,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(V):this.encodeByteArray(re(V),L)},decodeString(V,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(V):function(V){const L=[];let z=0,pe=0;for(;z<V.length;){const Q=V[z++];if(Q<128)L[pe++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Oe=V[z++];L[pe++]=String.fromCharCode((31&Q)<<6|63&Oe)}else if(Q>239&&Q<365){const Ln=((7&Q)<<18|(63&V[z++])<<12|(63&V[z++])<<6|63&V[z++])-65536;L[pe++]=String.fromCharCode(55296+(Ln>>10)),L[pe++]=String.fromCharCode(56320+(1023&Ln))}else{const Oe=V[z++],bt=V[z++];L[pe++]=String.fromCharCode((15&Q)<<12|(63&Oe)<<6|63&bt)}}return L.join("")}(this.decodeStringToByteArray(V,L))},decodeStringToByteArray(V,L){this.init_();const z=L?this.charToByteMapWebSafe_:this.charToByteMap_,pe=[];for(let Q=0;Q<V.length;){const Oe=z[V.charAt(Q++)],Yt=Q<V.length?z[V.charAt(Q)]:0;++Q;const bn=Q<V.length?z[V.charAt(Q)]:64;++Q;const zt=Q<V.length?z[V.charAt(Q)]:64;if(++Q,null==Oe||null==Yt||null==bn||null==zt)throw new fe;pe.push(Oe<<2|Yt>>4),64!==bn&&(pe.push(Yt<<4&240|bn>>2),64!==zt&&pe.push(bn<<6&192|zt))}return pe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}};class fe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ce=function(V){return function(V){const L=re(V);return se.encodeByteArray(L,!0)}(V).replace(/\./g,"")},j=function(V){try{return se.decodeString(V,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function q(V,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return L}for(const z in L)!L.hasOwnProperty(z)||!je(z)||(V[z]=q(V[z],L[z]));return V}function je(V){return"__proto__"!==V}const Me=()=>{try{return function De(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const V=process.env.__FIREBASE_DEFAULTS__;return V?JSON.parse(V):void 0})()||(()=>{if(typeof document>"u")return;let V;try{V=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=V&&j(V[1]);return L&&JSON.parse(L)})()}catch(V){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${V}`)}},Re=()=>{var V;return null===(V=Me())||void 0===V?void 0:V.config},_e=V=>{var L;return null===(L=Me())||void 0===L?void 0:L[`_${V}`]};class we{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,z)=>{this.resolve=L,this.reject=z})}wrapCallback(L){return(z,pe)=>{z?this.reject(z):this.resolve(pe),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(z):L(z,pe))}}}function $e(V,L){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const pe=L||"demo-project",Q=V.iat||0,Oe=V.sub||V.user_id;if(!Oe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const bt=Object.assign({iss:`https://securetoken.google.com/${pe}`,aud:pe,iat:Q,exp:Q+3600,auth_time:Q,sub:Oe,user_id:Oe,firebase:{sign_in_provider:"custom",identities:{}}},V);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(bt)),""].join(".")}function Ne(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function nt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function ne(){var V;const L=null===(V=Me())||void 0===V?void 0:V.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ct(){return"object"==typeof self&&self.self===self}function Xe(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function Ht(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function le(){const V=Ne();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function Te(){return!ne()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function He(){try{return"object"==typeof indexedDB}catch{return!1}}function Be(){return new Promise((V,L)=>{try{let z=!0;const pe="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(pe);Q.onsuccess=()=>{Q.result.close(),z||self.indexedDB.deleteDatabase(pe),V(!0)},Q.onupgradeneeded=()=>{z=!1},Q.onerror=()=>{var Oe;L((null===(Oe=Q.error)||void 0===Oe?void 0:Oe.message)||"")}}catch(z){L(z)}})}function lt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class xt extends Error{constructor(L,z,pe){super(z),this.code=L,this.customData=pe,this.name="FirebaseError",Object.setPrototypeOf(this,xt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Je.prototype.create)}}class Je{constructor(L,z,pe){this.service=L,this.serviceName=z,this.errors=pe}create(L,...z){const pe=z[0]||{},Q=`${this.service}/${L}`,Oe=this.errors[L],bt=Oe?function $t(V,L){return V.replace(Dt,(z,pe)=>{const Q=L[pe];return null!=Q?String(Q):`<${pe}?>`})}(Oe,pe):"Error";return new xt(Q,`${this.serviceName}: ${bt} (${Q}).`,pe)}}const Dt=/\{\$([^}]+)}/g;function fi(V,L){return Object.prototype.hasOwnProperty.call(V,L)}function Ys(V){for(const L in V)if(Object.prototype.hasOwnProperty.call(V,L))return!1;return!0}function ht(V,L){if(V===L)return!0;const z=Object.keys(V),pe=Object.keys(L);for(const Q of z){if(!pe.includes(Q))return!1;const Oe=V[Q],bt=L[Q];if(Yr(Oe)&&Yr(bt)){if(!ht(Oe,bt))return!1}else if(Oe!==bt)return!1}for(const Q of pe)if(!z.includes(Q))return!1;return!0}function Yr(V){return null!==V&&"object"==typeof V}function mr(V){const L=[];for(const[z,pe]of Object.entries(V))Array.isArray(pe)?pe.forEach(Q=>{L.push(encodeURIComponent(z)+"="+encodeURIComponent(Q))}):L.push(encodeURIComponent(z)+"="+encodeURIComponent(pe));return L.length?"&"+L.join("&"):""}function Ur(V){const L={};return V.replace(/^\?/,"").split("&").forEach(pe=>{if(pe){const[Q,Oe]=pe.split("=");L[decodeURIComponent(Q)]=decodeURIComponent(Oe)}}),L}function Gi(V){const L=V.indexOf("?");if(!L)return"";const z=V.indexOf("#",L);return V.substring(L,z>0?z:void 0)}function rn(V,L){const z=new rt(V,L);return z.subscribe.bind(z)}class rt{constructor(L,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{L(this)}).catch(pe=>{this.error(pe)})}next(L){this.forEachObserver(z=>{z.next(L)})}error(L){this.forEachObserver(z=>{z.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,z,pe){let Q;if(void 0===L&&void 0===z&&void 0===pe)throw new Error("Missing Observer.");Q=function pi(V,L){if("object"!=typeof V||null===V)return!1;for(const z of L)if(z in V&&"function"==typeof V[z])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:z,complete:pe},void 0===Q.next&&(Q.next=Qr),void 0===Q.error&&(Q.error=Qr),void 0===Q.complete&&(Q.complete=Qr);const Oe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),Oe}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,L)}sendOne(L,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{z(this.observers[L])}catch(pe){typeof console<"u"&&console.error&&console.error(pe)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qr(){}const sn=1e3,gi=2,Rn=144e5,Hn=.5;function Ni(V,L=sn,z=gi){const pe=L*Math.pow(z,V),Q=Math.round(Hn*pe*(Math.random()-.5)*2);return Math.min(Rn,pe+Q)}function jr(V){return V&&V._delegate?V._delegate:V}},952:(gt,be,k)=>{var f=k(4650);let Y=null;function O(){return Y}class ie{}const se=new f.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ve(){return(0,f.LFG)(j)}()},providedIn:"platform"}),n})();const ce=new f.OlP("Location Initialized");let j=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){B()?this._history.pushState(t,r,s):this._location.hash=s}replaceState(t,r,s){B()?this._history.replaceState(t,r,s):this._location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function q(){return new j((0,f.LFG)(se))}()},providedIn:"platform"}),n})();function B(){return!!window.history.pushState}function je(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function De(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function We(n){return n&&"?"!==n[0]?"?"+n:n}let ct=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Me)},providedIn:"root"}),n})();const de=new f.OlP("appBaseHref");let Me=(()=>{class n extends ct{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(se).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return je(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+We(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const l=this.prepareExternalUrl(s+We(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){const l=this.prepareExternalUrl(s+We(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fe),f.LFG(de,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xe=(()=>{class n extends ct{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=je(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let l=this.prepareExternalUrl(s+We(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){let l=this.prepareExternalUrl(s+We(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fe),f.LFG(de,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ue=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function $e(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(De(we(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+We(r))}normalize(t){return n.stripTrailingSlash(function _e(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,we(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+We(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+We(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=We,n.joinWithSlash=je,n.stripTrailingSlash=De,n.\u0275fac=function(t){return new(t||n)(f.LFG(ct))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Re(){return new Ue((0,f.LFG)(ct))}()},providedIn:"root"}),n})();function we(n){return n.replace(/\/index.html$/,"")}const Ne={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var nt=(()=>((nt=nt||{})[nt.Decimal=0]="Decimal",nt[nt.Percent=1]="Percent",nt[nt.Currency=2]="Currency",nt[nt.Scientific=3]="Scientific",nt))(),st=(()=>((st=st||{})[st.Decimal=0]="Decimal",st[st.Group=1]="Group",st[st.List=2]="List",st[st.PercentSign=3]="PercentSign",st[st.PlusSign=4]="PlusSign",st[st.MinusSign=5]="MinusSign",st[st.Exponential=6]="Exponential",st[st.SuperscriptingExponent=7]="SuperscriptingExponent",st[st.PerMille=8]="PerMille",st[st.Infinity=9]="Infinity",st[st.NaN=10]="NaN",st[st.TimeSeparator=11]="TimeSeparator",st[st.CurrencyDecimal=12]="CurrencyDecimal",st[st.CurrencyGroup=13]="CurrencyGroup",st))();function Dt(n,e){const t=(0,f.cg1)(n),r=t[f.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===st.CurrencyDecimal)return t[f.wAp.NumberSymbols][st.Decimal];if(e===st.CurrencyGroup)return t[f.wAp.NumberSymbols][st.Group]}return r}const rl=2,Yt=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Ln=22,bn=".",cn="0",zt=";",xr=",",Oi="#",qi="\xa4";function X(n,e,t,r,s){const l=function Et(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(zt),s=r[0],u=r[1],l=-1!==s.indexOf(bn)?s.split(bn):[s.substring(0,s.lastIndexOf(cn)+1),s.substring(s.lastIndexOf(cn)+1)],m=l[0],w=l[1]||"";t.posPre=m.substring(0,m.indexOf(Oi));for(let S=0;S<w.length;S++){const N=w.charAt(S);N===cn?t.minFrac=t.maxFrac=S+1:N===Oi?t.maxFrac=S+1:t.posSuf+=N}const b=m.split(xr);if(t.gSize=b[1]?b[1].length:0,t.lgSize=b[2]||b[1]?(b[2]||b[1]).length:0,u){const S=s.length-t.posPre.length-t.posSuf.length,N=u.indexOf(Oi);t.negPre=u.substring(0,N).replace(/'/g,""),t.negSuf=u.slice(N+S).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function nn(n,e){return(0,f.cg1)(n)[f.wAp.NumberFormats][e]}(e,nt.Currency),Dt(e,st.MinusSign));return l.minFrac=function mr(n){let e;const t=Ne[n];return t&&(e=t[2]),"number"==typeof e?e:rl}(r),l.maxFrac=l.minFrac,function ae(n,e,t,r,s,u,l=!1){let m="",w=!1;if(isFinite(n)){let b=function ft(n){let r,s,u,l,m,e=Math.abs(n)+"",t=0;for((s=e.indexOf(bn))>-1&&(e=e.replace(bn,"")),(u=e.search(/e/i))>0?(s<0&&(s=u),s+=+e.slice(u+1),e=e.substring(0,u)):s<0&&(s=e.length),u=0;e.charAt(u)===cn;u++);if(u===(m=e.length))r=[0],s=1;else{for(m--;e.charAt(m)===cn;)m--;for(s-=u,r=[],l=0;u<=m;u++,l++)r[l]=Number(e.charAt(u))}return s>Ln&&(r=r.splice(0,Ln-1),t=s-1,s=1),{digits:r,exponent:t,integerLen:s}}(n);l&&(b=function jt(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(b));let S=e.minInt,N=e.minFrac,H=e.maxFrac;if(u){const Tt=u.match(Yt);if(null===Tt)throw new Error(`${u} is not a valid digit info`);const wt=Tt[1],Ot=Tt[3],Wt=Tt[5];null!=wt&&(S=Qt(wt)),null!=Ot&&(N=Qt(Ot)),null!=Wt?H=Qt(Wt):null!=Ot&&N>H&&(H=N)}!function tn(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,s=r.length-n.integerLen;const u=Math.min(Math.max(e,s),t);let l=u+n.integerLen,m=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let N=l;N<r.length;N++)r[N]=0}else{s=Math.max(0,s),n.integerLen=1,r.length=Math.max(1,l=u+1),r[0]=0;for(let N=1;N<l;N++)r[N]=0}if(m>=5)if(l-1<0){for(let N=0;N>l;N--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;s<Math.max(0,u);s++)r.push(0);let w=0!==u;const b=e+n.integerLen,S=r.reduceRight(function(N,H,K,ye){return ye[K]=(H+=N)<10?H:H-10,w&&(0===ye[K]&&K>=b?ye.pop():w=!1),H>=10?1:0},0);S&&(r.unshift(S),n.integerLen++)}(b,N,H);let K=b.digits,ye=b.integerLen;const Fe=b.exponent;let ke=[];for(w=K.every(Tt=>!Tt);ye<S;ye++)K.unshift(0);for(;ye<0;ye++)K.unshift(0);ye>0?ke=K.splice(ye,K.length):(ke=K,K=[0]);const It=[];for(K.length>=e.lgSize&&It.unshift(K.splice(-e.lgSize,K.length).join(""));K.length>e.gSize;)It.unshift(K.splice(-e.gSize,K.length).join(""));K.length&&It.unshift(K.join("")),m=It.join(Dt(t,r)),ke.length&&(m+=Dt(t,s)+ke.join("")),Fe&&(m+=Dt(t,st.Exponential)+"+"+Fe)}else m=Dt(t,st.Infinity);return m=n<0&&!w?e.negPre+m+e.negSuf:e.posPre+m+e.posSuf,m}(n,l,e,st.CurrencyGroup,st.CurrencyDecimal,s).replace(qi,t).replace(qi,"").trim()}function Qt(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class zn{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Qs=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,l)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new zn(s.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),Nn(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{Nn(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Nn(n,e){n.context.$implicit=e.item}let rs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Lt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ra("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ra("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Lt{constructor(){this.$implicit=null,this.ngIf=null}}function Ra(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let xf=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,s="symbol",u,l){if(!function Fu(n){return!(null==n||""===n||n!=n)}(t))return null;l=l||this._locale,"boolean"==typeof s&&(s=s?"symbol":"code");let m=r||this._defaultCurrencyCode;"code"!==s&&(m="symbol"===s||"symbol-narrow"===s?function Yr(n,e,t="en"){const r=function Vr(n){return(0,f.cg1)(n)[f.wAp.Currencies]}(t)[n]||Ne[n]||[],s=r[1];return"narrow"===e&&"string"==typeof s?s:r[0]||n}(m,"symbol"===s?"wide":"narrow",l):s);try{return X(function Ad(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),l,m,r,u)}catch(w){throw function Xr(n,e){return new f.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.soG,16),f.Y36(f.EJc,16))},n.\u0275pipe=f.Yjl({name:"currency",type:n,pure:!0,standalone:!0}),n})();let _i=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const Md="server";function as(n){return n===Md}let Oa=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new xd((0,f.LFG)(se),window)}),n})();class xd{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ss(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ul(this.window.history)||ul(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ul(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class $d extends ie{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class pl extends $d{static makeCurrent(){!function re(n){Y||(Y=n)}(new pl)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Jo(){return Qo=Qo||document.querySelector("base"),Qo?Qo.getAttribute("href"):null}();return null==t?null:function Bg(n){hs=hs||document.createElement("a"),hs.setAttribute("href",n);const e=hs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Qo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function $o(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let hs,Qo=null;const Lf=new f.OlP("TRANSITION_ID"),cv=[{provide:f.ip1,useFactory:function tc(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=O(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[Lf,se,f.zs3],multi:!0}];let so=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const oo=new f.OlP("EventManagerPlugins");let nc=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const l=s[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oo),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Xo{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=O().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let gl=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const s=this.usageCount;let u=s.get(t)??0;return u+=r,u>0?s.set(t,u):s.delete(t),u}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),ao=(()=>{class n extends gl{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(u=>u.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const s=this.doc.createElement("style");s.textContent=r,t.appendChild(s);const u=this.styleRef.get(r);u?u.push(s):this.styleRef.set(r,[s])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const uo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},rc=/%COMP%/g,Ha=new f.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Gd(n,e){return e.flat(100).map(t=>t.replace(rc,n))}function ho(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Fi=(()=>{class n{constructor(t,r,s,u){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestory=u,this.rendererByCompId=new Map,this.defaultRenderer=new fs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const s=this.getOrCreateRenderer(t,r);return s instanceof qd?s.applyToHost(t):s instanceof mn&&s.applyStyles(),s}getOrCreateRenderer(t,r){const s=this.rendererByCompId;let u=s.get(r.id);if(!u){const l=this.eventManager,m=this.sharedStylesHost,w=this.removeStylesOnCompDestory;switch(r.encapsulation){case f.ifc.Emulated:u=new qd(l,m,r,this.appId,w);break;case f.ifc.ShadowDom:return new zd(l,m,t,r);default:u=new mn(l,m,r,w)}u.onDestroy=()=>s.delete(r.id),s.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(nc),f.LFG(ao),f.LFG(f.AFp),f.LFG(Ha))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class fs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(uo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ta(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ta(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=uo[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=uo[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,s&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ho(r)):this.eventManager.addEventListener(e,t,ho(r))}}function ta(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class zd extends fs{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Gd(s.id,s.styles);for(const l of u){const m=document.createElement("style");m.textContent=l,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class mn extends fs{constructor(e,t,r,s,u=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=s,this.rendererUsageCount=0,this.styles=Gd(u,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class qd extends mn{constructor(e,t,r,s,u){const l=s+"-"+r.id;super(e,t,r,u,l),this.contentAttr=function Vf(n){return"_ngcontent-%COMP%".replace(rc,n)}(l),this.hostAttr=function sc(n){return"_nghost-%COMP%".replace(rc,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let oc=(()=>{class n extends Xo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const yl=["alt","control","meta","shift"],ac={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},uc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let nr=(()=>{class n extends Xo{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),yl.forEach(b=>{const S=r.indexOf(b);S>-1&&(r.splice(S,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=s,w.fullKey=l,w}static matchEventFullKeyCode(t,r){let s=ac[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),yl.forEach(l=>{l!==s&&(0,uc[l])(t)&&(u+=l+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const _l=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function ps(){pl.makeCurrent()},multi:!0},{provide:se,useFactory:function cc(){return(0,f.RDi)(document),document},deps:[]}]),qa=new f.OlP(""),na=[{provide:f.rWj,useClass:class $a{addToWindow(e){f.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const s=f.dqk.getAllAngularTestabilities();let u=s.length,l=!1;const m=function(w){l=l||w,u--,0==u&&r(l)};s.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Rs=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Uf(){return new f.qLn},deps:[]},{provide:oo,useClass:oc,multi:!0,deps:[se,f.R0b,f.Lbi]},{provide:oo,useClass:nr,multi:!0,deps:[se]},{provide:Fi,useClass:Fi,deps:[nc,ao,f.AFp,Ha]},{provide:f.FYo,useExisting:Fi},{provide:gl,useExisting:ao},{provide:ao,useClass:ao,deps:[se]},{provide:nc,useClass:nc,deps:[oo,f.R0b]},{provide:class Vu{},useClass:so,deps:[]},[]];let ra=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:Lf,useExisting:f.AFp},cv]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(qa,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...Rs,...na],imports:[_i,f.hGG]}),n})(),jf=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function mo(){return new jf((0,f.LFG)(se))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var ln=k(8996),_r=k(9751);const{isArray:ia}=Array,{getPrototypeOf:Ns,prototype:Ii,keys:Zd}=Object;function Cl(n){if(1===n.length){const e=n[0];if(ia(e))return{args:e,keys:null};if(function pc(n){return n&&"object"==typeof n&&Ns(n)===Ii}(e)){const t=Zd(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var _o=k(8421),Ps=k(7669),yn=k(5403),vt=k(4004);const{isArray:gc}=Array;function Qa(n){return(0,vt.U)(e=>function Ya(n,e){return gc(e)?n(...e):n(e)}(n,e))}function Ja(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}let Xa=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),ni=(()=>{class n extends Xa{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const wr=new f.OlP("NgValueAccessor"),Kd={provide:wr,useExisting:(0,f.Gpc)(()=>yc),multi:!0},sa=new f.OlP("CompositionEventMode");let yc=(()=>{class n extends Xa{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function wo(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(sa,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([Kd]),f.qOj]}),n})();const Yd=!1;function gs(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function vc(n){return null!=n&&"number"==typeof n.length}const Er=new f.OlP("NgValidators"),Os=new f.OlP("NgAsyncValidators"),Tl=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ks{static min(e){return function eu(n){return e=>{if(gs(e.value)||gs(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function tu(n){return e=>{if(gs(e.value)||gs(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Qd(n){return gs(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Jd(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Sl(n){return gs(n.value)||Tl.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Al(n){return e=>gs(e.value)||!vc(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Ml(n){return e=>vc(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function nu(n){if(!n)return oa;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(gs(r.value))return null;const s=r.value;return e.test(s)?null:{pattern:{requiredPattern:t,actualValue:s}}}}(e)}static nullValidator(e){return null}static compose(e){return Nl(e)}static composeAsync(e){return eh(e)}}function oa(n){return null}function Eo(n){return null!=n}function ru(n){const e=(0,f.QGY)(n)?(0,ln.D)(n):n;if(Yd&&!(0,f.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new f.vHH(-1101,t)}return e}function xl(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Io(n,e){return e.map(t=>t(n))}function _c(n){return n.map(e=>function Rl(n){return!n.validate}(e)?e:t=>e.validate(t))}function Nl(n){if(!n)return null;const e=n.filter(Eo);return 0==e.length?null:function(t){return xl(Io(t,e))}}function Xd(n){return null!=n?Nl(_c(n)):null}function eh(n){if(!n)return null;const e=n.filter(Eo);return 0==e.length?null:function(t){return function bl(...n){const e=(0,Ps.jO)(n),{args:t,keys:r}=Cl(n),s=new _r.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let w=l,b=l;for(let S=0;S<l;S++){let N=!1;(0,_o.Xf)(t[S]).subscribe((0,yn.x)(u,H=>{N||(N=!0,b--),m[S]=H},()=>w--,void 0,()=>{(!w||!N)&&(b||u.next(r?Ja(r,m):m),u.complete())}))}});return e?s.pipe(Qa(e)):s}(Io(t,e).map(ru)).pipe((0,vt.U)(xl))}}function th(n){return null!=n?eh(_c(n)):null}function Pl(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function wc(n){return n._rawValidators}function Qi(n){return n._rawAsyncValidators}function iu(n){return n?Array.isArray(n)?n:[n]:[]}function su(n,e){return Array.isArray(n)?n.includes(e):n===e}function Di(n,e){const t=iu(e);return iu(n).forEach(s=>{su(t,s)||t.push(s)}),t}function Fs(n,e){return iu(e).filter(t=>!su(n,t))}class ou{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Xd(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=th(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Pn extends ou{get formDirective(){return null}get path(){return null}}class Ls extends ou{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ol{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let kl=(()=>{class n extends Ol{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ls,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})(),Fl=(()=>{class n extends Ol{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Pn,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[f.qOj]}),n})();function On(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const ri=!1,Pr="VALID",Co="INVALID",ua="PENDING",bo="DISABLED";function Hg(n){return(Cc(n)?n.validators:n)||null}function Ic(n,e){return(Cc(e)?e.asyncValidators:n)||null}function Cc(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function ca(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new f.vHH(1e3,ri?function aa(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new f.vHH(1001,ri?function Ec(n,e){return`Cannot find form control ${On(n,e)}`}(e,t):"")}function nh(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new f.vHH(1002,ri?function Do(n,e){return`Must supply a value for form control ${On(n,e)}`}(e,s):"")})}class Ll{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Pr}get invalid(){return this.status===Co}get pending(){return this.status==ua}get disabled(){return this.status===bo}get enabled(){return this.status!==bo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Di(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Di(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Fs(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Fs(e,this._rawAsyncValidators))}hasValidator(e){return su(this._rawValidators,e)}hasAsyncValidator(e){return su(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ua,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=bo,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Pr,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Pr||this.status===ua)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?bo:Pr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ua,this._hasOwnPendingAsyncValidator=!0;const t=ru(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?bo:this.errors?Co:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ua)?ua:this._anyControlsHaveStatus(Co)?Co:Pr}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Cc(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Zf(n){return Array.isArray(n)?Xd(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Dc(n){return Array.isArray(n)?th(n):n||null}(this._rawAsyncValidators)}}class Vl extends Ll{constructor(e,t,r){super(Hg(t),Ic(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){nh(this,!0,e),Object.keys(e).forEach(r=>{ca(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Kf extends Vl{}const bc=new f.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>ms}),ms="always";function Tc(n,e,t=ms){Yf(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function sh(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&da(n,e)})}(n,e),function oh(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function zg(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&da(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Bl(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function la(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),ih(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ul(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Yf(n,e){const t=wc(n);null!==e.validator?n.setValidators(Pl(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Qi(n);null!==e.asyncValidator?n.setAsyncValidators(Pl(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();Ul(e._rawValidators,s),Ul(e._rawAsyncValidators,s)}function ih(n,e){let t=!1;if(null!==n){if(null!==e.validator){const s=wc(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(l=>l!==e.validator);u.length!==s.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const s=Qi(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(l=>l!==e.asyncValidator);u.length!==s.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Ul(e._rawValidators,r),Ul(e._rawAsyncValidators,r),t}function da(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Ac(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function tp(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Mc=class extends Ll{constructor(e=null,t,r){super(Hg(t),Ic(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Cc(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=tp(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Ac(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Ac(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){tp(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let uu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const Qg={provide:wr,useExisting:(0,f.Gpc)(()=>hh),multi:!0};let hh=(()=>{class n extends ni{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[f._Bn([Qg]),f.qOj]}),n})(),ii=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const Gl=new f.OlP("NgModelWithFormControlWarning"),_v={provide:Pn,useExisting:(0,f.Gpc)(()=>hr)};let hr=(()=>{class n extends Pn{constructor(t,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ih(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Tc(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){la(t.control||null,t,!1),function ch(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function jl(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,s=this.form.get(t.path);r!==s&&(la(r||null,t),(n=>n instanceof Mc)(s)&&(Tc(s,t,this.callSetDisabledState),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Qf(n,e){Yf(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function fv(n,e){return ih(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Yf(this.form,this),this._oldForm&&ih(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Er,10),f.Y36(Os,10),f.Y36(bc,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([_v]),f.qOj,f.TTD]}),n})();const Vi={provide:Ls,useExisting:(0,f.Gpc)(()=>zl)};let zl=(()=>{class n extends Ls{set isDisabled(t){}constructor(t,r,s,u,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function ha(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===yc?t=u:function ep(n){return Object.getPrototypeOf(n.constructor)===ni}(u)?r=u:s=u}),s||r||t||null}(0,u)}ngOnChanges(t){this._added||this._setUpControl(),function uh(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function rh(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(Pn,13),f.Y36(Er,10),f.Y36(Os,10),f.Y36(wr,10),f.Y36(Gl,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([Vi]),f.qOj,f.TTD]}),n})(),op=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[ii]}),n})();class _h extends Ll{constructor(e,t,r){super(Hg(t),Ic(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let s=this._adjustIndex(e);s<0&&(s=0),this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),this.controls.splice(s,1),t&&(this.controls.splice(s,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){nh(this,!1,e),e.forEach((r,s)=>{ca(this,!1,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function ql(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Cv=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const s=this._reduceControls(t);let u={};return ql(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new Vl(s,u)}record(t,r=null){const s=this._reduceControls(t);return new Kf(s,r)}control(t,r,s){let u={};return this.useNonNullable?(ql(r)?u=r:(u.validators=r,u.asyncValidators=s),new Mc(t,{...u,nonNullable:!0})):new Mc(t,r,s)}array(t,r,s){const u=t.map(l=>this._createControl(l));return new _h(u,r,s)}_reduceControls(t){const r={};return Object.keys(t).forEach(s=>{r[s]=this._createControl(t[s])}),r}_createControl(t){return t instanceof Mc||t instanceof Ll?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Lw=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:bc,useValue:t.callSetDisabledState??ms}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[op]}),n})(),Vw=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Gl,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:bc,useValue:t.callSetDisabledState??ms}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[op]}),n})();var Us=k(2011),oA=k(4986);function _t(...n){const e=(0,Ps.yG)(n);return(0,ln.D)(n,e)}var zr=k(4976),wh=k(8189);function Uw(...n){return function bv(){return(0,wh.J)(1)}()((0,ln.D)(n,(0,Ps.yG)(n)))}var si=k(4482);function am(...n){const e=(0,Ps.yG)(n);return(0,si.e)((t,r)=>{(e?Uw(n,t,e):Uw(n,t)).subscribe(r)})}function ap(){return(0,si.e)((n,e)=>{let t,r=!1;n.subscribe((0,yn.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function Eh(n,e){return(0,si.e)(function Bw(n,e,t,r,s){return(u,l)=>{let m=t,w=e,b=0;u.subscribe((0,yn.x)(l,S=>{const N=b++;w=m?n(w,S,N):(m=!0,S),r&&l.next(w)},s&&(()=>{m&&l.next(w),l.complete()})))}}(n,e,arguments.length>=2,!0))}var So=k(4671);function Tv(n,e){return n===e}function Xi(n,e){return(0,si.e)((t,r)=>{let s=0;t.subscribe((0,yn.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}k(2644);var Qe,Sv=k(3942),ge=k(5861),ys=k(6881),up=k(4859),fa=k(1877),pn=k(2090),LC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bs={},Av=Av||{},Vt=LC||self;function um(){}function Ih(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function cp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Mv="closure_uid_"+(1e9*Math.random()>>>0),$w=0;function uA(n,e,t){return n.call.apply(n.bind,arguments)}function VC(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Ir(n,e,t){return(Ir=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?uA:VC).apply(null,arguments)}function cm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Zn(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[s].apply(r,l)}}function js(){this.s=this.s,this.o=this.o}js.prototype.s=!1,js.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function jw(n){Object.prototype.hasOwnProperty.call(n,Mv)&&n[Mv]||(n[Mv]=++$w)}(this)},js.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const xv=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Rv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Hw(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Ih(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let l=0;l<u;l++)n[s+l]=r[l]}else n.push(r)}}function bi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}bi.prototype.h=function(){this.defaultPrevented=!0};var Gw=function(){if(!Vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Vt.addEventListener("test",um,e),Vt.removeEventListener("test",um,e)}catch{}return n}();function lp(n){return/^[\s\xa0]*$/.test(n)}var lm=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function dp(n,e){return n<e?-1:n>e?1:0}function dm(){var n=Vt.navigator;return n&&(n=n.userAgent)?n:""}function $s(n){return-1!=dm().indexOf(n)}function Wl(n){return Wl[" "](n),n}function zw(n,e,t){return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}Wl[" "]=um;var Hs,n,BC=$s("Opera"),Dh=$s("Trident")||$s("MSIE"),qw=$s("Edge"),Nv=qw||Dh,Ww=$s("Gecko")&&!(-1!=dm().toLowerCase().indexOf("webkit")&&!$s("Edge"))&&!($s("Trident")||$s("MSIE"))&&!$s("Edge"),jC=-1!=dm().toLowerCase().indexOf("webkit")&&!$s("Edge");function Zl(){var n=Vt.document;return n?n.documentMode:void 0}e:{var Pv="",Ov=(n=dm(),Ww?/rv:([^\);]+)(\)|;)/.exec(n):qw?/Edge\/([\d\.]+)/.exec(n):Dh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):jC?/WebKit\/(\S+)/.exec(n):BC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Ov&&(Pv=Ov?Ov[1]:""),Dh){var Zw=Zl();if(null!=Zw&&Zw>parseFloat(Pv)){Hs=String(Zw);break e}}Hs=Pv}var cA={},Qw=Vt.document&&Dh&&(Zl()||parseInt(Hs,10))||void 0;function hp(n,e){if(bi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Ww){e:{try{Wl(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Jw[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&hp.$.h.call(this)}}Zn(hp,bi);var Jw={2:"touch",3:"pen",4:"mouse"};hp.prototype.h=function(){hp.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var fp="closure_listenable_"+(1e6*Math.random()|0),$C=0;function Ao(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++$C,this.fa=this.ia=!1}function hm(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function fm(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Xw(n){const e={};for(const t in n)e[t]=n[t];return e}const eE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tE(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<eE.length;u++)t=eE[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function pm(n){this.src=n,this.g={},this.h=0}function gm(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=xv(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(hm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Fv(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return s}return-1}pm.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=Fv(n,e,r,s);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new Ao(e,this.src,u,!!r,s)).ia=t,n.push(e)),e};var Lv="closure_lm_"+(1e6*Math.random()|0),Vv={};function Ut(n,e,t,r,s){if(r&&r.once)return Bv(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Ut(n,e[u],t,r,s);return null}return t=Gv(t),n&&n[fp]?n.O(e,t,cp(r)?!!r.capture:!!r,s):Uv(n,e,t,!1,r,s)}function Uv(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var l=cp(s)?!!s.capture:!!s,m=mm(n);if(m||(n[Lv]=m=new pm(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function nE(){const e=HC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Gw||(s=l),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent($v(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Bv(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Bv(n,e[u],t,r,s);return null}return t=Gv(t),n&&n[fp]?n.P(e,t,cp(r)?!!r.capture:!!r,s):Uv(n,e,t,!0,r,s)}function rE(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)rE(n,e[u],t,r,s);else r=cp(r)?!!r.capture:!!r,t=Gv(t),n&&n[fp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Fv(u=n.g[e],t,r,s))&&(hm(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=mm(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Fv(e,t,r,s)),(t=-1<n?e[n]:null)&&jv(t))}function jv(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[fp])gm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent($v(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=mm(e))?(gm(t,n),0==t.h&&(t.src=null,e[Lv]=null)):hm(n)}}}function $v(n){return n in Vv?Vv[n]:Vv[n]="on"+n}function HC(n,e){if(n.fa)n=!0;else{e=new hp(e,this);var t=n.listener,r=n.la||n.src;n.ia&&jv(n),n=t.call(r,e)}return n}function mm(n){return(n=n[Lv])instanceof pm?n:null}var Hv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gv(n){return"function"==typeof n?n:(n[Hv]||(n[Hv]=function(e){return n.handleEvent(e)}),n[Hv])}function oi(){js.call(this),this.i=new pm(this),this.S=this,this.J=null}function qr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new bi(e,n);else if(e instanceof bi)e.target=e.target||n;else{var s=e;tE(e=new bi(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];s=pp(l,r,!0,e)&&s}if(s=pp(l=e.g=n,r,!0,e)&&s,s=pp(l,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=pp(l=e.g=t[u],r,!1,e)&&s}function pp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var m=l.listener,w=l.la||l.src;l.ia&&gm(n.i,l),s=!1!==m.call(w,r)&&s}}return s&&!r.defaultPrevented}Zn(oi,js),oi.prototype[fp]=!0,oi.prototype.removeEventListener=function(n,e,t,r){rE(this,n,e,t,r)},oi.prototype.N=function(){if(oi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)hm(t[r]);delete n.g[e],n.h--}}this.J=null},oi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},oi.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var du=Vt.JSON.stringify;function GC(){var n=ZC;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var iE,ym=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new zC,n=>n.reset());class zC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function lA(n){Vt.setTimeout(()=>{throw n},0)}function qC(n,e){iE||function WC(){var n=Vt.Promise.resolve(void 0);iE=function(){n.then(KC)}}(),vm||(iE(),vm=!0),ZC.add(n,e)}var vm=!1,ZC=new class zv{constructor(){this.h=this.g=null}add(e,t){const r=ym.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function KC(){for(var n;n=GC();){try{n.h.call(n.g)}catch(t){lA(t)}var e=ym;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}vm=!1}function hu(n,e){oi.call(this),this.h=n||1,this.g=e||Vt,this.j=Ir(this.qb,this),this.l=Date.now()}function qv(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function _m(n,e,t){if("function"==typeof n)t&&(n=Ir(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ir(n.handleEvent,n)}return 2147483647<Number(e)?-1:Vt.setTimeout(n,e||0)}function gp(n){n.g=_m(()=>{n.g=null,n.i&&(n.i=!1,gp(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Zn(hu,oi),(Qe=hu.prototype).ga=!1,Qe.T=null,Qe.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),qr(this,"tick"),this.ga&&(qv(this),this.start()))}},Qe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qe.N=function(){hu.$.N.call(this),qv(this),delete this.g};class YC extends js{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:gp(this)}N(){super.N(),this.g&&(Vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ch(n){js.call(this),this.h=n,this.g={}}Zn(Ch,js);var sE=[];function oE(n,e,t,r){Array.isArray(t)||(t&&(sE[0]=t.toString()),t=sE);for(var s=0;s<t.length;s++){var u=Ut(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function aE(n){fm(n.g,function(e,t){this.g.hasOwnProperty(t)&&jv(e)},n),n.g={}}function wm(){this.g=!0}function bh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function lE(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<s.length;l++)s[l]=""}}}return du(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Ch.prototype.N=function(){Ch.$.N.call(this),aE(this)},Ch.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wm.prototype.Ea=function(){this.g=!1},wm.prototype.info=function(){};var fu={},JC=null;function Th(){return JC=JC||new oi}function dE(n){bi.call(this,fu.Ta,n)}function Em(n){const e=Th();qr(e,new dE(e))}function Kl(n,e){bi.call(this,fu.STAT_EVENT,n),this.stat=e}function Ti(n){const e=Th();qr(e,new Kl(e,n))}function hE(n,e){bi.call(this,fu.Ua,n),this.size=e}function Sh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Vt.setTimeout(function(){n()},e)}fu.Ta="serverreachability",Zn(dE,bi),fu.STAT_EVENT="statevent",Zn(Kl,bi),fu.Ua="timingevent",Zn(hE,bi);var Im={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},fE={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ah(){}function Dm(){}Ah.prototype.h=null;var Cm,pu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function mp(){bi.call(this,"d")}function Mh(){bi.call(this,"c")}function xh(){}function Ql(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Ch(this),this.P=pE,this.V=new hu(n=Nv?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new bm}function bm(){this.i=null,this.g="",this.h=!1}Zn(mp,bi),Zn(Mh,bi),Zn(xh,Ah),xh.prototype.g=function(){return new XMLHttpRequest},xh.prototype.i=function(){return{}},Cm=new xh;var pE=45e3,yp={},Tm={};function Wv(n,e,t){n.L=1,n.v=Am(gu(e)),n.s=t,n.S=!0,Zv(n,null)}function Zv(n,e){n.G=Date.now(),vp(n),n.A=gu(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),bE(t.i,"t",r),n.C=0,t=n.l.I,n.h=new bm,n.g=vs(n.l,t?e:null,!n.s),0<n.O&&(n.M=new YC(Ir(n.Pa,n,n.g),n.O)),oE(n.U,n.g,"readystatechange",n.nb),e=n.I?Xw(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Em(),function QC(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),w=0;w<m.length;w++){var b=m[w].split("=");if(1<b.length){var S=b[0];b=b[1];var N=S.split("_");l=2<=N.length&&"type"==N[1]?l+(S+"=")+b+"&":l+(S+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function gE(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function Kv(n,e,t){let s,r=!0;for(;!n.J&&n.C<t.length;){if(s=mE(n,t),s==Tm){4==e&&(n.o=4,Ti(14),r=!1),bh(n.j,n.m,null,"[Incomplete Response]");break}if(s==yp){n.o=4,Ti(15),bh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}bh(n.j,n.m,s,null),vE(n,s)}gE(n)&&s!=Tm&&s!=yp&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ti(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ca&&(n.ca=!0,(e=n.l).g==n&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),o_(e),e.L=!0,Ti(11))):(bh(n.j,n.m,t,"[Invalid Chunked Response]"),Jl(n),_p(n))}function mE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Tm:(t=Number(e.substring(t,r)),isNaN(t)?yp:(r+=1)+t>e.length?Tm:(e=e.substr(r,t),n.C=r+t,e))}function vp(n){n.Y=Date.now()+n.P,yE(n,n.P)}function yE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Sh(Ir(n.lb,n),e)}function Si(n){n.B&&(Vt.clearTimeout(n.B),n.B=null)}function _p(n){0==n.l.H||n.J||Ro(n.l,n)}function Jl(n){Si(n);var e=n.M;e&&"function"==typeof e.ra&&e.ra(),n.M=null,qv(n.V),aE(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.ra())}function vE(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Pm(t.h,n)))if(!n.K&&Pm(t.h,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;jm(t),Um(t)}s_(t),Ti(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.M&&0==t.A&&!t.v&&(t.v=Sh(Ir(t.ib,t),6e3));if(1>=Jv(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else sr(t,11)}else if((n.K||t.g==n)&&jm(t),!lp(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let b=s[e];if(t.V=b[0],b=b[1],2==t.H)if("c"==b[0]){t.J=b[1],t.oa=b[2];const S=b[3];null!=S&&(t.qa=S,t.j.info("VER="+t.qa));const N=b[4];null!=N&&(t.Ga=N,t.j.info("SVER="+t.Ga));const H=b[5];null!=H&&"number"==typeof H&&0<H&&(t.K=r=1.5*H,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const K=n.g;if(K){const ye=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ye){var u=r.h;u.g||-1==ye.indexOf("spdy")&&-1==ye.indexOf("quic")&&-1==ye.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Om(u,u.h),u.h=null))}if(r.F){const Fe=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.Da=Fe,jn(r.G,r.F,Fe))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-n.G,t.j.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=Mp(r,r.I?r.oa:null,r.Y),l.K){Xv(r.h,l);var m=l,w=r.K;w&&m.setTimeout(w),m.B&&(Si(m),vp(m)),r.g=l}else Ap(r);0<t.i.length&&Sp(t)}else"stop"!=b[0]&&"close"!=b[0]||sr(t,7);else 3==t.H&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?sr(t,7):r_(t):"noop"!=b[0]&&t.l&&t.l.Aa(b),t.A=0)}Em()}catch{}}function wE(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ih(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function _E(n){if(n.sa&&"function"==typeof n.sa)return n.sa();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Ih(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Yv(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Ih(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(Qe=Ql.prototype).setTimeout=function(n){this.P=n},Qe.nb=function(n){n=n.target;const e=this.M;e&&3==xo(n)?e.l():this.Pa(n)},Qe.Pa=function(n){try{if(n==this.g)e:{const S=xo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>S)&&(3!=S||Nv||this.g&&(this.h.h||this.g.ja()||RE(this.g)))){this.J||4!=S||7==e||Em(),Si(this);var t=this.g.da();this.aa=t;t:if(gE(this)){var r=RE(this.g);n="";var s=r.length,u=4==xo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Jl(this),_p(this);var l="";break t}this.h.i=new Vt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function uE(n,e,t,r,s,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,S,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!lp(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Ti(12),Jl(this),_p(this);break e}bh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vE(this,t)}this.S?(Kv(this,S,l),Nv&&this.i&&3==S&&(oE(this.U,this.V,"tick",this.mb),this.V.start())):(bh(this.j,this.m,l,null),vE(this,l)),4==S&&Jl(this),this.i&&!this.J&&(4==S?Ro(this.l,this):(this.i=!1,vp(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ti(12)):(this.o=0,Ti(13)),Jl(this),_p(this)}}}catch{}},Qe.mb=function(){if(this.g){var n=xo(this.g),e=this.g.ja();this.C<e.length&&(Si(this),Kv(this,n,e),this.i&&4!=n&&vp(this))}},Qe.cancel=function(){this.J=!0,Jl(this)},Qe.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function cE(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Em(),Ti(17)),Jl(this),this.o=2,_p(this)):yE(this,this.Y-n)};var EE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kc(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof kc){this.h=void 0!==e?e:n.h,Sm(this,n.j),this.s=n.s,this.g=n.g,Rh(this,n.m),this.l=n.l,e=n.i;var t=new Ip;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),IE(this,t),this.o=n.o}else n&&(t=String(n).match(EE))?(this.h=!!e,Sm(this,t[1]||"",!0),this.s=wp(t[2]||""),this.g=wp(t[3]||"",!0),Rh(this,t[4]),this.l=wp(t[5]||"",!0),IE(this,t[6]||"",!0),this.o=wp(t[7]||"")):(this.h=!!e,this.i=new Ip(null,this.h))}function gu(n){return new kc(n)}function Sm(n,e,t){n.j=t?wp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Rh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function IE(n,e,t){e instanceof Ip?(n.i=e,function Rm(n,e){e&&!n.j&&(Fc(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(xm(this,r),bE(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ep(e,DE)),n.i=new Ip(e,n.h))}function jn(n,e,t){n.i.set(e,t)}function Am(n){return jn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function wp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ep(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,pa),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function pa(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}kc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ep(e,Mm,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ep(e,Mm,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ep(t,"/"==t.charAt(0)?tb:eb,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ep(t,nb)),n.join("")};var Mm=/[#\/\?@]/g,eb=/[#\?:]/g,tb=/[#\?]/g,DE=/[#\?@]/g,nb=/#/g;function Ip(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Fc(n){n.g||(n.g=new Map,n.h=0,n.i&&function XC(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function xm(n,e){Fc(n),e=mu(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function CE(n,e){return Fc(n),e=mu(n,e),n.g.has(e)}function bE(n,e,t){xm(n,e),0<t.length&&(n.i=null,n.g.set(mu(n,e),Rv(t)),n.h+=t.length)}function mu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function rb(n){this.l=n||Qv,n=Vt.PerformanceNavigationTiming?0<(n=Vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Vt.g&&Vt.g.Ka&&Vt.g.Ka()&&Vt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Qe=Ip.prototype).add=function(n,e){Fc(this),this.i=null,n=mu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Qe.forEach=function(n,e){Fc(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},Qe.sa=function(){Fc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},Qe.Z=function(n){Fc(this);let e=[];if("string"==typeof n)CE(this,n)&&(e=e.concat(this.g.get(mu(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Qe.set=function(n,e){return Fc(this),this.i=null,CE(this,n=mu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Qe.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Qe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var s=u;""!==l[r]&&(s+="="+encodeURIComponent(String(l[r]))),n.push(s)}}return this.i=n.join("&")};var Qv=10;function ib(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Jv(n){return n.h?1:n.g?n.g.size:0}function Pm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Om(n,e){n.g?n.g.add(e):n.h=e}function Xv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function km(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Rv(n.i)}function Mo(){}function Fm(){this.g=new Mo}function Lm(n,e,t){const r=t||"";try{wE(n,function(s,u){let l=s;cp(s)&&(l=du(s)),e.push(r+u+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Vm(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Nh(n){this.l=n.fc||null,this.j=n.ob||!1}function Cp(n,e){oi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=e_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rb.prototype.cancel=function(){if(this.i=km(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Mo.prototype.stringify=function(n){return Vt.JSON.stringify(n,void 0)},Mo.prototype.parse=function(n){return Vt.JSON.parse(n,void 0)},Zn(Nh,Ah),Nh.prototype.g=function(){return new Cp(this.l,this.j)},Nh.prototype.i=function(n){return function(){return n}}({}),Zn(Cp,oi);var e_=0;function TE(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function yu(n){n.readyState=4,n.l=null,n.j=null,n.A=null,bp(n)}function bp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Qe=Cp.prototype).open=function(n,e){if(this.readyState!=e_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,bp(this)},Qe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Vt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Qe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,yu(this)),this.readyState=e_},Qe.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,bp(this)),this.g&&(this.readyState=3,bp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Vt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;TE(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Qe.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?yu(this):bp(this),3==this.readyState&&TE(this)}},Qe.Za=function(n){this.g&&(this.response=this.responseText=n,yu(this))},Qe.Ya=function(n){this.g&&(this.response=n,yu(this))},Qe.ka=function(){this.g&&yu(this)},Qe.setRequestHeader=function(n,e){this.v.append(n,e)},Qe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Qe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Cp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var dA=Vt.JSON.parse;function ir(n){oi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=SE,this.L=this.M=!1}Zn(ir,oi);var SE="",sb=/^https?$/i,ob=["POST","PUT"];function AE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ME(n),Ph(n)}function ME(n){n.F||(n.F=!0,qr(n,"complete"),qr(n,"error"))}function t_(n){if(n.h&&typeof Av<"u"&&(!n.C[1]||4!=xo(n)||2!=n.da()))if(n.v&&4==xo(n))_m(n.La,0,n);else if(qr(n,"readystatechange"),4==xo(n)){n.h=!1;try{const m=n.da();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var s=String(n.I).match(EE)[1]||null;if(!s&&Vt.self&&Vt.self.location){var u=Vt.self.location.protocol;s=u.substr(0,u.length-1)}r=!sb.test(s?s.toLowerCase():"")}t=r}if(t)qr(n,"complete"),qr(n,"success");else{n.m=6;try{var l=2<xo(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.da()+"]",ME(n)}}finally{Ph(n)}}}function Ph(n,e){if(n.g){xE(n);const t=n.g,r=n.C[0]?um:null;n.g=null,n.C=null,e||qr(n,"ready");try{t.onreadystatechange=r}catch{}}}function xE(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Vt.clearTimeout(n.A),n.A=null)}function xo(n){return n.g?n.g.readyState:0}function RE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case SE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function NE(n){let e="";return fm(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function n_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=NE(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):jn(n,e,t))}function Tp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function PE(n){this.Ga=0,this.i=[],this.j=new wm,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Tp("failFast",!1,n),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Tp("baseRetryDelayMs",5e3,n),this.hb=Tp("retryDelaySeedMs",1e4,n),this.eb=Tp("forwardChannelMaxRetries",2,n),this.xa=Tp("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.K=void 0,this.I=n&&n.supportsCrossDomainXhr||!1,this.J="",this.h=new rb(n&&n.concurrentRequestLimit),this.Ja=new Fm,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.j.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function r_(n){if(i_(n),3==n.H){var e=n.W++,t=gu(n.G);jn(t,"SID",n.J),jn(t,"RID",e),jn(t,"TYPE","terminate"),Oh(n,t),(e=new Ql(n,n.j,e,void 0)).L=2,e.v=Am(gu(t)),t=!1,Vt.navigator&&Vt.navigator.sendBeacon&&(t=Vt.navigator.sendBeacon(e.v.toString(),"")),!t&&Vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=vs(e.l,null),e.g.ha(e.v)),e.G=Date.now(),vp(e)}Lc(n)}function Um(n){n.g&&(o_(n),n.g.cancel(),n.g=null)}function i_(n){Um(n),n.u&&(Vt.clearTimeout(n.u),n.u=null),jm(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Vt.clearTimeout(n.m),n.m=null)}function Sp(n){ib(n.h)||n.m||(n.m=!0,qC(n.Na,n),n.C=0)}function cb(n,e){var t;t=e?e.m:n.W++;const r=gu(n.G);jn(r,"SID",n.J),jn(r,"RID",t),jn(r,"AID",n.V),Oh(n,r),n.o&&n.s&&n_(r,n.o,n.s),t=new Ql(n,n.j,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.i=e.F.concat(n.i)),e=lb(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Om(n.h,t),Wv(t,r,e)}function Oh(n,e){n.ma&&fm(n.ma,function(t,r){jn(e,r,t)}),n.l&&wE({},function(t,r){jn(e,r,t)})}function lb(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Ir(n.l.Va,n.l,n):null;e:{var s=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=s[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let b=s[w].h;const S=s[w].g;if(b-=u,0>b)u=Math.max(0,s[w].h-100),m=!1;else try{Lm(S,l,"req"+b+"_")}catch{r&&r(S)}}if(m){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.F=n,r}function Ap(n){n.g||n.u||(n.ba=1,qC(n.Ma,n),n.A=0)}function s_(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Sh(Ir(n.Ma,n),kh(n,n.A)),n.A++,0))}function o_(n){null!=n.B&&(Vt.clearTimeout(n.B),n.B=null)}function Bm(n){n.g=new Ql(n,n.j,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=gu(n.wa);jn(e,"RID","rpc"),jn(e,"SID",n.J),jn(e,"CI",n.M?"0":"1"),jn(e,"AID",n.V),jn(e,"TYPE","xmlhttp"),Oh(n,e),n.o&&n.s&&n_(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.oa,t.L=1,t.v=Am(gu(e)),t.s=null,t.S=!0,Zv(t,n)}function jm(n){null!=n.v&&(Vt.clearTimeout(n.v),n.v=null)}function Ro(n,e){var t=null;if(n.g==e){jm(n),o_(n),n.g=null;var r=2}else{if(!Pm(n.h,e))return;t=e.F,Xv(n.h,e),r=1}if(0!=n.H)if(n.ta=e.aa,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var s=n.C;qr(r=Th(),new hE(r,t)),Sp(n)}else Ap(n);else if(3==(s=e.o)||0==s&&0<n.ta||!(1==r&&function ub(n,e){return!(Jv(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.F.concat(n.i),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Sh(Ir(n.Na,n,e),kh(n,n.C)),n.C++,0)))}(n,e)||2==r&&s_(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:sr(n,5);break;case 4:sr(n,10);break;case 3:sr(n,6);break;default:sr(n,2)}}function kh(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.l||(t*=2),t*e}function sr(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Ir(n.pb,n);t||(t=new kc("//www.google.com/images/cleardot.gif"),Vt.location&&"http"==Vt.location.protocol||Sm(t,"https"),Am(t)),function Dp(n,e){const t=new wm;if(Vt.Image){const r=new Image;r.onload=cm(Vm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=cm(Vm,t,r,"TestLoadImage: error",!1,e),r.onabort=cm(Vm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=cm(Vm,t,r,"TestLoadImage: timeout",!1,e),Vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ti(2);n.H=0,n.l&&n.l.za(e),Lc(n),i_(n)}function Lc(n){if(n.H=0,n.pa=[],n.l){const e=km(n.h);(0!=e.length||0!=n.i.length)&&(Hw(n.pa,e),Hw(n.pa,n.i),n.h.i.length=0,Rv(n.i),n.i.length=0),n.l.ya()}}function Mp(n,e,t){var r=t instanceof kc?gu(t):new kc(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Rh(r,r.m);else{var s=Vt.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new kc(null,void 0);r&&Sm(u,r),e&&(u.g=e),s&&Rh(u,s),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&jn(r,t,e),jn(r,"VER",n.qa),Oh(n,r),r}function vs(n,e,t){if(e&&!n.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ir(t&&n.Ha&&!n.va?new Nh({ob:!0}):n.va)).Oa(n.I),e}function $m(){}function vu(){if(Dh&&!(10<=Number(Qw)))throw Error("Environmental error: no available transport.")}function Wr(n,e){oi.call(this),this.g=new PE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!lp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!lp(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new No(this)}function Xl(n){mp.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function ed(){Mh.call(this),this.status=1}function No(n){this.g=n}function Ai(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Vc(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((s=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^u&(t^s))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^s^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(s^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(s^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((s=u+((l=s+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+u&4294967295}function on(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var u=0|n[s];r&&u==e||(t[s]=u,r=!1)}this.g=t}(Qe=ir.prototype).Oa=function(n){this.M=n},Qe.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Cm.g(),this.C=function Yl(n){return n.h||(n.h=n.i())}(this.u?this.u:Cm),this.g.onreadystatechange=Ir(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void AE(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Vt.FormData&&n instanceof Vt.FormData,!(0<=xv(ob,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{xE(this),0<this.B&&((this.L=function ab(n){return Dh&&function Kw(){return zw(cA,9,function(){let n=0;const e=lm(String(Hs)).split("."),t=lm("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var s=e[l]||"",u=t[l]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=dp(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||dp(0==s[2].length,0==u[2].length)||dp(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ir(this.ua,this)):this.A=_m(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){AE(this,u)}},Qe.ua=function(){typeof Av<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qr(this,"timeout"),this.abort(8))},Qe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,qr(this,"complete"),qr(this,"abort"),Ph(this))},Qe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ph(this,!0)),ir.$.N.call(this)},Qe.La=function(){this.s||(this.G||this.v||this.l?t_(this):this.kb())},Qe.kb=function(){t_(this)},Qe.da=function(){try{return 2<xo(this)?this.g.status:-1}catch{return-1}},Qe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Qe.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),dA(e)}},Qe.Ia=function(){return this.m},Qe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Qe=PE.prototype).qa=8,Qe.H=1,Qe.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new Ql(this,this.j,n,void 0);let u=this.s;if(this.U&&(u?(u=Xw(u),tE(u,this.U)):u=this.U),null!==this.o||this.O||(s.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=lb(this,s,e),jn(t=gu(this.G),"RID",n),jn(t,"CVER",22),this.F&&jn(t,"X-HTTP-Session-Id",this.F),Oh(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(NE(u)))+"&"+e:this.o&&n_(t,this.o,u)),Om(this.h,s),this.bb&&jn(t,"TYPE","init"),this.P?(jn(t,"$req",e),jn(t,"SID","null"),s.ba=!0,Wv(s,t,null)):Wv(s,t,e),this.H=2}}else 3==this.H&&(n?cb(this,n):0==this.i.length||ib(this.h)||cb(this))},Qe.Ma=function(){if(this.u=null,Bm(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var n=2*this.S;this.j.info("BP detection timer enabled: "+n),this.B=Sh(Ir(this.jb,this),n)}},Qe.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,Ti(10),Um(this),Bm(this))},Qe.ib=function(){null!=this.v&&(this.v=null,Um(this),s_(this),Ti(19))},Qe.pb=function(n){n?(this.j.info("Successfully pinged google.com"),Ti(2)):(this.j.info("Failed to ping google.com"),Ti(1))},(Qe=$m.prototype).Ba=function(){},Qe.Aa=function(){},Qe.za=function(){},Qe.ya=function(){},Qe.Va=function(){},vu.prototype.g=function(n,e){return new Wr(n,e)},Zn(Wr,oi),Wr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var n=this.g,e=this.l,t=this.h||void 0;Ti(0),n.Y=e,n.ma=t||{},n.M=n.aa,n.G=Mp(n,null,n.Y),Sp(n)},Wr.prototype.close=function(){r_(this.g)},Wr.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=du(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.fb++,n)),3==e.H&&Sp(e)},Wr.prototype.N=function(){this.g.l=null,delete this.j,r_(this.g),delete this.g,Wr.$.N.call(this)},Zn(Xl,mp),Zn(ed,Mh),Zn(No,$m),No.prototype.Ba=function(){qr(this.g,"a")},No.prototype.Aa=function(n){qr(this.g,new Xl(n))},No.prototype.za=function(n){qr(this.g,new ed)},No.prototype.ya=function(){qr(this.g,"b")},Zn(Ai,function Fh(){this.blockSize=-1}),Ai.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ai.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,u=0;u<e;){if(0==s)for(;u<=t;)Vc(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[s++]=n.charCodeAt(u++),s==this.blockSize){Vc(this,r),s=0;break}}else for(;u<e;)if(r[s++]=n[u++],s==this.blockSize){Vc(this,r),s=0;break}}this.h=s,this.i+=e},Ai.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var OE={};function Hm(n){return-128<=n&&128>n?zw(OE,n,function(e){return new on([0|e],0>e?-1:0)}):new on([0|n],0>n?-1:0)}function Po(n){if(isNaN(n)||!isFinite(n))return td;if(0>n)return ai(Po(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Gm;return new on(e,0)}var Gm=4294967296,td=Hm(0),zm=Hm(1),u_=Hm(16777216);function ga(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Gs(n){return-1==n.h}function ai(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new on(t,~n.h).add(zm)}function xp(n,e){return n.add(ai(e))}function qm(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Rp(n,e){this.g=n,this.h=e}function Lh(n,e){if(ga(e))throw Error("division by zero");if(ga(n))return new Rp(td,td);if(Gs(n))return e=Lh(ai(n),e),new Rp(ai(e.g),ai(e.h));if(Gs(e))return e=Lh(n,ai(e)),new Rp(ai(e.g),e.h);if(30<n.g.length){if(Gs(n)||Gs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=zm,r=e;0>=r.X(n);)t=Wm(t),r=Wm(r);var s=Vh(t,1),u=Vh(r,1);for(r=Vh(r,2),t=Vh(t,2);!ga(r);){var l=u.add(r);0>=l.X(n)&&(s=s.add(t),u=l),r=Vh(r,1),t=Vh(t,1)}return e=xp(n,s.R(e)),new Rp(s,e)}for(s=td;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=Po(t)).R(e);Gs(l)||0<l.X(n);)l=(u=Po(t-=r)).R(e);ga(u)&&(u=zm),s=s.add(u),n=xp(n,l)}return new Rp(s,n)}function Wm(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new on(t,n.h)}function Vh(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],u=0;u<r;u++)s[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new on(s,n.h)}(Qe=on.prototype).ea=function(){if(Gs(this))return-ai(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Gm+r)*e,e*=Gm}return n},Qe.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(ga(this))return"0";if(Gs(this))return"-"+ai(this).toString(n);for(var e=Po(Math.pow(n,6)),t=this,r="";;){var s=Lh(t,e).g,u=((0<(t=xp(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(ga(t=s))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},Qe.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Qe.X=function(n){return Gs(n=xp(this,n))?-1:ga(n)?0:1},Qe.abs=function(){return Gs(this)?ai(this):this},Qe.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var u=r+(65535&this.D(s))+(65535&n.D(s)),l=(u>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=l>>>16,t[s]=(l&=65535)<<16|(u&=65535)}return new on(t,-2147483648&t[t.length-1]?-1:0)},Qe.R=function(n){if(ga(this)||ga(n))return td;if(Gs(this))return Gs(n)?ai(this).R(ai(n)):ai(ai(this).R(n));if(Gs(n))return ai(this.R(ai(n)));if(0>this.X(u_)&&0>n.X(u_))return Po(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var u=this.D(r)>>>16,l=65535&this.D(r),m=n.D(s)>>>16,w=65535&n.D(s);t[2*r+2*s]+=l*w,qm(t,2*r+2*s),t[2*r+2*s+1]+=u*w,qm(t,2*r+2*s+1),t[2*r+2*s+1]+=l*m,qm(t,2*r+2*s+1),t[2*r+2*s+2]+=u*m,qm(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new on(t,0)},Qe.gb=function(n){return Lh(this,n).h},Qe.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new on(t,this.h&n.h)},Qe.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new on(t,this.h|n.h)},Qe.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new on(t,this.h^n.h)},vu.prototype.createWebChannel=vu.prototype.g,Wr.prototype.send=Wr.prototype.u,Wr.prototype.open=Wr.prototype.m,Wr.prototype.close=Wr.prototype.close,Im.NO_ERROR=0,Im.TIMEOUT=8,Im.HTTP_ERROR=6,fE.COMPLETE="complete",Dm.EventType=pu,pu.OPEN="a",pu.CLOSE="b",pu.ERROR="c",pu.MESSAGE="d",oi.prototype.listen=oi.prototype.O,ir.prototype.listenOnce=ir.prototype.P,ir.prototype.getLastError=ir.prototype.Sa,ir.prototype.getLastErrorCode=ir.prototype.Ia,ir.prototype.getStatus=ir.prototype.da,ir.prototype.getResponseJson=ir.prototype.Wa,ir.prototype.getResponseText=ir.prototype.ja,ir.prototype.send=ir.prototype.ha,ir.prototype.setWithCredentials=ir.prototype.Oa,Ai.prototype.digest=Ai.prototype.l,Ai.prototype.reset=Ai.prototype.reset,Ai.prototype.update=Ai.prototype.j,on.prototype.add=on.prototype.add,on.prototype.multiply=on.prototype.R,on.prototype.modulo=on.prototype.gb,on.prototype.compare=on.prototype.X,on.prototype.toNumber=on.prototype.ea,on.prototype.toString=on.prototype.toString,on.prototype.getBits=on.prototype.D,on.fromNumber=Po,on.fromString=function a_(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return ai(a_(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Po(Math.pow(e,8)),r=td,s=0;s<n.length;s+=8){var u=Math.min(8,n.length-s),l=parseInt(n.substring(s,s+u),e);8>u?(u=Po(Math.pow(e,u)),r=r.R(u).add(Po(l))):r=(r=r.R(t)).add(Po(l))}return r};var Zm=Bs.createWebChannelTransport=function(){return new vu},Km=Bs.getStatEventTarget=function(){return Th()},Np=Bs.ErrorCode=Im,db=Bs.EventType=fE,c_=Bs.Event=fu,Ym=Bs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},kE=Bs.FetchXmlHttpFactory=Nh,Qm=Bs.WebChannel=Dm,l_=Bs.XhrIo=ir,FE=Bs.Md5=Ai,nd=Bs.Integer=on;const Jm="@firebase/firestore";class Or{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Or.UNAUTHENTICATED=new Or(null),Or.GOOGLE_CREDENTIALS=new Or("google-credentials-uid"),Or.FIRST_PARTY=new Or("first-party-uid"),Or.MOCK_USER=new Or("mock-user");let Uh="9.22.0";const _u=new fa.Yd("@firebase/firestore");function Xm(){return _u.logLevel}function Pe(n,...e){if(_u.logLevel<=fa.in.DEBUG){const t=e.map(d_);_u.debug(`Firestore (${Uh}): ${n}`,...t)}}function fr(n,...e){if(_u.logLevel<=fa.in.ERROR){const t=e.map(d_);_u.error(`Firestore (${Uh}): ${n}`,...t)}}function zs(n,...e){if(_u.logLevel<=fa.in.WARN){const t=e.map(d_);_u.warn(`Firestore (${Uh}): ${n}`,...t)}}function d_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${Uh}) INTERNAL ASSERTION FAILED: `+n;throw fr(e),new Error(e)}function pt(n,e){n||it()}function Ye(n,e){return n}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends pn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Dr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class h_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Or.UNAUTHENTICATED))}shutdown(){}}class BE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ey{constructor(e){this.t=e,this.currentUser=Or.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=b=>this.i!==s?(s=this.i,t(b)):Promise.resolve();let l=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Dr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=l;e.enqueueRetryable((0,ge.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},w=b=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Dr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pt("string"==typeof r.accessToken),new h_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return pt(null===e||"string"==typeof e),new Or(e)}}class Uc{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Or.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class hb{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Uc(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Or.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class f_{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Pe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?s(u):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pt("string"==typeof t.token),this.T=t.token,new jE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function p_(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class $E{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=p_(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Pt(n,e){return n<e?-1:n>e?1:0}function Pp(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function fb(n){return n+"\0"}class $n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ie(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ie(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ie(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $n.fromMillis(Date.now())}static fromDate(e){return $n.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new $n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pt(this.nanoseconds,e.nanoseconds):Pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mt(e)}static min(){return new mt(new $n(0,0))}static max(){return new mt(new $n(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class jh{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===jh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof jh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),l=t.get(s);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class an extends jh{construct(e,t,r){return new an(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new an(t)}static emptyPath(){return new an([])}}const kr=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kn extends jh{construct(e,t,r){return new Kn(e,t,r)}static isValidIdentifier(e){return kr.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Kn(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Ie(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Ie(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[s+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ie(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,s+=2}else"`"===m?(l=!l,s++):"."!==m||l?(r+=m,s++):(u(),s++)}if(u(),l)throw new Ie(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kn(t)}static emptyPath(){return new Kn([])}}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(an.fromString(e))}static fromName(e){return new Ze(an.fromString(e).popFirst(5))}static empty(){return new Ze(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===an.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return an.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new an(e.slice()))}}class ty{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function ny(n){return n.fields.find(e=>2===e.kind)}function rd(n){return n.fields.filter(e=>2!==e.kind)}ty.UNKNOWN_ID=-1;class Op{constructor(e,t){this.fieldPath=e,this.kind=t}}class kp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new kp(0,_s.min())}}function GE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=mt.fromTimestamp(1e9===r?new $n(t+1,0):new $n(t,r));return new _s(s,Ze.empty(),e)}function g_(n){return new _s(n.readTime,n.key,-1)}class _s{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _s(mt.min(),Ze.empty(),-1)}static max(){return new _s(mt.max(),Ze.empty(),-1)}}function ry(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ze.comparator(n.documentKey,e.documentKey),0!==t?t:Pt(n.largestBatchId,e.largestBatchId))}const pb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class m_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ma(n){return qs.apply(this,arguments)}function qs(){return qs=(0,ge.Z)(function*(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==pb)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),qs.apply(this,arguments)}class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,r)=>{t(e)})}static reject(e){return new ee((t,r)=>{r(e)})}static waitFor(e){return new ee((t,r)=>{let s=0,u=0,l=!1;e.forEach(m=>{++s,m.next(()=>{++u,l&&u===s&&t()},w=>r(w))}),l=!0,u===s&&t()})}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next(s=>s?ee.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new ee((r,s)=>{const u=e.length,l=new Array(u);let m=0;for(let w=0;w<u;w++){const b=w;t(e[b]).next(S=>{l[b]=S,++m,m===u&&r(l)},S=>s(S))}})}static doWhile(e,t){return new ee((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class iy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Dr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Ui(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const s=y_(r.target.error);this.v.reject(new Ui(e,s))}}static open(e,t,r,s){try{return new iy(t,e.transaction(s,r))}catch(u){throw new Ui(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new zE(t)}}class Cr{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Cr.S((0,pn.z$)())&&fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),id(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,pn.hl)())return!1;if(Cr.C())return!0;const e=(0,pn.z$)(),t=Cr.S(e),r=0<t&&t<10,s=Cr.N(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,ge.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{s(new Ui(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;s("VersionError"===m.name?new Ie(oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Ie(oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Ui(e,m))},u.onupgradeneeded=l=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,ge.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.$(e);const w=iy.open(u.db,e,l?"readonly":"readwrite",r),b=s(w).next(S=>(w.P(),S)).catch(S=>(w.abort(S),ee.reject(S))).toPromise();return b.catch(()=>{}),yield w.R,b}catch(w){const b=w,S="FirebaseError"!==b.name&&m<3;if(Pe("SimpleDb","Transaction failed with error:",b.message,"Retrying:",S),u.close(),!S)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Oo{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return id(this.L.delete())}}class Ui extends Ie{constructor(e,t){super(oe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function wu(n){return"IndexedDbTransactionError"===n.name}class zE{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),id(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),id(this.store.add(e))}get(e){return id(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),id(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),id(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.W(s,(l,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new ee((u,l)=>{s.onerror=m=>{l(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ee((s,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}J(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.W(s,(u,l,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}Z(e){const t=this.cursor({});return new ee((r,s)=>{t.onerror=u=>{const l=y_(u.target.error);s(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}W(e,t){const r=[];return new ee((s,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void s();const w=new Oo(m),b=t(m.primaryKey,m.value,w);if(b instanceof ee){const S=b.catch(N=>(w.done(),ee.reject(N)));r.push(S)}w.isDone?s():null===w.K?m.continue():m.continue(w.K)}}).next(()=>ee.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function id(n){return new ee((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=y_(r.target.error);t(s)}})}let qE=!1;function y_(n){const e=Cr.S((0,pn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qE||(qE=!0,setTimeout(()=>{throw r},0)),r}}return n}class gb{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Pe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ge.Z)(function*(){t.task=null;try{Pe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){wu(r)?Pe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ma(r)}yield t.et(6e4)}))}}class v_{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let s=t,u=!0;return ee.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Pe("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,s).next(m=>{s-=m,r.add(l)});u=!1})).next(()=>t-s)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(s,u)).next(m=>(Pe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((s,u)=>{const l=g_(u);ry(l,r)>0&&(r=l)}),new _s(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ui=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>r.writeSequenceNumber(s))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Fp(n){return null==n}function Hh(n){return 0===n&&1/n==-1/0}function WE(n){return"number"==typeof n&&Number.isInteger(n)&&!Hh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Mi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=__(e)),e=ZE(n.get(t),e);return __(e)}function ZE(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function __(n){return n+"\x01\x01"}function ws(n){const e=n.length;if(pt(e>=2),2===e)return pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),an.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&it(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let w;0===s.length?w=m:(s+=m,w=s,s=""),r.push(w);break;case"\x10":s+=n.substring(u,l),s+="\0";break;case"\x11":s+=n.substring(u,l+1);break;default:it()}u=l+2}return new an(r)}const KE=["userId","batchId"];function Lp(n,e){return[n,Mi(e)]}function w_(n,e,t){return[n,Mi(e),t]}const E_={},sy=["prefixPath","collectionGroup","readTime","documentId"],YE=["prefixPath","collectionGroup","documentId"],QE=["collectionGroup","readTime","prefixPath","documentId"],JE=["canonicalId","targetId"],XE=["targetId","path"],eI=["path","targetId"],tI=["collectionId","parent"],nI=["indexId","uid"],rI=["uid","sequenceNumber"],mb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yb=["indexId","uid","orderedDocumentKey"],vb=["userId","collectionPath","documentId"],_b=["userId","collectionPath","largestBatchId"],wb=["userId","collectionGroup","largestBatchId"],iI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Eb=[...iI,"documentOverlays"],sI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],oI=sI,Ib=[...oI,"indexConfiguration","indexState","indexEntries"];class I_ extends m_{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Zr(n,e){const t=Ye(n);return Cr.M(t.ht,e)}function aI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class An{constructor(e,t){this.comparator=e,this.root=t||ci.EMPTY}insert(e,t){return new An(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ci.BLACK,null,null))}remove(e){return new An(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oy(this.root,e,this.comparator,!1)}getReverseIterator(){return new oy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oy(this.root,e,this.comparator,!0)}}class oy{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ci{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??ci.RED,this.left=s??ci.EMPTY,this.right=u??ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new ci(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return ci.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}ci.EMPTY=null,ci.RED=!0,ci.BLACK=!1,ci.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,s){return this}insert(n,e,t){return new ci(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Mn{constructor(e){this.comparator=e,this.data=new An(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new D_(this.data.getIterator())}getIteratorFrom(e){return new D_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Mn(this.comparator);return t.data=e,t}}class D_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function sd(n){return n.hasNext()?n.getNext():void 0}class Bi{constructor(e){this.fields=e,e.sort(Kn.comparator)}static empty(){return new Bi([])}unionWith(e){let t=new Mn(Kn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Bi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pp(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class C_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class br{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new C_("Invalid base64 string: "+s):s}}(e);return new br(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new br(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}br.EMPTY_BYTE_STRING=new br("");const lI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Eu(n){if(pt(!!n),"string"==typeof n){let e=0;const t=lI.exec(n);if(pt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yn(n.seconds),nanos:Yn(n.nanos)}}function Yn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ya(n){return"string"==typeof n?br.fromBase64String(n):br.fromUint8Array(n)}function va(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ay(n){const e=n.mapValue.fields.__previous_value__;return va(e)?ay(e):e}function Vp(n){const e=Eu(n.mapValue.fields.__local_write_time__.timestampValue);return new $n(e.seconds,e.nanos)}class Gh{constructor(e,t,r,s,u,l,m,w,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.longPollingOptions=w,this.useFetchStreams=b}}class od{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new od("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof od&&e.projectId===this.projectId&&e.database===this.database}}const _a={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},b_={nullValue:"NULL_VALUE"};function Iu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?va(n)?4:hI(n)?9007199254740991:10:it()}function ko(n,e){if(n===e)return!0;const t=Iu(n);if(t!==Iu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Vp(n).isEqual(Vp(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=Eu(r.timestampValue),l=Eu(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,ya(n.bytesValue).isEqual(ya(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Yn(r.geoPointValue.latitude)===Yn(s.geoPointValue.latitude)&&Yn(r.geoPointValue.longitude)===Yn(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Yn(r.integerValue)===Yn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=Yn(r.doubleValue),l=Yn(s.doubleValue);return u===l?Hh(u)===Hh(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return Pp(n.arrayValue.values||[],e.arrayValue.values||[],ko);case 10:return function(r,s){const u=r.mapValue.fields||{},l=s.mapValue.fields||{};if(aI(u)!==aI(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!ko(u[m],l[m])))return!1;return!0}(n,e);default:return it()}var s}function uy(n,e){return void 0!==(n.values||[]).find(t=>ko(t,e))}function yt(n,e){if(n===e)return 0;const t=Iu(n),r=Iu(e);if(t!==r)return Pt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=Yn(s.integerValue||s.doubleValue),m=Yn(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return dI(n.timestampValue,e.timestampValue);case 4:return dI(Vp(n),Vp(e));case 5:return Pt(n.stringValue,e.stringValue);case 6:return function(s,u){const l=ya(s),m=ya(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),m=u.split("/");for(let w=0;w<l.length&&w<m.length;w++){const b=Pt(l[w],m[w]);if(0!==b)return b}return Pt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=Pt(Yn(s.latitude),Yn(u.latitude));return 0!==l?l:Pt(Yn(s.longitude),Yn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],m=u.values||[];for(let w=0;w<l.length&&w<m.length;++w){const b=yt(l[w],m[w]);if(b)return b}return Pt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===_a.mapValue&&u===_a.mapValue)return 0;if(s===_a.mapValue)return 1;if(u===_a.mapValue)return-1;const l=s.fields||{},m=Object.keys(l),w=u.fields||{},b=Object.keys(w);m.sort(),b.sort();for(let S=0;S<m.length&&S<b.length;++S){const N=Pt(m[S],b[S]);if(0!==N)return N;const H=yt(l[m[S]],w[b[S]]);if(0!==H)return H}return Pt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw it()}}function dI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Pt(n,e);const t=Eu(n),r=Eu(e),s=Pt(t.seconds,r.seconds);return 0!==s?s:Pt(t.nanos,r.nanos)}function zh(n){return T_(n)}function T_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=Eu(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ya(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const l of r.values||[])u?u=!1:s+=",",s+=T_(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of s)l?l=!1:u+=",",u+=`${m}:${T_(r.fields[m])}`;return u+"}"}(n.mapValue):it();var e}function ad(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function qh(n){return!!n&&"integerValue"in n}function jc(n){return!!n&&"arrayValue"in n}function Qn(n){return!!n&&"nullValue"in n}function Db(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Up(n){return!!n&&"mapValue"in n}function Wh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Bc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Wh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function hI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function fI(n){return"nullValue"in n?b_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ad(od.empty(),Ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function pI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ad(od.empty(),Ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?_a:it()}function S_(n,e){const t=yt(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function A_(n,e){const t=yt(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class li{constructor(e){this.value=e}static empty(){return new li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Up(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wh(t)}setAll(e){let t=Kn.emptyPath(),r={},s=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,s),r={},s=[],t=m.popLast()}l?r[m.lastSegment()]=Wh(l):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());Up(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ko(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Up(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Bc(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new li(Wh(this.value))}}function gI(n){const e=[];return Bc(n.fields,(t,r)=>{const s=new Kn([t]);if(Up(r)){const u=gI(r.mapValue).fields;if(0===u.length)e.push(s);else for(const l of u)e.push(s.child(l))}else e.push(s)}),new Bi(e)}class kn{constructor(e,t,r,s,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new kn(e,0,mt.min(),mt.min(),mt.min(),li.empty(),0)}static newFoundDocument(e,t,r,s){return new kn(e,1,t,mt.min(),r,s,0)}static newNoDocument(e,t){return new kn(e,2,t,mt.min(),mt.min(),li.empty(),0)}static newUnknownDocument(e,t){return new kn(e,3,t,mt.min(),mt.min(),li.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(mt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ws{constructor(e,t){this.position=e,this.inclusive=t}}function mI(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],l=n.position[s];if(r=u.field.isKeyField()?Ze.comparator(Ze.fromName(l.referenceValue),t.key):yt(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function yI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ko(n.position[t],e.position[t]))return!1;return!0}class Zh{constructor(e,t="asc"){this.field=e,this.dir=t}}function cy(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class M_{}class Jt extends M_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new wI(e,t,r):"array-contains"===t?new bb(e,r):"in"===t?new Tb(e,r):"not-in"===t?new hA(e,r):"array-contains-any"===t?new fA(e,r):new Jt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Cb(e,r):new EI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(yt(t,this.value)):null!==t&&Iu(this.value)===Iu(t)&&this.matchesComparison(yt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class wn extends M_{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new wn(e,t)}matches(e){return Kh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Kh(n){return"and"===n.op}function ud(n){return"or"===n.op}function cd(n){return vI(n)&&Kh(n)}function vI(n){for(const e of n.filters)if(e instanceof wn)return!1;return!0}function x_(n){if(n instanceof Jt)return n.field.canonicalString()+n.op.toString()+zh(n.value);if(cd(n))return n.filters.map(e=>x_(e)).join(",");{const e=n.filters.map(t=>x_(t)).join(",");return`${n.op}(${e})`}}function _I(n,e){return n instanceof Jt?(t=n,(r=e)instanceof Jt&&t.op===r.op&&t.field.isEqual(r.field)&&ko(t.value,r.value)):n instanceof wn?function(t,r){return r instanceof wn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,l)=>s&&_I(u,r.filters[l]),!0)}(n,e):void it();var t,r}function R_(n,e){const t=n.filters.concat(e);return wn.create(t,n.op)}function N_(n){return n instanceof Jt?`${(e=n).field.canonicalString()} ${e.op} ${zh(e.value)}`:n instanceof wn?function(e){return e.op.toString()+" {"+e.getFilters().map(N_).join(" ,")+"}"}(n):"Filter";var e}class wI extends Jt{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class Cb extends Jt{constructor(e,t){super(e,"in",t),this.keys=II(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class EI extends Jt{constructor(e,t){super(e,"not-in",t),this.keys=II(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function II(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class bb extends Jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jc(t)&&uy(t.arrayValue,this.value)}}class Tb extends Jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&uy(this.value.arrayValue,t)}}class hA extends Jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(uy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!uy(this.value.arrayValue,t)}}class fA extends Jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>uy(this.value.arrayValue,r))}}class pA{constructor(e,t=null,r=[],s=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=l,this.endAt=m,this.dt=null}}function ly(n,e=null,t=[],r=[],s=null,u=null,l=null){return new pA(n,e,t,r,s,u,l)}function wa(n){const e=Ye(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>x_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Fp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>zh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>zh(r)).join(",")),e.dt=t}return e.dt}function Bp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!cy(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_I(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!yI(n.startAt,e.startAt)&&yI(n.endAt,e.endAt)}function dy(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function jp(n,e){return n.filters.filter(t=>t instanceof Jt&&t.field.isEqual(e))}function Yh(n,e,t){let r=b_,s=!0;for(const u of jp(n,e)){let l=b_,m=!0;switch(u.op){case"<":case"<=":l=fI(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=b_}S_({value:r,inclusive:s},{value:l,inclusive:m})<0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];S_({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}function DI(n,e,t){let r=_a,s=!0;for(const u of jp(n,e)){let l=_a,m=!0;switch(u.op){case">=":case">":l=pI(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=_a}A_({value:r,inclusive:s},{value:l,inclusive:m})>0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];A_({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}class Cu{constructor(e,t=null,r=[],s=[],u=null,l="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=w,this.wt=null,this._t=null}}function CI(n,e,t,r,s,u,l,m){return new Cu(n,e,t,r,s,u,l,m)}function Qh(n){return new Cu(n)}function Sb(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function P_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function $p(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function O_(n){return null!==n.collectionGroup}function ld(n){const e=Ye(n);if(null===e.wt){e.wt=[];const t=$p(e),r=P_(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Zh(t)),e.wt.push(new Zh(Kn.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Zh(Kn.keyField(),u))}}}return e.wt}function Fr(n){const e=Ye(n);if(!e._t)if("F"===e.limitType)e._t=ly(e.path,e.collectionGroup,ld(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of ld(e))t.push(new Zh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Ws(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Ws(e.startAt.position,e.startAt.inclusive):null;e._t=ly(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function k_(n,e){e.getFirstInequalityField(),$p(n);const t=n.filters.concat([e]);return new Cu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Hp(n,e,t){return new Cu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gp(n,e){return Bp(Fr(n),Fr(e))&&n.limitType===e.limitType}function F_(n){return`${wa(Fr(n))}|lt:${n.limitType}`}function L_(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>N_(r)).join(", ")}]`),Fp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>zh(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>zh(r)).join(",")),`Target(${t})`}(Fr(n))}; limitType=${n.limitType})`}function Jh(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Ze.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of ld(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,l){const m=mI(s,u,l);return s.inclusive?m<=0:m<0}(t.startAt,ld(t),r)||t.endAt&&!function(s,u,l){const m=mI(s,u,l);return s.inclusive?m>=0:m>0}(t.endAt,ld(t),r)));var t,r}function bI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function hy(n){return(e,t)=>{let r=!1;for(const s of ld(n)){const u=Ab(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function Ab(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(s,u,l){const m=u.data.field(s),w=l.data.field(s);return null!==m&&null!==w?yt(m,w):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}class Ea{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Bc(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return uI(this.inner)}size(){return this.innerSize}}const TI=new An(Ze.comparator);function es(){return TI}const SI=new An(Ze.comparator);function zp(...n){let e=SI;for(const t of n)e=e.insert(t.key,t);return e}function fy(n){let e=SI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ia(){return qp()}function V_(){return qp()}function qp(){return new Ea(n=>n.toString(),(n,e)=>n.isEqual(e))}const Mb=new An(Ze.comparator),xb=new Mn(Ze.comparator);function Gt(...n){let e=xb;for(const t of n)e=e.add(t);return e}const Rb=new Mn(Pt);function U_(){return Rb}function AI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hh(e)?"-0":e}}function MI(n){return{integerValue:""+n}}function B_(n,e){return WE(e)?MI(e):AI(n,e)}class Wp{constructor(){this._=void 0}}function Nb(n,e,t){return n instanceof Xh?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&va(s)&&(s=ay(s)),s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof dd?xI(n,e):n instanceof bu?py(n,e):function(r,s){const u=j_(r,s),l=gy(u)+gy(r.gt);return qh(u)&&qh(r.gt)?MI(l):AI(r.serializer,l)}(n,e)}function Pb(n,e,t){return n instanceof dd?xI(n,e):n instanceof bu?py(n,e):t}function j_(n,e){return n instanceof hd?qh(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Xh extends Wp{}class dd extends Wp{constructor(e){super(),this.elements=e}}function xI(n,e){const t=RI(e);for(const r of n.elements)t.some(s=>ko(s,r))||t.push(r);return{arrayValue:{values:t}}}class bu extends Wp{constructor(e){super(),this.elements=e}}function py(n,e){let t=RI(e);for(const r of n.elements)t=t.filter(s=>!ko(s,r));return{arrayValue:{values:t}}}class hd extends Wp{constructor(e,t){super(),this.serializer=e,this.gt=t}}function gy(n){return Yn(n.integerValue||n.doubleValue)}function RI(n){return jc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Zp{constructor(e,t){this.field=e,this.transform=t}}class Ob{constructor(e,t){this.version=e,this.transformResults=t}}class Fn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fn}static exists(e){return new Fn(void 0,e)}static updateTime(e){return new Fn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tu(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Kp{}function NI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new fd(n.key,Fn.none()):new $c(n.key,n.data,Fn.none());{const t=n.data,r=li.empty();let s=new Mn(Kn.comparator);for(let u of e.fields)if(!s.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),s=s.add(u)}return new Su(n.key,r,new Bi(s.toArray()),Fn.none())}}function gA(n,e,t){n instanceof $c?function(r,s,u){const l=r.value.clone(),m=my(r.fieldTransforms,s,u.transformResults);l.setAll(m),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Su?function(r,s,u){if(!Tu(r.precondition,s))return void s.convertToUnknownDocument(u.version);const l=my(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(G_(r)),m.setAll(l),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ef(n,e,t,r){return n instanceof $c?function(s,u,l,m){if(!Tu(s.precondition,u))return l;const w=s.value.clone(),b=z_(s.fieldTransforms,m,u);return w.setAll(b),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof Su?function(s,u,l,m){if(!Tu(s.precondition,u))return l;const w=z_(s.fieldTransforms,m,u),b=u.data;return b.setAll(G_(s)),b.setAll(w),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(S=>S.field))}(n,e,t,r):(l=t,Tu(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function H_(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=j_(r.transform,s||null);null!=u&&(null===t&&(t=li.empty()),t.set(r.field,u))}return t||null}function PI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Pp(t,r,(s,u)=>function $_(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof dd&&r instanceof dd||t instanceof bu&&r instanceof bu?Pp(t.elements,r.elements,ko):t instanceof hd&&r instanceof hd?ko(t.gt,r.gt):t instanceof Xh&&r instanceof Xh);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class $c extends Kp{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Su extends Kp{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function G_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function my(n,e,t){const r=new Map;pt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],l=u.transform,m=e.data.field(u.field);r.set(u.field,Pb(l,m,t[s]))}return r}function z_(n,e,t){const r=new Map;for(const s of n){const u=s.transform,l=t.data.field(s.field);r.set(s.field,Nb(u,l,e))}return r}class fd extends Kp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yy extends Kp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vy{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&gA(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ef(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ef(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=V_();return this.mutations.forEach(s=>{const u=e.get(s.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(s.key)?null:m;const w=NI(l,m);null!==w&&r.set(s.key,w),l.isValidDocument()||l.convertToNoDocument(mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gt())}isEqual(e){return this.batchId===e.batchId&&Pp(this.mutations,e.mutations,(t,r)=>PI(t,r))&&Pp(this.baseMutations,e.baseMutations,(t,r)=>PI(t,r))}}class q_{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){pt(e.mutations.length===r.length);let s=Mb;const u=e.mutations;for(let l=0;l<u.length;l++)s=s.insert(u[l].key,r[l].version);return new q_(e,t,r,s)}}class W_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Fb{constructor(e,t){this.count=e,this.unchangedNames=t}}var pr,dn;function Z_(n){switch(n){default:return it();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0}}function OI(n){if(void 0===n)return fr("GRPC error has no .code"),oe.UNKNOWN;switch(n){case pr.OK:return oe.OK;case pr.CANCELLED:return oe.CANCELLED;case pr.UNKNOWN:return oe.UNKNOWN;case pr.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case pr.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case pr.INTERNAL:return oe.INTERNAL;case pr.UNAVAILABLE:return oe.UNAVAILABLE;case pr.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case pr.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case pr.NOT_FOUND:return oe.NOT_FOUND;case pr.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case pr.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case pr.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case pr.ABORTED:return oe.ABORTED;case pr.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case pr.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case pr.DATA_LOSS:return oe.DATA_LOSS;default:return it()}}(dn=pr||(pr={}))[dn.OK=0]="OK",dn[dn.CANCELLED=1]="CANCELLED",dn[dn.UNKNOWN=2]="UNKNOWN",dn[dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dn[dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dn[dn.NOT_FOUND=5]="NOT_FOUND",dn[dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",dn[dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",dn[dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",dn[dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dn[dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dn[dn.ABORTED=10]="ABORTED",dn[dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",dn[dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",dn[dn.INTERNAL=13]="INTERNAL",dn[dn.UNAVAILABLE=14]="UNAVAILABLE",dn[dn.DATA_LOSS=15]="DATA_LOSS";class K_{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Y_}static getOrCreateInstance(){return null===Y_&&(Y_=new K_),Y_}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Y_=null;function kI(){return new TextEncoder}const Lb=new nd([4294967295,4294967295],0);function Q_(n){const e=kI().encode(n),t=new FE;return t.update(e),new Uint8Array(t.digest())}function J_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new nd([t,r],0),new nd([s,u],0)]}class X_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Yp(`Invalid padding: ${t}`);if(r<0)throw new Yp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Yp(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Yp(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=nd.fromNumber(this.It)}Et(e,t,r){let s=e.add(t.multiply(nd.fromNumber(r)));return 1===s.compare(Lb)&&(s=new nd([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Q_(e),[r,s]=J_(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new X_(u,s,t);return r.forEach(m=>l.insert(m)),l}insert(e){if(0===this.It)return;const t=Q_(e),[r,s]=J_(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Yp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qp{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Jp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Qp(mt.min(),s,new An(Pt),es(),Gt())}}class Jp{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Jp(r,t,Gt(),Gt(),Gt())}}class _y{constructor(e,t,r,s){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=s}}class FI{constructor(e,t){this.targetId=e,this.Vt=t}}class LI{constructor(e,t,r=br.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class VI{constructor(){this.St=0,this.Dt=t0(),this.Ct=br.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Gt(),t=Gt(),r=Gt();return this.Dt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:it()}}),new Jp(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=t0()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Xp{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=es(),this.zt=e0(),this.Wt=new An(Pt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,s)=>{this.te(s)&&t(s)})}ne(e){var t;const r=e.targetId,s=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(dy(l))if(0===s){const m=new Ze(l.path);this.Yt(r,m,kn.newNoDocument(m,mt.min()))}else pt(1===s);else{const m=this.ie(r);if(m!==s){const w=this.re(e,m);0!==w&&(this.ee(r),this.Wt=this.Wt.insert(r,2===w?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=K_.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(b,S,N){var H,K,ye,Fe,ke,It;const Tt={localCacheCount:S,existenceFilterCount:N.count},wt=N.unchangedNames;return wt&&(Tt.bloomFilter={applied:0===b,hashCount:null!==(H=wt?.hashCount)&&void 0!==H?H:0,bitmapLength:null!==(Fe=null===(ye=null===(K=wt?.bits)||void 0===K?void 0:K.bitmap)||void 0===ye?void 0:ye.length)&&void 0!==Fe?Fe:0,padding:null!==(It=null===(ke=wt?.bits)||void 0===ke?void 0:ke.padding)&&void 0!==It?It:0}),Tt}(w,m,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:m=0}=r;let w,b;try{w=ya(u).toUint8Array()}catch(S){if(S instanceof C_)return zs("Decoding the base64 bloom filter in existence filter failed ("+S.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw S}try{b=new X_(w,l,m)}catch(S){return zs(S instanceof Yp?"BloomFilter error: ":"Applying bloom filter failed: ",S),1}return 0===b.It?1:s!==t-this.oe(e.targetId,b)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(u=>{const l=this.Gt.ue(),m=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(m)||(this.Yt(e,u,null),s++)}),s}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const m=this.se(l);if(m){if(u.current&&dy(m.target)){const w=new Ze(m.target.path);null!==this.jt.get(w)||this.ae(l,w)||this.Yt(l,w,kn.newNoDocument(w,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=Gt();this.zt.forEach((u,l)=>{let m=!0;l.forEachWhile(w=>{const b=this.se(w);return!b||"TargetPurposeLimboResolution"===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const s=new Qp(e,t,this.Wt,this.jt,r);return this.jt=es(),this.zt=e0(),this.Wt=new An(Pt),s}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,t)?s.Bt(t,1):s.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new VI,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Mn(Pt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new VI),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function e0(){return new An(Ze.comparator)}function t0(){return new An(Ze.comparator)}const UI={asc:"ASCENDING",desc:"DESCENDING"},BI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jI={and:"AND",or:"OR"};class $I{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function n0(n,e){return n.useProto3Json||Fp(e)?e:{value:e}}function eg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Vb(n,e){return eg(n,e.toTimestamp())}function or(n){return pt(!!n),mt.fromTimestamp(function(e){const t=Eu(e);return new $n(t.seconds,t.nanos)}(n))}function r0(n,e){return(t=n,new an(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function GI(n){const e=an.fromString(n);return pt(KI(e)),e}function Au(n,e){return r0(n.databaseId,e.path)}function Da(n,e){const t=GI(e);if(t.get(1)!==n.databaseId.projectId)throw new Ie(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ie(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(wy(t))}function tg(n,e){return r0(n.databaseId,e)}function Fo(n){const e=GI(n);return 4===e.length?an.emptyPath():wy(e)}function ng(n){return new an(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function wy(n){return pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function tf(n,e,t){return{name:Au(n,e),fields:t.value.mapValue.fields}}function zI(n,e,t){const r=Da(n,e.name),s=or(e.updateTime),u=e.createTime?or(e.createTime):mt.min(),l=new li({mapValue:{fields:e.fields}}),m=kn.newFoundDocument(r,s,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Hc(n,e){let t;if(e instanceof $c)t={update:tf(n,e.key,e.value)};else if(e instanceof fd)t={delete:Au(n,e.key)};else if(e instanceof Su)t={update:tf(n,e.key,e.data),updateMask:$b(e.fieldMask)};else{if(!(e instanceof yy))return it();t={verify:Au(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof Xh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof dd)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof bu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof hd)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:Vb(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:it()),t;var s}function nf(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Fn.updateTime(or(s.updateTime)):void 0!==s.exists?Fn.exists(s.exists):Fn.none():Fn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,l){let m=null;"setToServerValue"in l?(pt("REQUEST_TIME"===l.setToServerValue),m=new Xh):"appendMissingElements"in l?m=new dd(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new bu(l.removeAllFromArray.values||[]):"increment"in l?m=new hd(u,l.increment):it();const w=Kn.fromServerFormat(l.fieldPath);return new Zp(w,m)}(n,s)):[];var s;if(e.update){const s=Da(n,e.update.name),u=new li({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Bi((e.updateMask.fieldPaths||[]).map(b=>Kn.fromServerFormat(b)));return new Su(s,u,l,t,r)}return new $c(s,u,t,r)}if(e.delete){const s=Da(n,e.delete);return new fd(s,t)}if(e.verify){const s=Da(n,e.verify);return new yy(s,t)}return it()}function qI(n,e){return{documents:[tg(n,e.path)]}}function Ey(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=tg(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=tg(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(w){if(0!==w.length)return ZI(wn.create(w,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(w){if(0!==w.length)return w.map(b=>{return{field:Ca((S=b).field),direction:u0(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=n0(n,e.limit);var m,w;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function s0(n){let e=Fo(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){pt(1===r);const S=t.from[0];S.allDescendants?s=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=function(S){const N=a0(S);return N instanceof wn&&cd(N)?N.getFilters():[N]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(S=>{return new Zh(Gc((N=S).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(S){let N;return N="object"==typeof S?S.value:S,Fp(N)?null:N}(t.limit));let w=null;var S;t.startAt&&(w=new Ws((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new Ws(S.values||[],!S.before)}(t.endAt)),CI(e,s,l,u,m,"F",w,b)}function a0(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Gc(e.unaryFilter.field);return Jt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Gc(e.unaryFilter.field);return Jt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Gc(e.unaryFilter.field);return Jt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Gc(e.unaryFilter.field);return Jt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return it()}}(n):void 0!==n.fieldFilter?Jt.create(Gc((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return wn.create(e.compositeFilter.filters.map(t=>a0(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return it()}}(e.compositeFilter.op))}(n):it();var e}function u0(n){return UI[n]}function c0(n){return BI[n]}function WI(n){return jI[n]}function Ca(n){return{fieldPath:n.canonicalString()}}function Gc(n){return Kn.fromServerFormat(n.fieldPath)}function ZI(n){return n instanceof Jt?function(e){if("=="===e.op){if(Db(e.value))return{unaryFilter:{field:Ca(e.field),op:"IS_NAN"}};if(Qn(e.value))return{unaryFilter:{field:Ca(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Db(e.value))return{unaryFilter:{field:Ca(e.field),op:"IS_NOT_NAN"}};if(Qn(e.value))return{unaryFilter:{field:Ca(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ca(e.field),op:c0(e.op),value:e.value}}}(n):n instanceof wn?function(e){const t=e.getFilters().map(r=>ZI(r));return 1===t.length?t[0]:{compositeFilter:{op:WI(e.op),filters:t}}}(n):it()}function $b(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function KI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Mu{constructor(e,t,r,s,u=mt.min(),l=mt.min(),m=br.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m,this.expectedCount=w}withSequenceNumber(e){return new Mu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Mu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class l0{constructor(e){this.fe=e}}function h0(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Iy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Au(s=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:eg(s,u.version.toTimestamp()),createTime:eg(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:zc(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:zc(e.version)}}var s,u;return r}function Iy(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function zc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function qc(n){const e=new $n(n.seconds,n.nanoseconds);return mt.fromTimestamp(e)}function pd(n,e){const t=(e.baseMutations||[]).map(u=>nf(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>nf(n.fe,u)),s=$n.fromMillis(e.localWriteTimeMs);return new vy(e.batchId,s,t,r)}function rf(n){const e=qc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?qc(n.lastLimboFreeSnapshotVersion):mt.min();let r;var s;return void 0!==n.query.documents?(pt(1===(s=n.query).documents.length),r=Fr(Qh(Fo(s.documents[0])))):r=Fr(s0(n.query)),new Mu(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,br.fromBase64String(n.resumeToken))}function f0(n,e){const t=zc(e.snapshotVersion),r=zc(e.lastLimboFreeSnapshotVersion);let s;s=dy(e.target)?qI(n.fe,e.target):Ey(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:wa(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function p0(n){const e=s0({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Hp(e,e.limit,"L"):e}function Dy(n,e){return new W_(e.largestBatchId,nf(n.fe,e.overlayMutation))}function YI(n,e){const t=e.path.lastSegment();return[n,Mi(e.path.popLast()),t]}function xi(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:zc(r.readTime),documentKey:Mi(r.documentKey.path),largestBatchId:r.largestBatchId}}class sf{getBundleMetadata(e,t){return QI(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:qc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return QI(e).put({bundleId:(r=t).id,createTime:zc(or(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return JI(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:p0(s.bundledQuery),readTime:qc(s.readTime)};var s})}saveNamedQuery(e,t){return JI(e).put({name:(r=t).name,readTime:zc(or(r.readTime)),bundledQuery:r.bundledQuery});var r}}function QI(n){return Zr(n,"bundles")}function JI(n){return Zr(n,"namedQueries")}class g0{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new g0(e,t.uid||"")}getOverlay(e,t){return Cy(e).get(YI(this.userId,t)).next(r=>r?Dy(this.serializer,r):null)}getOverlays(e,t){const r=Ia();return ee.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,l)=>{const m=new W_(t,l);s.push(this.we(e,m))}),ee.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(l=>s.add(Mi(l.getCollectionPath())));const u=[];return s.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(Cy(e).J("collectionPathOverlayIndex",m))}),ee.waitFor(u)}getOverlaysForCollection(e,t,r){const s=Ia(),u=Mi(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Cy(e).j("collectionPathOverlayIndex",l).next(m=>{for(const w of m){const b=Dy(this.serializer,w);s.set(b.getKey(),b)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=Ia();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cy(e).X({index:"collectionGroupOverlayIndex",range:m},(w,b,S)=>{const N=Dy(this.serializer,b);u.size()<s||N.largestBatchId===l?(u.set(N.getKey(),N),l=N.largestBatchId):S.done()}).next(()=>u)}we(e,t){return Cy(e).put(function(r,s,u){const[l,m,w]=YI(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Hc(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function Cy(n){return Zr(n,"documentOverlays")}class Wc{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Yn(e.integerValue));else if("doubleValue"in e){const r=Yn(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Hh(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(ya(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?hI(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):it()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const s of Object.keys(r))this.Te(s,t),this.me(r[s],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const s of r)this.me(s,t)}ve(e,t){this.ye(t,37),Ze.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function m0(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function af(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=m0(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Wc.Ve=new Wc;class Hb{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const s=t.codePointAt(0);this.De(240|s>>>18),this.De(128|63&s>>>12),this.De(128|63&s>>>6),this.De(128|63&s)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const s=t.codePointAt(0);this.Ne(240|s>>>18),this.Ne(128|63&s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s)}}this.ke()}Oe(e){const t=this.Fe(e),r=af(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Le(e){const t=this.Fe(e),r=af(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class y0{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Gb{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class uf{constructor(){this.je=new Hb,this.ze=new y0(this.je),this.We=new Gb(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class gd{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new gd(this.indexId,this.documentKey,this.arrayValue,r)}}function Zc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=XI(n.arrayValue,e.arrayValue),0!==t?t:(t=XI(n.directionalValue,e.directionalValue),0!==t?t:Ze.comparator(n.documentKey,e.documentKey)))}function XI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class v0{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){pt(e.collectionGroup===this.collectionId);const t=ny(e);if(void 0!==t&&!this.en(t))return!1;const r=rd(e);let s=0,u=0;for(;s<r.length&&this.en(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.Ze){const l=r[s];if(!this.nn(this.Ze,l)||!this.sn(this.Ye[u++],l))return!1;++s}for(;s<r.length;++s)if(u>=this.Ye.length||!this.sn(this.Ye[u++],r[s]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function _0(n){var e,t;if(pt(n instanceof Jt||n instanceof wn),n instanceof Jt){if(n instanceof Tb){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Jt.create(n.field,"==",u)))||[];return wn.create(s,"or")}return n}const r=n.filters.map(s=>_0(s));return wn.create(r,n.op)}function eD(n){if(0===n.getFilters().length)return[];const e=by(_0(n));return pt(zb(e)),cf(e)||rg(e)?[e]:e.getFilters()}function cf(n){return n instanceof Jt}function rg(n){return n instanceof wn&&cd(n)}function zb(n){return cf(n)||rg(n)||function(e){if(e instanceof wn&&ud(e)){for(const t of e.getFilters())if(!cf(t)&&!rg(t))return!1;return!0}return!1}(n)}function by(n){if(pt(n instanceof Jt||n instanceof wn),n instanceof Jt)return n;if(1===n.filters.length)return by(n.filters[0]);const e=n.filters.map(r=>by(r));let t=wn.create(e,n.op);return t=xu(t),zb(t)?t:(pt(t instanceof wn),pt(Kh(t)),pt(t.filters.length>1),t.filters.reduce((r,s)=>w0(r,s)))}function w0(n,e){let t;return pt(n instanceof Jt||n instanceof wn),pt(e instanceof Jt||e instanceof wn),t=n instanceof Jt?e instanceof Jt?wn.create([n,e],"and"):E0(n,e):e instanceof Jt?E0(e,n):function(r,s){if(pt(r.filters.length>0&&s.filters.length>0),Kh(r)&&Kh(s))return R_(r,s.getFilters());const u=ud(r)?r:s,l=ud(r)?s:r,m=u.filters.map(w=>w0(w,l));return wn.create(m,"or")}(n,e),xu(t)}function E0(n,e){if(Kh(e))return R_(e,n.getFilters());{const t=e.filters.map(r=>w0(n,r));return wn.create(t,"or")}}function xu(n){if(pt(n instanceof Jt||n instanceof wn),n instanceof Jt)return n;const e=n.getFilters();if(1===e.length)return xu(e[0]);if(vI(n))return n;const t=e.map(s=>xu(s)),r=[];return t.forEach(s=>{s instanceof Jt?r.push(s):s instanceof wn&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:wn.create(r,n.op)}class qb{constructor(){this.rn=new Ty}addToCollectionParentIndex(e,t){return this.rn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(_s.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class Ty{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Mn(an.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Mn(an.comparator)).toArray()}}const lf=new Uint8Array(0);class mA{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Ty,this.un=new Ea(r=>wa(r),(r,s)=>Bp(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:Mi(s)};return tD(e).put(u)}return ee.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[fb(t),""],!1,!0);return tD(e).j(s).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(ws(l.parent))}return r})}addFieldIndex(e,t){const r=Ay(e),s={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete s.indexId;const u=r.add(s);if(t.indexState){const l=ig(e);return u.next(m=>{l.put(xi(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Ay(e),s=ig(e),u=Sy(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Sy(e);let s=!0;const u=new Map;return ee.forEach(this.cn(t),l=>this.an(e,l).next(m=>{s&&(s=!!m),u.set(l,m)})).next(()=>{if(s){let l=Gt();const m=[];return ee.forEach(u,(w,b)=>{var S;Pe("IndexedDbIndexManager",`Using index ${S=w,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(wt=>`${wt.fieldPath}:${wt.kind}`).join(",")}`} to execute ${wa(t)}`);const N=function(wt,Ot){const Wt=ny(Ot);if(void 0===Wt)return null;for(const hn of jp(wt,Wt.fieldPath))switch(hn.op){case"array-contains-any":return hn.value.arrayValue.values||[];case"array-contains":return[hn.value]}return null}(b,w),H=function(wt,Ot){const Wt=new Map;for(const hn of rd(Ot))for(const ns of jp(wt,hn.fieldPath))switch(ns.op){case"==":case"in":Wt.set(hn.fieldPath.canonicalString(),ns.value);break;case"not-in":case"!=":return Wt.set(hn.fieldPath.canonicalString(),ns.value),Array.from(Wt.values())}return null}(b,w),K=function(wt,Ot){const Wt=[];let hn=!0;for(const ns of rd(Ot)){const Pg=0===ns.kind?Yh(wt,ns.fieldPath,wt.startAt):DI(wt,ns.fieldPath,wt.startAt);Wt.push(Pg.value),hn&&(hn=Pg.inclusive)}return new Ws(Wt,hn)}(b,w),ye=function(wt,Ot){const Wt=[];let hn=!0;for(const ns of rd(Ot)){const Pg=0===ns.kind?DI(wt,ns.fieldPath,wt.endAt):Yh(wt,ns.fieldPath,wt.endAt);Wt.push(Pg.value),hn&&(hn=Pg.inclusive)}return new Ws(Wt,hn)}(b,w),Fe=this.hn(w,b,K),ke=this.hn(w,b,ye),It=this.ln(w,b,H),Tt=this.fn(w.indexId,N,Fe,K.inclusive,ke,ye.inclusive,It);return ee.forEach(Tt,wt=>r.H(wt,t.limit).next(Ot=>{Ot.forEach(Wt=>{const hn=Ze.fromSegments(Wt.documentKey);l.has(hn)||(l=l.add(hn),m.push(hn))})}))}).next(()=>m)}return ee.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:eD(wn.create(e.filters,"and")).map(r=>ly(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,s,u,l,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),b=w/(null!=t?t.length:1),S=[];for(let N=0;N<w;++N){const H=t?this.dn(t[N/b]):lf,K=this.wn(e,H,r[N%b],s),ye=this._n(e,H,u[N%b],l),Fe=m.map(ke=>this.wn(e,H,ke,!0));S.push(...this.createRange(K,ye,Fe))}return S}wn(e,t,r,s){const u=new gd(e,Ze.empty(),t,r);return s?u:u.Je()}_n(e,t,r,s){const u=new gd(e,Ze.empty(),t,r);return s?u.Je():u}an(e,t){const r=new v0(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let l=null;for(const m of u)r.tn(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const s=this.cn(t);return ee.forEach(s,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let w=new Mn(Kn.comparator),b=!1;for(const S of m.filters)for(const N of S.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?b=!0:w=w.add(N.field));for(const S of m.orderBy)S.field.isKeyField()||(w=w.add(S.field));return w.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}mn(e,t){const r=new uf;for(const s of rd(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const l=r.He(s.kind);Wc.Ve._e(u,l)}return r.Qe()}dn(e){const t=new uf;return Wc.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new uf;return Wc.Ve._e(ad(this.databaseId,t),r.He(function(s){const u=rd(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let s=[];s.push(new uf);let u=0;for(const l of rd(e)){const m=r[u++];for(const w of s)if(this.yn(t,l.fieldPath)&&jc(m))s=this.pn(s,l,m);else{const b=w.He(l.kind);Wc.Ve._e(m,b)}}return this.In(s)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const s=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of s){const w=new uf;w.seed(m.Qe()),Wc.Ve._e(l,w.He(t.kind)),u.push(w)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof Jt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Ay(e),s=ig(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return ee.forEach(u,m=>s.get([m.indexId,this.uid]).next(w=>{l.push(function(b,S){const N=S?new kp(S.sequenceNumber,new _s(qc(S.readTime),new Ze(ws(S.documentKey)),S.largestBatchId)):kp.empty(),H=b.fields.map(([K,ye])=>new Op(Kn.fromServerFormat(K),ye));return new ty(b.indexId,b.collectionGroup,H,N)}(m,w))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Pt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Ay(e),u=ig(e);return this.Tn(e).next(l=>s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ee.forEach(m,w=>u.put(xi(w.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ee.forEach(t,(s,u)=>{const l=r.get(s.collectionGroup);return(l?ee.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),ee.forEach(m,w=>this.En(e,s,w).next(b=>{const S=this.An(u,w);return b.isEqual(S)?ee.resolve():this.vn(e,u,w,b,S)}))))})}Rn(e,t,r,s){return Sy(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,s){return Sy(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const s=Sy(e);let u=new Mn(Zc);return s.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,m)=>{u=u.add(new gd(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}An(e,t){let r=new Mn(Zc);const s=this.mn(t,e);if(null==s)return r;const u=ny(t);if(null!=u){const l=e.data.field(u.fieldPath);if(jc(l))for(const m of l.arrayValue.values||[])r=r.add(new gd(t.indexId,e.key,this.dn(m),s))}else r=r.add(new gd(t.indexId,e.key,lf,s));return r}vn(e,t,r,s,u){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,w,b,S,N){const H=m.getIterator(),K=w.getIterator();let ye=sd(H),Fe=sd(K);for(;ye||Fe;){let ke=!1,It=!1;if(ye&&Fe){const Tt=b(ye,Fe);Tt<0?It=!0:Tt>0&&(ke=!0)}else null!=ye?It=!0:ke=!0;ke?(S(Fe),Fe=sd(K)):It?(N(ye),ye=sd(H)):(ye=sd(H),Fe=sd(K))}}(s,u,Zc,m=>{l.push(this.Rn(e,t,r,m))},m=>{l.push(this.Pn(e,t,r,m))}),ee.waitFor(l)}Tn(e){let t=1;return ig(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>Zc(l,m)).filter((l,m,w)=>!m||0!==Zc(l,w[m-1]));const s=[];s.push(e);for(const l of r){const m=Zc(l,e),w=Zc(l,t);if(0===m)s[0]=e.Je();else if(m>0&&w<0)s.push(l),s.push(l.Je());else if(w>0)break}s.push(t);const u=[];for(let l=0;l<s.length;l+=2){if(this.bn(s[l],s[l+1]))return[];u.push(IDBKeyRange.bound([s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,lf,[]],[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,lf,[]]))}return u}bn(e,t){return Zc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(nD)}getMinOffset(e,t){return ee.mapArray(this.cn(t),r=>this.an(e,r).next(s=>s||it())).next(nD)}}function tD(n){return Zr(n,"collectionParents")}function Sy(n){return Zr(n,"indexEntries")}function Ay(n){return Zr(n,"indexConfiguration")}function ig(n){return Zr(n,"indexState")}function nD(n){pt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;ry(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new _s(e.readTime,e.documentKey,t)}const I0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class di{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new di(e,di.DEFAULT_COLLECTION_PERCENTILE,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function rD(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const w=r.X({range:l},(S,N,H)=>(m++,H.delete()));u.push(w.next(()=>{pt(1===m)}));const b=[];for(const S of t.mutations){const N=w_(e,S.key.path,t.batchId);u.push(s.delete(N)),b.push(S.key)}return ee.waitFor(u).next(()=>b)}function sg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}di.DEFAULT_COLLECTION_PERCENTILE=10,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,di.DEFAULT=new di(41943040,di.DEFAULT_COLLECTION_PERCENTILE,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),di.DISABLED=new di(-1,0,0);class og{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Vn={}}static de(e,t,r,s){pt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new og(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Kc(e).X({index:"userMutationsIndex",range:r},(s,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=md(e),l=Kc(e);return l.add({}).next(m=>{pt("number"==typeof m);const w=new vy(m,t,r,s),b=function(H,K,ye){const Fe=ye.baseMutations.map(It=>Hc(H.fe,It)),ke=ye.mutations.map(It=>Hc(H.fe,It));return{userId:K,batchId:ye.batchId,localWriteTimeMs:ye.localWriteTime.toMillis(),baseMutations:Fe,mutations:ke}}(this.serializer,this.userId,w),S=[];let N=new Mn((H,K)=>Pt(H.canonicalString(),K.canonicalString()));for(const H of s){const K=w_(this.userId,H.key.path,m);N=N.add(H.key.path.popLast()),S.push(l.put(b)),S.push(u.put(K,E_))}return N.forEach(H=>{S.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.Vn[m]=w.keys()}),ee.waitFor(S).next(()=>w)})}lookupMutationBatch(e,t){return Kc(e).get(t).next(r=>r?(pt(r.userId===this.userId),pd(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ee.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Vn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Kc(e).X({index:"userMutationsIndex",range:s},(l,m,w)=>{m.userId===this.userId&&(pt(m.batchId>=r),u=pd(this.serializer,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Kc(e).X({index:"userMutationsIndex",range:t,reverse:!0},(s,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Kc(e).j("userMutationsIndex",t).next(r=>r.map(s=>pd(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Lp(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return md(e).X({range:s},(l,m,w)=>{const[b,S,N]=l,H=ws(S);if(b===this.userId&&t.path.isEqual(H))return Kc(e).get(N).next(K=>{if(!K)throw it();pt(K.userId===this.userId),u.push(pd(this.serializer,K))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mn(Pt);const s=[];return t.forEach(u=>{const l=Lp(this.userId,u.path),m=IDBKeyRange.lowerBound(l),w=md(e).X({range:m},(b,S,N)=>{const[H,K,ye]=b,Fe=ws(K);H===this.userId&&u.path.isEqual(Fe)?r=r.add(ye):N.done()});s.push(w)}),ee.waitFor(s).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=Lp(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new Mn(Pt);return md(e).X({range:l},(w,b,S)=>{const[N,H,K]=w,ye=ws(H);N===this.userId&&r.isPrefixOf(ye)?ye.length===s&&(m=m.add(K)):S.done()}).next(()=>this.Dn(e,m))}Dn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(Kc(e).get(u).next(l=>{if(null===l)throw it();pt(l.userId===this.userId),r.push(pd(this.serializer,l))}))}),ee.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return rD(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ee.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ee.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return md(e).X({range:r},(u,l,m)=>{if(u[0]===this.userId){const w=ws(u[1]);s.push(w)}else m.done()}).next(()=>{pt(0===s.length)})})}containsKey(e,t){return iD(e,this.userId,t)}xn(e){return sD(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function iD(n,e,t){const r=Lp(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return md(n).X({range:u,Y:!0},(m,w,b)=>{const[S,N,H]=m;S===e&&N===s&&(l=!0),b.done()}).next(()=>l)}function Kc(n){return Zr(n,"mutations")}function md(n){return Zr(n,"documentMutations")}function sD(n){return Zr(n,"mutationQueues")}class Yc{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Yc(0)}static Mn(){return new Yc(-1)}}class oD{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Yc(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>mt.fromTimestamp(new $n(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.On(e,s)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>yd(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(pt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return yd(e).X((l,m)=>{const w=rf(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(s++,u.push(this.removeTargetData(e,w)))}).next(()=>ee.waitFor(u)).next(()=>s)}forEachTarget(e,t){return yd(e).X((r,s)=>{const u=rf(s);t(u)})}$n(e){return D0(e).get("targetGlobalKey").next(t=>(pt(null!==t),t))}On(e,t){return D0(e).put("targetGlobalKey",t)}Fn(e,t){return yd(e).put(f0(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=wa(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return yd(e).X({range:s,index:"queryTargetsIndex"},(l,m,w)=>{const b=rf(m);Bp(t,b.target)&&(u=b,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=Qc(e);return t.forEach(l=>{const m=Mi(l.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,l))}),ee.waitFor(s)}removeMatchingKeys(e,t,r){const s=Qc(e);return ee.forEach(t,u=>{const l=Mi(u.path);return ee.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Qc(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Qc(e);let u=Gt();return s.X({range:r,Y:!0},(l,m,w)=>{const b=ws(l[1]),S=new Ze(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Mi(t.path),s=IDBKeyRange.bound([r],[fb(r)],!1,!0);let u=0;return Qc(e).X({index:"documentTargetsIndex",Y:!0,range:s},([l,m],w,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}le(e,t){return yd(e).get(t).next(r=>r?rf(r):null)}}function yd(n){return Zr(n,"targets")}function D0(n){return Zr(n,"targetGlobal")}function Qc(n){return Zr(n,"targetDocuments")}function aD([n,e],[t,r]){const s=Pt(n,t);return 0===s?Pt(e,r):s}class yA{constructor(e){this.Ln=e,this.buffer=new Mn(aD),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();aD(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class C0{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ge.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){wu(r)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ma(r)}yield t.Qn(3e5)}))}}class vA{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ee.resolve(ui.ct);const r=new yA(t);return this.jn.forEachTarget(e,s=>r.Kn(s.sequenceNumber)).next(()=>this.jn.Wn(e,s=>r.Kn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(I0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),I0):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,s,u,l,m,w,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),s=this.params.maximumSequenceNumbersToCollect):s=N,l=Date.now(),this.nthSequenceNumber(e,s))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(b=Date.now(),Xm()<=fa.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-S}ms\n\tDetermined least recently used ${s} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(b-w)+`ms\nTotal Duration: ${b-S}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:N})))}}class _A{constructor(e,t){this.db=e,this.garbageCollector=function Wb(n,e){return new vA(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,s)=>t(s))}addReference(e,t,r){return b0(e,r)}removeReference(e,t,r){return b0(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return b0(e,t)}Xn(e,t){return function(r,s){let u=!1;return sD(r).Z(l=>iD(r,l,s).next(m=>(m&&(u=!0),ee.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Yn(e,(l,m)=>{if(m<=t){const w=this.Xn(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,mt.min()),Qc(e).delete([0,Mi(l.path)])))});s.push(w)}}).next(()=>ee.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return b0(e,t)}Yn(e,t){const r=Qc(e);let s,u=ui.ct;return r.X({index:"documentTargetsIndex"},([l,m],{path:w,sequenceNumber:b})=>{0===l?(u!==ui.ct&&t(new Ze(ws(s)),u),u=b,s=w):u=ui.ct}).next(()=>{u!==ui.ct&&t(new Ze(ws(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function b0(n,e){return Qc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Mi(e.path),sequenceNumber:r}));var r}class Zb{constructor(){this.changes=new Ea(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wA{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return df(e).put(r)}removeEntry(e,t,r){return df(e).delete(function(s,u){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Iy(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=kn.newInvalidDocument(t);return df(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(hf(t))},(s,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:kn.newInvalidDocument(t)};return df(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(hf(t))},(s,u)=>{r={document:this.ts(t,u),size:sg(u)}}).next(()=>r)}getEntries(e,t){let r=es();return this.ns(e,t,(s,u)=>{const l=this.ts(s,u);r=r.insert(s,l)}).next(()=>r)}ss(e,t){let r=es(),s=new An(Ze.comparator);return this.ns(e,t,(u,l)=>{const m=this.ts(u,l);r=r.insert(u,m),s=s.insert(u,sg(l))}).next(()=>({documents:r,rs:s}))}ns(e,t,r){if(t.isEmpty())return ee.resolve();let s=new Mn(T0);t.forEach(w=>s=s.add(w));const u=IDBKeyRange.bound(hf(s.first()),hf(s.last())),l=s.getIterator();let m=l.getNext();return df(e).X({index:"documentKeyIndex",range:u},(w,b,S)=>{const N=Ze.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&T0(m,N)<0;)r(m,null),m=l.getNext();m&&m.isEqual(N)&&(r(m,b),m=l.hasNext()?l.getNext():null),m?S.G(hf(m)):S.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,s){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),Iy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return df(e).j(IDBKeyRange.bound(l,m,!0)).next(w=>{let b=es();for(const S of w){const N=this.ts(Ze.fromSegments(S.prefixPath.concat(S.collectionGroup,S.documentId)),S);N.isFoundDocument()&&(Jh(t,N)||s.has(N.key))&&(b=b.insert(N.key,N))}return b})}getAllFromCollectionGroup(e,t,r,s){let u=es();const l=ug(t,r),m=ug(t,_s.max());return df(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(w,b,S)=>{const N=this.ts(Ze.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(N.key,N),u.size===s&&S.done()}).next(()=>u)}newChangeBuffer(e){return new EA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ag(e).get("remoteDocumentGlobalKey").next(t=>(pt(!!t),t))}Zn(e,t){return ag(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function d0(n,e){let t;if(e.document)t=zI(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ze.fromSegments(e.noDocument.path),s=qc(e.noDocument.readTime);t=kn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=Ze.fromSegments(e.unknownDocument.path),s=qc(e.unknownDocument.version);t=kn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new $n(r[0],r[1]);return mt.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(mt.min()))return r}return kn.newInvalidDocument(e)}}function Kb(n){return new wA(n)}class EA extends Zb{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Ea(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Mn((u,l)=>Pt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.us.get(u);if(t.push(this.os.removeEntry(e,u,m.readTime)),l.isValidDocument()){const w=h0(this.os.serializer,l);s=s.add(u.path.popLast());const b=sg(w);r+=b-m.size,t.push(this.os.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=h0(this.os.serializer,l.convertToNoDocument(mt.min()));t.push(this.os.addEntry(e,u,w))}}),s.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),ee.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:s})=>(s.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function ag(n){return Zr(n,"remoteDocumentGlobal")}function df(n){return Zr(n,"remoteDocumentsV14")}function hf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ug(n,e){const t=e.documentKey.path.toArray();return[n,Iy(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function T0(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Pt(t[u],r[u]),s)return s;return s=Pt(t.length,r.length),s||(s=Pt(t[t.length-2],r[r.length-2]),s||Pt(t[t.length-1],r[r.length-1]))}class uD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Yb{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&ef(r.mutation,s,Bi.empty(),$n.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Gt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Gt()){const s=Ia();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let l=zp();return u.forEach((m,w)=>{l=l.insert(m,w.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Ia();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Gt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,s){let u=es();const l=qp(),m=qp();return t.forEach((w,b)=>{const S=r.get(b.key);s.has(b.key)&&(void 0===S||S.mutation instanceof Su)?u=u.insert(b.key,b):void 0!==S?(l.set(b.key,S.mutation.getFieldMask()),ef(S.mutation,b,S.mutation.getFieldMask(),$n.now())):l.set(b.key,Bi.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((b,S)=>l.set(b,S)),t.forEach((b,S)=>{var N;return m.set(b,new uD(S,null!==(N=l.get(b))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=qp();let s=new An((l,m)=>l-m),u=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(w=>{const b=t.get(w);if(null===b)return;let S=r.get(w)||Bi.empty();S=m.applyToLocalView(b,S),r.set(w,S);const N=(s.get(m.batchId)||Gt()).add(w);s=s.insert(m.batchId,N)})}).next(()=>{const l=[],m=s.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),b=w.key,S=w.value,N=V_();S.forEach(H=>{if(!u.has(H)){const K=NI(t.get(H),r.get(H));null!==K&&N.set(H,K),u=u.add(H)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,N))}return ee.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ze.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):O_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const l=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):ee.resolve(Ia());let m=-1,w=u;return l.next(b=>ee.forEach(b,(S,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(S)?ee.resolve():this.remoteDocumentCache.getEntry(e,S).next(H=>{w=w.insert(S,H)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,w,b,Gt())).next(S=>({batchId:m,changes:fy(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ze(t)).next(r=>{let s=zp();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=zp();return this.indexManager.getCollectionParents(e,s).next(l=>ee.forEach(l,m=>{const w=(b=t,S=m.child(s),new Cu(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(b=>{b.forEach((S,N)=>{u=u.insert(S,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(s=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s))).next(u=>{s.forEach((m,w)=>{const b=w.getKey();null===u.get(b)&&(u=u.insert(b,kn.newInvalidDocument(b)))});let l=zp();return u.forEach((m,w)=>{const b=s.get(m);void 0!==b&&ef(b.mutation,w,Bi.empty(),$n.now()),Jh(t,w)&&(l=l.insert(m,w))}),l})}}class S0{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ee.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:or(r.createTime)}),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:p0(r.bundledQuery),readTime:or(r.readTime)}),ee.resolve();var r}}class cD{constructor(){this.overlays=new An(Ze.comparator),this.ls=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ia();return ee.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.we(e,t,u)}),ee.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.ls.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const s=Ia(),u=t.length+1,l=new Ze(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const w=m.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&w.largestBatchId>r&&s.set(w.getKey(),w)}return ee.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new An((b,S)=>b-S);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=Ia(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const m=Ia(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,S)=>m.set(b,S)),!(m.size()>=s)););return ee.resolve(m)}we(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const l=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new W_(t,r));let u=this.ls.get(t);void 0===u&&(u=Gt(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class A0{constructor(){this.fs=new Mn(hi.ds),this.ws=new Mn(hi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new hi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new hi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Ze(new an([])),r=new hi(t,e),s=new hi(t,e+1),u=[];return this.ws.forEachInRange([r,s],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ze(new an([])),r=new hi(t,e),s=new hi(t,e+1);let u=Gt();return this.ws.forEachInRange([r,s],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new hi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class hi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ze.comparator(e.key,t.key)||Pt(e.As,t.As)}static _s(e,t){return Pt(e.As,t.As)||Ze.comparator(e.key,t.key)}}class IA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Mn(hi.ds)}checkEmpty(e){return ee.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.vs;this.vs++;const l=new vy(u,t,r,s);this.mutationQueue.push(l);for(const m of s)this.Rs=this.Rs.add(new hi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(l)}lookupMutationBatch(e,t){return ee.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.bs(t+1),u=s<0?0:s;return ee.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hi(t,0),s=new hi(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,s],l=>{const m=this.Ps(l.As);u.push(m)}),ee.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mn(Pt);return t.forEach(s=>{const u=new hi(s,0),l=new hi(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],m=>{r=r.add(m.As)})}),ee.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Ze.isDocumentKey(u)||(u=u.child(""));const l=new hi(new Ze(u),0);let m=new Mn(Pt);return this.Rs.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===s&&(m=m.add(w.As)),!0)},l),ee.resolve(this.Vs(m))}Vs(e){const t=[];return e.forEach(r=>{const s=this.Ps(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){pt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ee.forEach(t.mutations,s=>{const u=new hi(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new hi(t,0),s=this.Rs.firstAfterOrEqual(r);return ee.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return ee.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Qb{constructor(e){this.Ds=e,this.docs=new An(Ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():kn.newInvalidDocument(t))}getEntries(e,t){let r=es();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():kn.newInvalidDocument(s))}),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=es();const l=t.path,m=new Ze(l.child("")),w=this.docs.getIteratorFrom(m);for(;w.hasNext();){const{key:b,value:{document:S}}=w.getNext();if(!l.isPrefixOf(b.path))break;b.path.length>l.length+1||ry(g_(S),r)<=0||(s.has(S.key)||Jh(t,S))&&(u=u.insert(S.key,S.mutableCopy()))}return ee.resolve(u)}getAllFromCollectionGroup(e,t,r,s){it()}Cs(e,t){return ee.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Jb(this)}getSize(e){return ee.resolve(this.size)}}class Jb extends Zb{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),ee.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class My{constructor(e){this.persistence=e,this.xs=new Ea(t=>wa(t),Bp),this.lastRemoteSnapshotVersion=mt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new A0,this.targetCount=0,this.Ms=Yc.kn()}forEachTarget(e,t){return this.xs.forEach((r,s)=>t(s)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ee.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Yc(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.Fn(t),ee.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.xs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),ee.waitFor(u).next(()=>s)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(l=>{u.push(s.markPotentiallyOrphaned(e,l))}),ee.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.ks.containsKey(t))}}class M0{constructor(e,t){this.$s={},this.overlays={},this.Os=new ui(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new My(this),this.indexManager=new qb,this.remoteDocumentCache=new Qb(r=>this.referenceDelegate.Ls(r)),this.serializer=new l0(t),this.qs=new S0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new IA(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const s=new DA(this.Os.next());return this.referenceDelegate.Us(),r(s).next(u=>this.referenceDelegate.Ks(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Gs(e,t){return ee.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class DA extends m_{constructor(e){super(),this.currentSequenceNumber=e}}class x0{constructor(e){this.persistence=e,this.Qs=new A0,this.js=null}static zs(e){return new x0(e)}get Ws(){if(this.js)return this.js;throw it()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.Ws,r=>{const s=Ze.fromPath(r);return this.Hs(e,s).next(u=>{u||t.removeEntry(s,mt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ee.or([()=>ee.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Xb{constructor(e){this.serializer=e}O(e,t,r,s){const u=new iy("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KE,{unique:!0}),m.createObjectStore("documentMutations"),lD(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=ee.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),lD(e)),l=l.next(()=>function(m){const w=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",b)}(u))),r<4&&s>=4&&(0!==r&&(l=l.next(()=>function(m,w){return w.store("mutations").j().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KE,{unique:!0});const S=w.store("mutations"),N=b.map(H=>S.put(H));return ee.waitFor(N)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(l=l.next(()=>this.Ys(u))),r<6&&s>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&s>=7&&(l=l.next(()=>this.Zs(u))),r<8&&s>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&s>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(l=l.next(()=>this.ei(u))),r<11&&s>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(l=l.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:vb});w.createIndex("collectionPathOverlayIndex",_b,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",wb,{unique:!1})}(e)})),r<13&&s>=13&&(l=l.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:sy});w.createIndex("documentKeyIndex",YE),w.createIndex("collectionGroupIndex",QE)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(l=l.next(()=>this.si(e,u))),r<15&&s>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:nI}).createIndex("sequenceNumberIndex",rI,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:mb}).createIndex("documentKeyIndex",yb,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,s)=>{t+=sg(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(s=>ee.forEach(s,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(m=>ee.forEach(m,w=>{pt(w.userId===u.userId);const b=pd(this.serializer,w);return rD(e,u.userId,b).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.X((l,m)=>{const w=new an(l),b=[0,Mi(w)];u.push(t.get(b).next(S=>S?ee.resolve():t.put({targetId:0,path:Mi(w),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>ee.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:tI});const r=t.store("collectionParents"),s=new Ty,u=l=>{if(s.add(l)){const m=l.lastSegment(),w=l.popLast();return r.put({collectionId:m,parent:Mi(w)})}};return t.store("remoteDocuments").X({Y:!0},(l,m)=>{const w=new an(l);return u(w.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,m,w],b)=>{const S=ws(m);return u(S.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,s)=>{const u=rf(s),l=f0(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),s=[];return r.X((u,l)=>{const m=t.store("remoteDocumentsV14"),w=(b=l,b.document?new Ze(an.fromString(b.document.name).popFirst(5)):b.noDocument?Ze.fromSegments(b.noDocument.path):b.unknownDocument?Ze.fromSegments(b.unknownDocument.path):it()).path.toArray();var b;const S={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(m.put(S))}).next(()=>ee.waitFor(s))}si(e,t){const r=t.store("mutations"),s=Kb(this.serializer),u=new M0(x0.zs,this.serializer.fe);return r.j().next(l=>{const m=new Map;return l.forEach(w=>{var b;let S=null!==(b=m.get(w.userId))&&void 0!==b?b:Gt();pd(this.serializer,w).keys().forEach(N=>S=S.add(N)),m.set(w.userId,S)}),ee.forEach(m,(w,b)=>{const S=new Or(b),N=g0.de(this.serializer,S),H=u.getIndexManager(S),K=og.de(S,this.serializer,H,u.referenceDelegate);return new Yb(s,K,N,H).recalculateAndSaveOverlaysForDocumentKeys(new I_(t,ui.ct),w).next()})})}}function lD(n){n.createObjectStore("targetDocuments",{keyPath:XE}).createIndex("documentTargetsIndex",eI,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",JE,{unique:!0}),n.createObjectStore("targetGlobal")}const N0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class dD{constructor(e,t,r,s,u,l,m,w,b,S,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=m,this.ri=b,this.oi=S,this.ui=N,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=H=>Promise.resolve(),!dD.D())throw new Ie(oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _A(this,s),this.di=t+"main",this.serializer=new l0(w),this.wi=new Cr(this.di,this.ui,new Xb(this.serializer)),this.Bs=new oD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Kb(this.serializer),this.qs=new sf,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===S&&fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ie(oe.FAILED_PRECONDITION,N0);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new ui(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,ge.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(wu(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return cg(e).get("owner").next(t=>ee.resolve(this.Ri(t)))}Pi(e){return lg(e).delete(this.clientId)}bi(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Zr(r,"clientMetadata");return s.j().next(u=>{const l=e.Si(u,18e5),m=u.filter(w=>-1===l.indexOf(w));return ee.forEach(m,w=>s.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ee.resolve(!0):cg(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Ie(oe.FAILED_PRECONDITION,N0);return!1}}return!(!this.networkEnabled||!this.inForeground)||lg(e).j().next(r=>void 0===this.Si(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new I_(t,ui.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>lg(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return og.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mA(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return g0.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?Ib:14===l?oI:13===l?sI:12===l?Eb:11===l?iI:void it();var l;let m;return this.wi.runTransaction(e,s,u,w=>(m=new I_(w,this.Os?this.Os.next():ui.ct),"readwrite-primary"===t?this.Ti(m).next(b=>!!b||this.Ei(m)).next(b=>{if(!b)throw fr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Ie(oe.FAILED_PRECONDITION,pb);return r(m)}).next(b=>this.vi(m).next(()=>b)):this.Oi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Oi(e){return cg(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ie(oe.FAILED_PRECONDITION,N0)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cg(e).put("owner",t)}static D(){return Cr.D()}Ai(e){const t=cg(e);return t.get("owner").next(r=>this.Ri(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ee.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(fr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,pn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return fr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){fr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function cg(n){return Zr(n,"owner")}function lg(n){return Zr(n,"clientMetadata")}function xy(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class hD{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=s}static Li(e,t){let r=Gt(),s=Gt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new hD(e,t.fromCache,r,s)}}class Zs{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Ki(e,t).next(u=>u||this.Gi(e,t,s,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(Sb(t))return ee.resolve(null);let r=Fr(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=Hp(t,null,"F"),r=Fr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Gt(...u);return this.Ui.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const b=this.ji(t,m);return this.zi(t,b,l,w.readTime)?this.Ki(e,Hp(t,null,"F")):this.Wi(e,b,t,w)}))})))}Gi(e,t,r,s){return Sb(t)||s.isEqual(mt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,s)?this.Qi(e,t):(Xm()<=fa.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),L_(t)),this.Wi(e,l,t,GE(s,-1)))})}ji(e,t){let r=new Mn(hy(e));return t.forEach((s,u)=>{Jh(e,u)&&(r=r.add(u))}),r}zi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Qi(e,t){return Xm()<=fa.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",L_(t)),this.Ui.getDocumentsMatchingQuery(e,t,_s.min())}Wi(e,t,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class eT{constructor(e,t,r,s){this.persistence=e,this.Hi=t,this.serializer=s,this.Ji=new An(Pt),this.Yi=new Ea(u=>wa(u),Bp),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yb(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Ry(n,e,t,r){return new eT(n,e,t,r)}function fD(n,e){return pD.apply(this,arguments)}function pD(){return pD=(0,ge.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let w=Gt();for(const b of s){l.push(b.batchId);for(const S of b.mutations)w=w.add(S.key)}for(const b of u){m.push(b.batchId);for(const S of b.mutations)w=w.add(S.key)}return t.localDocuments.getDocuments(r,w).next(b=>({er:b,removedBatchIds:l,addedBatchIds:m}))})})}),pD.apply(this,arguments)}function gD(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function mD(n,e,t){let r=Gt(),s=Gt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=es();return t.forEach((m,w)=>{const b=u.get(m);w.isFoundDocument()!==b.isFoundDocument()&&(s=s.add(m)),w.isNoDocument()&&w.version.isEqual(mt.min())?(e.removeEntry(m,w.readTime),l=l.insert(m,w)):!b.isValidDocument()||w.version.compareTo(b.version)>0||0===w.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(w),l=l.insert(m,w)):Pe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",w.version)}),{nr:l,sr:s}})}function tT(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Jc(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Bs.getTargetData(r,e).next(u=>u?(s=u,ee.resolve(s)):t.Bs.allocateTargetId(r).next(l=>(s=new Mu(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ji.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function vd(n,e,t){return Ny.apply(this,arguments)}function Ny(){return Ny=(0,ge.Z)(function*(n,e,t){const r=Ye(n),s=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!wu(l))throw l;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}),Ny.apply(this,arguments)}function Py(n,e,t){const r=Ye(n);let s=mt.min(),u=Gt();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,w,b){const S=Ye(m),N=S.Yi.get(b);return void 0!==N?ee.resolve(S.Ji.get(N)):S.Bs.getTargetData(w,b)}(r,l,Fr(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,m.targetId).next(w=>{u=w})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?s:mt.min(),t?u:Gt())).next(m=>(yD(r,bI(e),m),{documents:m,ir:u})))}function O0(n,e){const t=Ye(n),r=Ye(t.Bs),s=t.Ji.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function k0(n,e){const t=Ye(n),r=t.Xi.get(e)||mt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Zi.getAllFromCollectionGroup(s,e,GE(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(yD(t,e,s),s))}function yD(n,e,t){let r=n.Xi.get(e)||mt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function F0(){return F0=(0,ge.Z)(function*(n,e,t,r){const s=Ye(n);let u=Gt(),l=es();for(const b of t){const S=e.rr(b.metadata.name);b.document&&(u=u.add(S));const N=e.ur(b);N.setReadTime(e.cr(b.metadata.readTime)),l=l.insert(S,N)}const m=s.Zi.newChangeBuffer({trackRemovals:!0}),w=yield Jc(s,(b=r,Fr(Qh(an.fromString(`__bundle__/docs/${b}`)))));var b;return s.persistence.runTransaction("Apply bundle documents","readwrite",b=>mD(b,m,l).next(S=>(m.apply(b),S)).next(S=>s.Bs.removeMatchingKeysForTargetId(b,w.targetId).next(()=>s.Bs.addMatchingKeys(b,u,w.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(b,S.nr,S.sr)).next(()=>S.nr)))}),F0.apply(this,arguments)}function L0(n,e){return Lo.apply(this,arguments)}function Lo(){return Lo=(0,ge.Z)(function*(n,e,t=Gt()){const r=yield Jc(n,Fr(p0(e.bundledQuery))),s=Ye(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const l=or(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return s.qs.saveNamedQuery(u,e);const m=r.withResumeToken(br.EMPTY_BYTE_STRING,l);return s.Ji=s.Ji.insert(m.targetId,m),s.Bs.updateTargetData(u,m).next(()=>s.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>s.qs.saveNamedQuery(u,e))})}),Lo.apply(this,arguments)}function Ru(n,e){return`firestore_clients_${n}_${e}`}function V0(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function dg(n,e){return`firestore_targets_${n}_${e}`}class hg{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static ar(e,t,r){const s=JSON.parse(r);let u,l="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new Ie(s.error.code,s.error.message))),l?new hg(e,t,s.state,u):(fr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fg{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Ie(r.error.code,r.error.message))),u?new fg(e,r.state,s):(fr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class U0{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=U_();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=WE(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return s?new U0(e,u):(fr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class B0{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new B0(t.clientId,t.onlineState):(fr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class j0{constructor(){this.activeTargetIds=U_()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $0{constructor(e,t,r,s,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new An(Pt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=Ru(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new j0),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.$i();for(const s of t){if(s===e.wr)continue;const u=e.getItem(Ru(e.persistenceKey,s));if(u){const l=U0.ar(s,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const s=e.br(r);s&&e.Vr(s)}for(const s of e.yr)e.mr(s);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(dg(this.persistenceKey,e));if(r){const s=fg.ar(e,r);s&&(t=s.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(dg(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Cr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const s=t.Or(r.key);return t.Fr(s,null)}{const s=t.Br(r.key,r.newValue);if(s)return t.Fr(s.clientId,s)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const s=t.Lr(r.key,r.newValue);if(s)return t.qr(s)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const s=t.Ur(r.key,r.newValue);if(s)return t.Kr(s)}}else if(r.key===t.vr){if(null!==r.newValue){const s=t.br(r.newValue);if(s)return t.Vr(s)}}else if(r.key===t.Ir){const s=function(u){let l=ui.ct;if(null!=u)try{const m=JSON.parse(u);pt("number"==typeof m),l=m}catch(m){fr("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);s!==ui.ct&&t.sequenceNumberHandler(s)}else if(r.key===t.Rr){const s=t.Gr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const s=new hg(this.currentUser,e,t,r),u=V0(this.persistenceKey,this.currentUser,e);this.setItem(u,s.hr())}Cr(e){const t=V0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const s=dg(this.persistenceKey,e),u=new fg(e,t,r);this.setItem(s,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return U0.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),s=Number(r[1]);return hg.ar(new Or(void 0!==r[2]?r[2]:null),s,t)}Ur(e,t){const r=this.Ar.exec(e),s=Number(r[1]);return fg.ar(s,t)}br(e){return B0.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),s=this.Sr(this.gr),u=this.Sr(r),l=[],m=[];return u.forEach(w=>{s.has(w)||l.push(w)}),s.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Wr(l,m).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=U_();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class _D{constructor(){this.Hr=new j0,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new j0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class wD{Yr(e){}shutdown(){}}class nT{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let pg=null;function H0(){return null===pg?pg=268435456+Math.round(2147483648*Math.random()):pg++,"0x"+pg.toString(16)}const ED={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class CA{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Kr="WebChannelConnection";class ID extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,s,u){const l=H0(),m=this.To(e,t);Pe("RestConnection",`Sending RPC '${e}' ${l}:`,m,r);const w={};return this.Eo(w,s,u),this.Ao(e,m,w,r).then(b=>(Pe("RestConnection",`Received RPC '${e}' ${l}: `,b),b),b=>{throw zs("RestConnection",`RPC '${e}' ${l} failed with error: `,b,"url: ",m,"request:",r),b})}vo(e,t,r,s,u,l){return this.Io(e,t,r,s,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Uh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}To(e,t){return`${this.mo}/v1/${t}:${ED[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,s){const u=H0();return new Promise((l,m)=>{const w=new l_;w.setWithCredentials(!0),w.listenOnce(db.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case Np.NO_ERROR:const S=w.getResponseJson();Pe(Kr,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(S)),l(S);break;case Np.TIMEOUT:Pe(Kr,`RPC '${e}' ${u} timed out`),m(new Ie(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Np.HTTP_ERROR:const N=w.getStatus();if(Pe(Kr,`RPC '${e}' ${u} failed with status:`,N,"response text:",w.getResponseText()),N>0){let H=w.getResponseJson();Array.isArray(H)&&(H=H[0]);const K=H?.error;if(K&&K.status&&K.message){const ye=function(Fe){const ke=Fe.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(ke)>=0?ke:oe.UNKNOWN}(K.status);m(new Ie(ye,K.message))}else m(new Ie(oe.UNKNOWN,"Server responded with status "+w.getStatus()))}else m(new Ie(oe.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Pe(Kr,`RPC '${e}' ${u} completed.`)}});const b=JSON.stringify(s);Pe(Kr,`RPC '${e}' ${u} sending request:`,s),w.send(t,"POST",b,r,15)})}Ro(e,t,r){const s=H0(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Zm(),m=Km(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;void 0!==b&&(w.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(w.xmlHttpFactory=new kE({})),this.Eo(w.initMessageHeaders,t,r),w.encodeInitMessageHeaders=!0;const S=u.join("");Pe(Kr,`Creating RPC '${e}' stream ${s}: ${S}`,w);const N=l.createWebChannel(S,w);let H=!1,K=!1;const ye=new CA({ro:ke=>{K?Pe(Kr,`Not sending because RPC '${e}' stream ${s} is closed:`,ke):(H||(Pe(Kr,`Opening RPC '${e}' stream ${s} transport.`),N.open(),H=!0),Pe(Kr,`RPC '${e}' stream ${s} sending:`,ke),N.send(ke))},oo:()=>N.close()}),Fe=(ke,It,Tt)=>{ke.listen(It,wt=>{try{Tt(wt)}catch(Ot){setTimeout(()=>{throw Ot},0)}})};return Fe(N,Qm.EventType.OPEN,()=>{K||Pe(Kr,`RPC '${e}' stream ${s} transport opened.`)}),Fe(N,Qm.EventType.CLOSE,()=>{K||(K=!0,Pe(Kr,`RPC '${e}' stream ${s} transport closed`),ye.wo())}),Fe(N,Qm.EventType.ERROR,ke=>{K||(K=!0,zs(Kr,`RPC '${e}' stream ${s} transport errored:`,ke),ye.wo(new Ie(oe.UNAVAILABLE,"The operation could not be completed")))}),Fe(N,Qm.EventType.MESSAGE,ke=>{var It;if(!K){const Tt=ke.data[0];pt(!!Tt);const Ot=Tt.error||(null===(It=Tt[0])||void 0===It?void 0:It.error);if(Ot){Pe(Kr,`RPC '${e}' stream ${s} received error:`,Ot);const Wt=Ot.status;let hn=function(Pg){const xR=pr[Pg];if(void 0!==xR)return OI(xR)}(Wt),ns=Ot.message;void 0===hn&&(hn=oe.INTERNAL,ns="Unknown error status: "+Wt+" with message "+Ot.message),K=!0,ye.wo(new Ie(hn,ns)),N.close()}else Pe(Kr,`RPC '${e}' stream ${s} received:`,Tt),ye._o(Tt)}}),Fe(m,c_.STAT_EVENT,ke=>{ke.stat===Ym.PROXY?Pe(Kr,`RPC '${e}' stream ${s} detected buffering proxy`):ke.stat===Ym.NOPROXY&&Pe(Kr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{ye.fo()},0),ye}}function G0(){return typeof window<"u"?window:null}function gg(){return typeof document<"u"?document:null}function ff(n){return new $I(n,!0)}class Oy{constructor(e,t,r=1e3,s=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=s,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,t-r);s>0&&Pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class mg{constructor(e,t,r,s,u,l,m,w){this.ii=e,this.$o=r,this.Oo=s,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Oy(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ge.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ge.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(fr(t.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===oe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===t&&this.Zo(r,s)},r=>{e(()=>{const s=new Ie(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){var e=this;this.state=5,this.qo.No((0,ge.Z)(function*(){e.state=0,e.start()}))}tu(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ky extends mg{constructor(e,t,r,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function Bb(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:it(),s=e.targetChange.targetIds||[],u=function(w,b){return w.useProto3Json?(pt(void 0===b||"string"==typeof b),br.fromBase64String(b||"")):(pt(void 0===b||b instanceof Uint8Array),br.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(w){const b=void 0===w.code?oe.UNKNOWN:OI(w.code);return new Ie(b,w.message||"")}(l);t=new LI(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=Da(n,r.document.name),u=or(r.document.updateTime),l=r.document.createTime?or(r.document.createTime):mt.min(),m=new li({mapValue:{fields:r.document.fields}}),w=kn.newFoundDocument(s,u,l,m);t=new _y(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,s=Da(n,r.document),u=r.readTime?or(r.readTime):mt.min(),l=kn.newNoDocument(s,u);t=new _y([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,s=Da(n,r.document);t=new _y([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return it();{const r=e.filter,{count:s=0,unchangedNames:u}=r,l=new Fb(s,u);t=new FI(r.targetId,l)}}var w;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return mt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?mt.min():u.readTime?or(u.readTime):mt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=ng(this.serializer),t.addTarget=function(s,u){let l;const m=u.target;if(l=dy(m)?{documents:qI(s,m)}:{query:Ey(s,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=HI(s,u.resumeToken);const w=n0(s,u.expectedCount);null!==w&&(l.expectedCount=w)}else if(u.snapshotVersion.compareTo(mt.min())>0){l.readTime=eg(s,u.snapshotVersion.toTimestamp());const w=n0(s,u.expectedCount);null!==w&&(l.expectedCount=w)}return l}(this.serializer,e);const r=function o0(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return it()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=ng(this.serializer),t.removeTarget=e,this.Wo(t)}}class DD extends mg{constructor(e,t,r,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function jb(n,e){return n&&n.length>0?(pt(void 0!==e),n.map(t=>function(r,s){let u=or(r.updateTime?r.updateTime:s);return u.isEqual(mt.min())&&(u=or(s)),new Ob(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=or(e.commitTime);return this.listener.cu(r,t)}return pt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=ng(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Hc(this.serializer,r))};this.Wo(t)}}class rT extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new Ie(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Io(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ie(oe.UNKNOWN,s.toString())})}vo(e,t,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ie(oe.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class bA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(fr(t),this.mu=!1):Pe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class TA{constructor(e,t,r,s,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(m=>{r.enqueueAndForget((0,ge.Z)(function*(){var w;Vo(l)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ge.Z)(function*(b){const S=Ye(b);S.vu.add(4),yield gf(S),S.bu.set("Unknown"),S.vu.delete(4),yield pf(S)}),function(b){return w.apply(this,arguments)})(l))}))}),this.bu=new bA(r,s)}}function pf(n){return z0.apply(this,arguments)}function z0(){return z0=(0,ge.Z)(function*(n){if(Vo(n))for(const e of n.Ru)yield e(!0)}),z0.apply(this,arguments)}function gf(n){return q0.apply(this,arguments)}function q0(){return q0=(0,ge.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),q0.apply(this,arguments)}function W0(n,e){const t=Ye(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Z0(t)?TD(t):wd(t).Ko()&&bD(t,e))}function Fy(n,e){const t=Ye(n),r=wd(t);t.Au.delete(e),r.Ko()&&sT(t,e),0===t.Au.size&&(r.Ko()?r.jo():Vo(t)&&t.bu.set("Unknown"))}function bD(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(mt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wd(n).su(e)}function sT(n,e){n.Vu.qt(e),wd(n).iu(e)}function TD(n){n.Vu=new Xp({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),wd(n).start(),n.bu.gu()}function Z0(n){return Vo(n)&&!wd(n).Uo()&&n.Au.size>0}function Vo(n){return 0===Ye(n).vu.size}function SD(n){n.Vu=void 0}function oT(n){return Ly.apply(this,arguments)}function Ly(){return Ly=(0,ge.Z)(function*(n){n.Au.forEach((e,t)=>{bD(n,e)})}),Ly.apply(this,arguments)}function _d(n,e){return Vy.apply(this,arguments)}function Vy(){return Vy=(0,ge.Z)(function*(n,e){SD(n),Z0(n)?(n.bu.Iu(e),TD(n)):n.bu.set("Unknown")}),Vy.apply(this,arguments)}function K0(n,e,t){return yg.apply(this,arguments)}function yg(){return yg=(0,ge.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof LI&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(s,u){const l=u.cause;for(const m of u.targetIds)s.Au.has(m)&&(yield s.remoteSyncer.rejectListen(m,l),s.Au.delete(m),s.Vu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Uy(n,r)}else if(e instanceof _y?n.Vu.Ht(e):e instanceof FI?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(mt.min()))try{const r=yield gD(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const l=s.Vu.ce(u);return l.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const b=s.Au.get(w);b&&s.Au.set(w,b.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach((m,w)=>{const b=s.Au.get(m);if(!b)return;s.Au.set(m,b.withResumeToken(br.EMPTY_BYTE_STRING,b.snapshotVersion)),sT(s,m);const S=new Mu(b.target,m,w,b.sequenceNumber);bD(s,S)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield Uy(n,r)}var r}),yg.apply(this,arguments)}function Uy(n,e,t){return vg.apply(this,arguments)}function vg(){return vg=(0,ge.Z)(function*(n,e,t){if(!wu(e))throw e;n.vu.add(1),yield gf(n),n.bu.set("Offline"),t||(t=()=>gD(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield pf(n)}))}),vg.apply(this,arguments)}function By(n,e){return e().catch(t=>Uy(n,t,e))}function Nu(n){return AD.apply(this,arguments)}function AD(){return AD=(0,ge.Z)(function*(n){const e=Ye(n),t=ba(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;SA(e);)try{const s=yield tT(e.localStore,r);if(null===s){0===e.Eu.length&&t.jo();break}r=s.batchId,AA(e,s)}catch(s){yield Uy(e,s)}aT(e)&&Y0(e)}),AD.apply(this,arguments)}function SA(n){return Vo(n)&&n.Eu.length<10}function AA(n,e){n.Eu.push(e);const t=ba(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function aT(n){return Vo(n)&&!ba(n).Uo()&&n.Eu.length>0}function Y0(n){ba(n).start()}function uT(n){return Q0.apply(this,arguments)}function Q0(){return Q0=(0,ge.Z)(function*(n){ba(n).hu()}),Q0.apply(this,arguments)}function cT(n){return J0.apply(this,arguments)}function J0(){return J0=(0,ge.Z)(function*(n){const e=ba(n);for(const t of n.Eu)e.uu(t.mutations)}),J0.apply(this,arguments)}function MD(n,e,t){return jy.apply(this,arguments)}function jy(){return jy=(0,ge.Z)(function*(n,e,t){const r=n.Eu.shift(),s=q_.from(r,e,t);yield By(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Nu(n)}),jy.apply(this,arguments)}function xD(n,e){return X0.apply(this,arguments)}function X0(){return X0=(0,ge.Z)(function*(n,e){var t;e&&ba(n).ou&&(yield(t=(0,ge.Z)(function*(r,s){if(Z_(u=s.code)&&u!==oe.ABORTED){const l=r.Eu.shift();ba(r).Qo(),yield By(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield Nu(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),aT(n)&&Y0(n)}),X0.apply(this,arguments)}function RD(n,e){return $y.apply(this,arguments)}function $y(){return $y=(0,ge.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=Vo(t);t.vu.add(3),yield gf(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield pf(t)}),$y.apply(this,arguments)}function _g(n,e){return ND.apply(this,arguments)}function ND(){return ND=(0,ge.Z)(function*(n,e){const t=Ye(n);e?(t.vu.delete(2),yield pf(t)):e||(t.vu.add(2),yield gf(t),t.bu.set("Unknown"))}),ND.apply(this,arguments)}function wd(n){return n.Su||(n.Su=function(e,t,r){const s=Ye(e);return s.fu(),new ky(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:oT.bind(null,n),ao:_d.bind(null,n),nu:K0.bind(null,n)}),n.Ru.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Su.Qo(),Z0(n)?TD(n):n.bu.set("Unknown")):(yield n.Su.stop(),SD(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function ba(n){return n.Du||(n.Du=function(e,t,r){const s=Ye(e);return s.fu(),new DD(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:uT.bind(null,n),ao:xD.bind(null,n),au:cT.bind(null,n),cu:MD.bind(null,n)}),n.Ru.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Du.Qo(),yield Nu(n)):(yield n.Du.stop(),n.Eu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class ew{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,s,u){const l=Date.now()+r,m=new ew(e,t,l,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ie(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mf(n,e){if(fr("AsyncQueue",`${e}: ${n}`),wu(n))return new Ie(oe.UNAVAILABLE,`${e}: ${n}`);throw n}class wg{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=zp(),this.sortedSet=new An(this.comparator)}static emptySet(e){return new wg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new wg;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class lT{constructor(){this.Cu=new An(Ze.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):it():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class yf{constructor(e,t,r,s,u,l,m,w,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,s,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new yf(e,t,wg.emptySet(t),l,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class dT{constructor(){this.Nu=void 0,this.listeners=[]}}class hT{constructor(){this.queries=new Ea(e=>F_(e),Gp),this.onlineState="Unknown",this.ku=new Set}}function PD(n,e){return OD.apply(this,arguments)}function OD(){return OD=(0,ge.Z)(function*(n,e){const t=Ye(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new dT),s)try{u.Nu=yield t.onListen(r)}catch(l){const m=mf(l,`Initialization of query '${L_(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&LD(t)}),OD.apply(this,arguments)}function kD(n,e){return FD.apply(this,arguments)}function FD(){return FD=(0,ge.Z)(function*(n,e){const t=Ye(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),FD.apply(this,arguments)}function fT(n,e){const t=Ye(n);let r=!1;for(const s of e){const l=t.queries.get(s.query);if(l){for(const m of l.listeners)m.$u(s)&&(r=!0);l.Nu=s}}r&&LD(t)}function MA(n,e,t){const r=Ye(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function LD(n){n.ku.forEach(e=>{e.next()})}class VD{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new yf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=yf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class xA{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class pT{constructor(e){this.serializer=e}rr(e){return Da(this.serializer,e)}ur(e){return e.metadata.exists?zI(this.serializer,e.document,!1):kn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return or(e)}}class RA{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=i(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=an.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new pT(this.serializer);for(const s of e)if(s.metadata.queries){const u=r.rr(s.metadata.name);for(const l of s.metadata.queries){const m=(t.get(l)||Gt()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function vD(n,e,t,r){return F0.apply(this,arguments)}(e.localStore,new pT(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const s of e.queries)yield L0(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function i(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class o{constructor(e){this.key=e}}class a{constructor(e){this.key=e}}class c{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Gt(),this.mutatedKeys=Gt(),this.tc=hy(e),this.ec=new wg(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new lT,s=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=s,m=!1;const w="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,b="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((S,N)=>{const H=s.get(S),K=Jh(this.query,N)?N:null,ye=!!H&&this.mutatedKeys.has(H.key),Fe=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let ke=!1;H&&K?H.data.isEqual(K.data)?ye!==Fe&&(r.track({type:3,doc:K}),ke=!0):this.rc(H,K)||(r.track({type:2,doc:K}),ke=!0,(w&&this.tc(K,w)>0||b&&this.tc(K,b)<0)&&(m=!0)):!H&&K?(r.track({type:0,doc:K}),ke=!0):H&&!K&&(r.track({type:1,doc:H}),ke=!0,(w||b)&&(m=!0)),ke&&(K?(l=l.add(K),u=Fe?u.add(S):u.delete(S)):(l=l.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const S="F"===this.query.limitType?l.last():l.first();l=l.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{ec:l,ic:r,zi:m,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((b,S)=>function(N,H){const K=ye=>{switch(ye){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return K(N)-K(H)}(b.type,S.type)||this.tc(b.doc,S.doc)),this.oc(r);const l=t?this.uc():[],m=0===this.Zu.size&&this.current?1:0,w=m!==this.Xu;return this.Xu=m,0!==u.length||w?{snapshot:new yf(this.query,e.ec,s,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new lT,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Gt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new a(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new o(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Gt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return yf.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class d{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class g{constructor(e){this.key=e,this.fc=!1}}class v{constructor(e,t,r,s,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new Ea(m=>F_(m),Gp),this._c=new Map,this.mc=new Set,this.gc=new An(Ze.comparator),this.yc=new Map,this.Ic=new A0,this.Tc={},this.Ec=new Map,this.Ac=Yc.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function I(n,e){return C.apply(this,arguments)}function C(){return C=(0,ge.Z)(function*(n,e){const t=MT(n);let r,s;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.lc();else{const l=yield Jc(t.localStore,Fr(e)),m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=yield A(t,e,r,"current"===m,l.resumeToken),t.isPrimaryClient&&W0(t.remoteStore,l)}return s}),C.apply(this,arguments)}function A(n,e,t,r,s){return R.apply(this,arguments)}function R(){return R=(0,ge.Z)(function*(n,e,t,r,s){n.Rc=(N,H,K)=>{return(ye=(0,ge.Z)(function*(Fe,ke,It,Tt){let wt=ke.view.sc(It);wt.zi&&(wt=yield Py(Fe.localStore,ke.query,!1).then(({documents:hn})=>ke.view.sc(hn,wt)));const Ot=Tt&&Tt.targetChanges.get(ke.targetId),Wt=ke.view.applyChanges(wt,Fe.isPrimaryClient,Ot);return vT(Fe,ke.targetId,Wt.cc),Wt.snapshot}),function(Fe,ke,It,Tt){return ye.apply(this,arguments)})(n,N,H,K);var ye};const u=yield Py(n.localStore,e,!0),l=new c(e,u.ir),m=l.sc(u.documents),w=Jp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),b=l.applyChanges(m,n.isPrimaryClient,w);vT(n,t,b.cc);const S=new d(e,t,l);return n.wc.set(e,S),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),b.snapshot}),R.apply(this,arguments)}function F(n,e){return G.apply(this,arguments)}function G(){return G=(0,ge.Z)(function*(n,e){const t=Ye(n),r=t.wc.get(e),s=t._c.get(r.targetId);if(s.length>1)return t._c.set(r.targetId,s.filter(u=>!Gp(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield vd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Fy(t.remoteStore,r.targetId),Hy(t,r.targetId)}).catch(ma))):(Hy(t,r.targetId),yield vd(t.localStore,r.targetId,!0))}),G.apply(this,arguments)}function me(){return me=(0,ge.Z)(function*(n,e,t){const r=xT(n);try{const s=yield function(u,l){const m=Ye(u),w=$n.now(),b=l.reduce((H,K)=>H.add(K.key),Gt());let S,N;return m.persistence.runTransaction("Locally write mutations","readwrite",H=>{let K=es(),ye=Gt();return m.Zi.getEntries(H,b).next(Fe=>{K=Fe,K.forEach((ke,It)=>{It.isValidDocument()||(ye=ye.add(ke))})}).next(()=>m.localDocuments.getOverlayedDocuments(H,K)).next(Fe=>{S=Fe;const ke=[];for(const It of l){const Tt=H_(It,S.get(It.key).overlayedDocument);null!=Tt&&ke.push(new Su(It.key,Tt,gI(Tt.value.mapValue),Fn.exists(!0)))}return m.mutationQueue.addMutationBatch(H,w,ke,l)}).next(Fe=>{N=Fe;const ke=Fe.applyToLocalDocumentSet(S,ye);return m.documentOverlayCache.saveOverlays(H,Fe.batchId,ke)})}).then(()=>({batchId:N.batchId,changes:fy(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,l,m){let w=u.Tc[u.currentUser.toKey()];w||(w=new An(Pt)),w=w.insert(l,m),u.Tc[u.currentUser.toKey()]=w}(r,s.batchId,t),yield Ed(r,s.changes),yield Nu(r.remoteStore)}catch(s){const u=mf(s,"Failed to persist write");t.reject(u)}}),me.apply(this,arguments)}function Le(n,e){return Ke.apply(this,arguments)}function Ke(){return Ke=(0,ge.Z)(function*(n,e){const t=Ye(n);try{const r=yield function P0(n,e){const t=Ye(n),r=e.snapshotVersion;let s=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});s=t.Ji;const m=[];e.targetChanges.forEach((S,N)=>{const H=s.get(N);if(!H)return;m.push(t.Bs.removeMatchingKeys(u,S.removedDocuments,N).next(()=>t.Bs.addMatchingKeys(u,S.addedDocuments,N)));let K=H.withSequenceNumber(u.currentSequenceNumber);var ye,Fe,ke;null!==e.targetMismatches.get(N)?K=K.withResumeToken(br.EMPTY_BYTE_STRING,mt.min()).withLastLimboFreeSnapshotVersion(mt.min()):S.resumeToken.approximateByteSize()>0&&(K=K.withResumeToken(S.resumeToken,r)),s=s.insert(N,K),Fe=K,ke=S,(0===(ye=H).resumeToken.approximateByteSize()||Fe.snapshotVersion.toMicroseconds()-ye.snapshotVersion.toMicroseconds()>=3e8||ke.addedDocuments.size+ke.modifiedDocuments.size+ke.removedDocuments.size>0)&&m.push(t.Bs.updateTargetData(u,K))});let w=es(),b=Gt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),m.push(mD(u,l,e.documentUpdates).next(S=>{w=S.nr,b=S.sr})),!r.isEqual(mt.min())){const S=t.Bs.getLastRemoteSnapshotVersion(u).next(N=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(S)}return ee.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,b)).next(()=>w)}).then(u=>(t.Ji=s,u))}(t.localStore,e);e.targetChanges.forEach((s,u)=>{const l=t.yc.get(u);l&&(pt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.fc=!0:s.modifiedDocuments.size>0?pt(l.fc):s.removedDocuments.size>0&&(pt(l.fc),l.fc=!1))}),yield Ed(t,r,e)}catch(r){yield ma(r)}}),Ke.apply(this,arguments)}function ut(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.wc.forEach((u,l)=>{const m=l.view.Mu(e);m.snapshot&&s.push(m.snapshot)}),function(u,l){const m=Ye(u);m.onlineState=l;let w=!1;m.queries.forEach((b,S)=>{for(const N of S.listeners)N.Mu(l)&&(w=!0)}),w&&LD(m)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function St(n,e,t){return Se.apply(this,arguments)}function Se(){return Se=(0,ge.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.yc.get(e),u=s&&s.key;if(u){let l=new An(Ze.comparator);l=l.insert(u,kn.newNoDocument(u,mt.min()));const m=Gt().add(u),w=new Qp(mt.min(),new Map,new An(Pt),l,m);yield Le(r,w),r.gc=r.gc.remove(u),r.yc.delete(e),_T(r)}else yield vd(r.localStore,e,!1).then(()=>Hy(r,e,t)).catch(ma)}),Se.apply(this,arguments)}function Bt(n,e){return xn.apply(this,arguments)}function xn(){return xn=(0,ge.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const s=yield function Ks(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,m,w,b){const S=w.batch,N=S.keys();let H=ee.resolve();return N.forEach(K=>{H=H.next(()=>b.getEntry(m,K)).next(ye=>{const Fe=w.docVersions.get(K);pt(null!==Fe),ye.version.compareTo(Fe)<0&&(S.applyToRemoteDocument(ye,w),ye.isValidDocument()&&(ye.setReadTime(w.commitVersion),b.addEntry(ye)))})}),H.next(()=>l.mutationQueue.removeMutationBatch(m,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=Gt();for(let w=0;w<l.mutationResults.length;++w)l.mutationResults[w].transformResults.length>0&&(m=m.add(l.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);yT(t,r,null),mT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ed(t,s)}catch(s){yield ma(s)}}),xn.apply(this,arguments)}function gr(n,e,t){return UD.apply(this,arguments)}function UD(){return UD=(0,ge.Z)(function*(n,e,t){const r=Ye(n);try{const s=yield function(u,l){const m=Ye(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return m.mutationQueue.lookupMutationBatch(w,l).next(S=>(pt(null!==S),b=S.keys(),m.mutationQueue.removeMutationBatch(w,S))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,b,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,b)).next(()=>m.localDocuments.getDocuments(w,b))})}(r.localStore,e);yT(r,e,t),mT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ed(r,s)}catch(s){yield ma(s)}}),UD.apply(this,arguments)}function gT(){return gT=(0,ge.Z)(function*(n,e){const t=Ye(n);Vo(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Ye(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.Ec.get(r)||[];s.push(e),t.Ec.set(r,s)}catch(r){const s=mf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),gT.apply(this,arguments)}function mT(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function yT(n,e,t){const r=Ye(n);let s=r.Tc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function Hy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||NA(n,r)})}function NA(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Fy(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),_T(n))}function vT(n,e,t){for(const r of t)r instanceof o?(n.Ic.addReference(r.key,e),PR(n,r)):r instanceof a?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||NA(n,r.key)):it()}function PR(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.mc.add(r),_T(n))}function _T(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ze(an.fromString(e)),r=n.Ac.next();n.yc.set(r,new g(t)),n.gc=n.gc.insert(t,r),W0(n.remoteStore,new Mu(Fr(Qh(t.path)),r,"TargetPurposeLimboResolution",ui.ct))}}function Ed(n,e,t){return wT.apply(this,arguments)}function wT(){return wT=(0,ge.Z)(function*(n,e,t){const r=Ye(n),s=[],u=[],l=[];var m;r.wc.isEmpty()||(r.wc.forEach((m,w)=>{l.push(r.Rc(w,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,b?.fromCache?"not-current":"current"),b){s.push(b);const S=hD.Li(w.targetId,b);u.push(S)}}))}),yield Promise.all(l),r.dc.nu(s),yield(m=(0,ge.Z)(function*(w,b){const S=Ye(w);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ee.forEach(b,H=>ee.forEach(H.Fi,K=>S.persistence.referenceDelegate.addReference(N,H.targetId,K)).next(()=>ee.forEach(H.Bi,K=>S.persistence.referenceDelegate.removeReference(N,H.targetId,K)))))}catch(N){if(!wu(N))throw N;Pe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of b){const H=N.targetId;if(!N.fromCache){const K=S.Ji.get(H),Fe=K.withLastLimboFreeSnapshotVersion(K.snapshotVersion);S.Ji=S.Ji.insert(H,Fe)}}}),function(w,b){return m.apply(this,arguments)})(r.localStore,u))}),wT.apply(this,arguments)}function OR(n,e){return ET.apply(this,arguments)}function ET(){return ET=(0,ge.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield fD(t.localStore,e);t.currentUser=e,(s=t).Ec.forEach(l=>{l.forEach(m=>{m.reject(new Ie(oe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ed(t,r.er)}var s}),ET.apply(this,arguments)}function kR(n,e){const t=Ye(n),r=t.yc.get(e);if(r&&r.fc)return Gt().add(r.key);{let s=Gt();const u=t._c.get(e);if(!u)return s;for(const l of u){const m=t.wc.get(l);s=s.unionWith(m.view.nc)}return s}}function FR(n,e){return IT.apply(this,arguments)}function IT(){return IT=(0,ge.Z)(function*(n,e){const t=Ye(n),r=yield Py(t.localStore,e.query,!0),s=e.view.hc(r);return t.isPrimaryClient&&vT(t,e.targetId,s.cc),s}),IT.apply(this,arguments)}function LR(n,e){return DT.apply(this,arguments)}function DT(){return DT=(0,ge.Z)(function*(n,e){const t=Ye(n);return k0(t.localStore,e).then(r=>Ed(t,r))}),DT.apply(this,arguments)}function VR(n,e,t,r){return CT.apply(this,arguments)}function CT(){return CT=(0,ge.Z)(function*(n,e,t,r){const s=Ye(n),u=yield function(l,m){const w=Ye(l),b=Ye(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.Sn(S,m).next(N=>N?w.localDocuments.getDocuments(S,N):ee.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield Nu(s.remoteStore):"acknowledged"===t||"rejected"===t?(yT(s,e,r||null),mT(s,e),m=e,Ye(Ye(s.localStore).mutationQueue).Cn(m)):it(),yield Ed(s,u)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),CT.apply(this,arguments)}function bT(){return bT=(0,ge.Z)(function*(n,e){const t=Ye(n);if(MT(t),xT(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield PA(t,r.toArray());t.vc=!0,yield _g(t.remoteStore,!0);for(const u of s)W0(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let s=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then(()=>(Hy(t,l),vd(t.localStore,l,!0))),Fy(t.remoteStore,l)}),yield s,yield PA(t,r),function(u){const l=Ye(u);l.yc.forEach((m,w)=>{Fy(l.remoteStore,w)}),l.Ic.Ts(),l.yc=new Map,l.gc=new An(Ze.comparator)}(t),t.vc=!1,yield _g(t.remoteStore,!1)}}),bT.apply(this,arguments)}function PA(n,e,t){return TT.apply(this,arguments)}function TT(){return TT=(0,ge.Z)(function*(n,e,t){const r=Ye(n),s=[],u=[];for(const l of e){let m;const w=r._c.get(l);if(w&&0!==w.length){m=yield Jc(r.localStore,Fr(w[0]));for(const b of w){const S=r.wc.get(b),N=yield FR(r,S);N.snapshot&&u.push(N.snapshot)}}else{const b=yield O0(r.localStore,l);m=yield Jc(r.localStore,b),yield A(r,OA(b),l,!1,m.resumeToken)}s.push(m)}return r.dc.nu(u),s}),TT.apply(this,arguments)}function OA(n){return CI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function BR(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).$i()}function jR(n,e,t,r){return ST.apply(this,arguments)}function ST(){return ST=(0,ge.Z)(function*(n,e,t,r){const s=Ye(n);if(s.vc)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const u=s._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield k0(s.localStore,bI(u[0])),m=Qp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,br.EMPTY_BYTE_STRING);yield Ed(s,l,m);break}case"rejected":yield vd(s.localStore,e,!0),Hy(s,e,r);break;default:it()}}),ST.apply(this,arguments)}function $R(n,e,t){return AT.apply(this,arguments)}function AT(){return AT=(0,ge.Z)(function*(n,e,t){const r=MT(n);if(r.vc){for(const s of e){if(r._c.has(s)){Pe("SyncEngine","Adding an already active target "+s);continue}const u=yield O0(r.localStore,s),l=yield Jc(r.localStore,u);yield A(r,OA(u),l.targetId,!1,l.resumeToken),W0(r.remoteStore,l)}for(const s of t)r._c.has(s)&&(yield vd(r.localStore,s,!1).then(()=>{Fy(r.remoteStore,s),Hy(r,s)}).catch(ma))}}),AT.apply(this,arguments)}function MT(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Le.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=St.bind(null,e),e.dc.nu=fT.bind(null,e.eventManager),e.dc.Pc=MA.bind(null,e.eventManager),e}function xT(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Bt.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gr.bind(null,e),e}class tw{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.serializer=ff(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Ry(this.persistence,new Zs,e.initialUser,this.serializer)}createPersistence(e){return new M0(x0.zs,this.serializer)}createSharedClientState(e){return new _D}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class RT extends tw{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield xT(r.Vc.syncEngine),yield Nu(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Ry(this.persistence,new Zs,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new C0(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new v_(t,this.persistence);return new gb(e.asyncQueue,r)}createPersistence(e){const t=xy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?di.withCacheSize(this.cacheSizeBytes):di.DEFAULT;return new dD(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,G0(),gg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new _D}}class kA extends RT{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const s=r.Vc.syncEngine;r.sharedClientState instanceof $0&&(r.sharedClientState.syncEngine={jr:VR.bind(null,s),zr:jR.bind(null,s),Wr:$R.bind(null,s),$i:BR.bind(null,s),Qr:LR.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,ge.Z)(function*(l){yield function UR(n,e){return bT.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=G0();if(!$0.D(t))throw new Ie(oe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=xy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $0(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Gy{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>ut(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=OR.bind(null,r.syncEngine),yield _g(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new hT}createDatastore(e){const t=ff(e.databaseInfo.databaseId),r=new ID(e.databaseInfo);return new rT(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>ut(this.syncEngine,m,0),l=nT.D()?new nT:new wD,new TA(t,r,s,u,l);var t,r,s,u,l}createSyncEngine(e,t){return function(r,s,u,l,m,w,b){const S=new v(r,s,u,l,m,w);return b&&(S.vc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=Ye(t);Pe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield gf(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function FA(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class BD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):fr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class zR{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Dr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),s=Number(r);isNaN(s)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(s);return new xA(JSON.parse(u),t.length+s)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ge.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class qR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ie(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,ge.Z)(function*(u,l){const m=Ye(u),w=ng(m.serializer)+"/documents",b={documents:l.map(K=>Au(m.serializer,K))},S=yield m.vo("BatchGetDocuments",w,b,l.length),N=new Map;S.forEach(K=>{const ye=function Ub(n,e){return"found"in e?function(t,r){pt(!!r.found);const s=Da(t,r.found.name),u=or(r.found.updateTime),l=r.found.createTime?or(r.found.createTime):mt.min(),m=new li({mapValue:{fields:r.found.fields}});return kn.newFoundDocument(s,u,l,m)}(n,e):"missing"in e?function(t,r){pt(!!r.missing),pt(!!r.readTime);const s=Da(t,r.missing),u=or(r.readTime);return kn.newNoDocument(s,u)}(n,e):it()}(m.serializer,K);N.set(ye.key.toString(),ye)});const H=[];return l.forEach(K=>{const ye=N.get(K.toString());pt(!!ye),H.push(ye)}),H}),function(u,l){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new fd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Ze.fromPath(s);e.mutations.push(new yy(u,e.precondition(u)))}),yield(r=(0,ge.Z)(function*(s,u){const l=Ye(s),m=ng(l.serializer)+"/documents",w={writes:u.map(b=>Hc(l.serializer,b))};yield l.Io("Commit",m,w)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ie(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(mt.min())?Fn.exists(!1):Fn.updateTime(t):Fn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mt.min()))throw new Ie(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fn.updateTime(t)}return Fn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class WR{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new Oy(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ge.Z)(function*(){const t=new qR(e.datastore),r=e.qc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Uc(u)}))}).catch(s=>{e.Uc(s)})}))}qc(e){try{const t=this.updateFunction(e);return!Fp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Z_(t)}return!1}}class ZR{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Or.UNAUTHENTICATED,this.clientId=$E.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ge.Z)(function*(m){Pe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Pe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ie(oe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=mf(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function jD(n,e){return NT.apply(this,arguments)}function NT(){return NT=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,ge.Z)(function*(u){r.isEqual(u)||(yield fD(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),NT.apply(this,arguments)}function PT(n,e){return OT.apply(this,arguments)}function OT(){return OT=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield kT(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>RD(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>RD(e.remoteStore,u)),n._onlineComponents=e}),OT.apply(this,arguments)}function LA(n){return"FirebaseError"===n.name?n.code===oe.FAILED_PRECONDITION||n.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function kT(n){return FT.apply(this,arguments)}function FT(){return FT=(0,ge.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Pe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield jD(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!LA(t))throw t;zs("Error using user provided cache. Falling back to memory cache: "+t),yield jD(n,new tw)}}else Pe("FirestoreClient","Using default OfflineComponentProvider"),yield jD(n,new tw);return n._offlineComponents}),FT.apply(this,arguments)}function $D(n){return LT.apply(this,arguments)}function LT(){return LT=(0,ge.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Pe("FirestoreClient","Using user provided OnlineComponentProvider"),yield PT(n,n._uninitializedComponentsProvider._online)):(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield PT(n,new Gy))),n._onlineComponents}),LT.apply(this,arguments)}function VA(n){return kT(n).then(e=>e.persistence)}function HD(n){return kT(n).then(e=>e.localStore)}function UA(n){return $D(n).then(e=>e.remoteStore)}function VT(n){return $D(n).then(e=>e.syncEngine)}function zy(n){return UT.apply(this,arguments)}function UT(){return UT=(0,ge.Z)(function*(n){const e=yield $D(n),t=e.eventManager;return t.onListen=I.bind(null,e.syncEngine),t.onUnlisten=F.bind(null,e.syncEngine),t}),UT.apply(this,arguments)}function jA(n,e,t={}){const r=new Dr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(s,u,l,m,w){const b=new BD({next:N=>{u.enqueueAndForget(()=>kD(s,S));const H=N.docs.has(l);!H&&N.fromCache?w.reject(new Ie(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&N.fromCache&&m&&"server"===m.source?w.reject(new Ie(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),S=new VD(Qh(l.path),b,{includeMetadataChanges:!0,Ku:!0});return PD(s,S)}(yield zy(n),n.asyncQueue,e,t,r)})),r.promise}function $A(n,e,t={}){const r=new Dr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(s,u,l,m,w){const b=new BD({next:N=>{u.enqueueAndForget(()=>kD(s,S)),N.fromCache&&"server"===m.source?w.reject(new Ie(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),S=new VD(l,b,{includeMetadataChanges:!0,Ku:!0});return PD(s,S)}(yield zy(n),n.asyncQueue,e,t,r)})),r.promise}function HA(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const GA=new Map;function BT(n,e,t){if(!t)throw new Ie(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function zA(n,e,t,r){if(!0===e&&!0===r)throw new Ie(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qA(n){if(!Ze.isDocumentKey(n))throw new Ie(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function WA(n){if(Ze.isDocumentKey(n))throw new Ie(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function GD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ie(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=GD(n);throw new Ie(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ZA(n,e){if(e<=0)throw new Ie(oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class KA{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ie(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ie(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=HA(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Ie(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ie(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ie(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nw{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KA({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ie(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ie(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KA(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new UE;switch(t.type){case"firstParty":return new hb(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ie(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=GA.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),GA.delete(e),t.terminate())}(this),Promise.resolve()}}class Jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jn(this.firestore,e,this._key)}}class ji{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ji(this.firestore,e,this._query)}}class Xc extends ji{constructor(e,t,r){super(e,t,Qh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jn(this.firestore,null,new Ze(e))}withConverter(e){return new Xc(this.firestore,e,this._path)}}function QA(n,e,...t){if(n=(0,pn.m9)(n),BT("collection","path",e),n instanceof nw){const r=an.fromString(e,...t);return WA(r),new Xc(n,null,r)}{if(!(n instanceof Jn||n instanceof Xc))throw new Ie(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return WA(r),new Xc(n.firestore,null,r)}}function zD(n,e,...t){if(n=(0,pn.m9)(n),1===arguments.length&&(e=$E.A()),BT("doc","path",e),n instanceof nw){const r=an.fromString(e,...t);return qA(r),new Jn(n,null,new Ze(r))}{if(!(n instanceof Jn||n instanceof Xc))throw new Ie(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return qA(r),new Jn(n.firestore,n instanceof Xc?n.converter:null,new Ze(r))}}function JA(n,e){return n=(0,pn.m9)(n),e=(0,pn.m9)(e),(n instanceof Jn||n instanceof Xc)&&(e instanceof Jn||e instanceof Xc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function jT(n,e){return n=(0,pn.m9)(n),e=(0,pn.m9)(e),n instanceof ji&&e instanceof ji&&n.firestore===e.firestore&&Gp(n._query,e._query)&&n.converter===e.converter}class i1{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Oy(this,"async_queue_retry"),this.Xc=()=>{const t=gg();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=gg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=gg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Dr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ge.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!wu(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,fr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const s=ew.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(s),s}Zc(){this.Wc&&it()}verifyOperationInProgress(){}sa(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function $T(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class s1{constructor(){this._progressObserver={},this._taskCompletionResolver=new Dr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Xn extends nw{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new i1,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||XA(this),this._firestoreClient.terminate()}}function Lr(n){return n._firestoreClient||XA(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function XA(n){var e,t,r;const s=n._freezeSettings(),u=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Gh(n._databaseId,m,n._persistenceKey,(b=s).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,HA(b.experimentalLongPollingOptions),b.useFetchStreams));var m,b;n._firestoreClient=new ZR(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=s.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function eM(n,e,t){const r=new Dr;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield jD(n,t),yield PT(n,e),r.resolve()}catch(s){const u=s;if(!LA(u))throw u;zs("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function tM(n){if(n._initialized||n._terminated)throw new Ie(oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class el{constructor(e){this._byteString=e}static fromBase64String(e){try{return new el(br.fromBase64String(e))}catch(t){throw new Ie(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new el(br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Id{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ie(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Eg{constructor(e){this._methodName=e}}class qD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ie(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ie(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pt(this._lat,e._lat)||Pt(this._long,e._long)}}const m1=/^__.*__$/;class y1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Su(e,this.data,this.fieldMask,t,this.fieldTransforms):new $c(e,this.data,t,this.fieldTransforms)}}class nM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Su(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function rM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class WD{constructor(e,t,r,s,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new WD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return YD(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(rM(this.ca)&&m1.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class v1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ff(e)}ya(e,t,r,s=!1){return new WD({ca:e,methodName:t,ga:r,path:Kn.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ig(n){const e=n._freezeSettings(),t=ff(n._databaseId);return new v1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ZD(n,e,t,r,s,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,s);qT("Data must be an object, but it was:",l,r);const m=oM(r,l);let w,b;if(u.merge)w=new Bi(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const S=[];for(const N of u.mergeFields){const H=sw(e,N,t);if(!l.contains(H))throw new Ie(oe.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);uM(S,H)||S.push(H)}w=new Bi(S),b=l.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,b=l.fieldTransforms;return new y1(new li(m),w,b)}class iw extends Eg{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof iw}}function iM(n,e,t){return new WD({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class HT extends Eg{_toFieldTransform(e){return new Zp(e.path,new Xh)}isEqual(e){return e instanceof HT}}class _1 extends Eg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=iM(this,e,!0),r=this.pa.map(u=>Dg(u,t)),s=new dd(r);return new Zp(e.path,s)}isEqual(e){return this===e}}class w1 extends Eg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=iM(this,e,!0),r=this.pa.map(u=>Dg(u,t)),s=new bu(r);return new Zp(e.path,s)}isEqual(e){return this===e}}class E1 extends Eg{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new hd(e.serializer,B_(e.serializer,this.Ia));return new Zp(e.path,t)}isEqual(e){return this===e}}function GT(n,e,t,r){const s=n.ya(1,e,t);qT("Data must be an object, but it was:",s,r);const u=[],l=li.empty();Bc(r,(w,b)=>{const S=KD(e,w,t);b=(0,pn.m9)(b);const N=s.da(S);if(b instanceof iw)u.push(S);else{const H=Dg(b,N);null!=H&&(u.push(S),l.set(S,H))}});const m=new Bi(u);return new nM(l,m,s.fieldTransforms)}function zT(n,e,t,r,s,u){const l=n.ya(1,e,t),m=[sw(e,r,t)],w=[s];if(u.length%2!=0)throw new Ie(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<u.length;H+=2)m.push(sw(e,u[H])),w.push(u[H+1]);const b=[],S=li.empty();for(let H=m.length-1;H>=0;--H)if(!uM(b,m[H])){const K=m[H];let ye=w[H];ye=(0,pn.m9)(ye);const Fe=l.da(K);if(ye instanceof iw)b.push(K);else{const ke=Dg(ye,Fe);null!=ke&&(b.push(K),S.set(K,ke))}}const N=new Bi(b);return new nM(S,N,l.fieldTransforms)}function sM(n,e,t,r=!1){return Dg(t,n.ya(r?4:3,e))}function Dg(n,e){if(aM(n=(0,pn.m9)(n)))return qT("Unsupported field value:",e,n),oM(n,e);if(n instanceof Eg)return function(t,r){if(!rM(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const l of t){let m=Dg(l,r.wa(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,pn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return B_(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=$n.fromDate(t);return{timestampValue:eg(r.serializer,s)}}if(t instanceof $n){const s=new $n(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:eg(r.serializer,s)}}if(t instanceof qD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof el)return{bytesValue:HI(r.serializer,t._byteString)};if(t instanceof Jn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:r0(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${GD(t)}`)}(n,e)}function oM(n,e){const t={};return uI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bc(n,(r,s)=>{const u=Dg(s,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function aM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof $n||n instanceof qD||n instanceof el||n instanceof Jn||n instanceof Eg)}function qT(n,e,t){if(!aM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=GD(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function sw(n,e,t){if((e=(0,pn.m9)(e))instanceof Id)return e._internalPath;if("string"==typeof e)return KD(n,e);throw YD("Field path arguments must be of type string or ",n,!1,void 0,t)}const I1=new RegExp("[~\\*/\\[\\]]");function KD(n,e,t){if(e.search(I1)>=0)throw YD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Id(...e.split("."))._internalPath}catch{throw YD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function YD(n,e,t,r,s){const u=r&&!r.isEmpty(),l=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||l)&&(w+=" (found",u&&(w+=` in field ${r}`),l&&(w+=` in document ${s}`),w+=")"),new Ie(oe.INVALID_ARGUMENT,m+n+w)}function uM(n,e){return n.some(t=>t.isEqual(e))}class ow{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new D1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(QD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class D1 extends ow{data(){return super.data()}}function QD(n,e){return"string"==typeof e?KD(n,e):e instanceof Id?e._internalPath:e._delegate._internalPath}function cM(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ie(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class WT{}class aw extends WT{}function vf(n,e,...t){let r=[];e instanceof WT&&r.push(e),r=r.concat(t),function(s){const u=s.filter(m=>m instanceof qy).length,l=s.filter(m=>m instanceof uw).length;if(u>1||u>0&&l>0)throw new Ie(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class uw extends aw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new uw(e,t,r)}_apply(e){const t=this._parse(e);return fM(e._query,t),new ji(e.firestore,e.converter,k_(e._query,t))}_parse(e){const t=Ig(e.firestore);return function(s,u,l,m,w,b,S){let N;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ie(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){hM(S,b);const H=[];for(const K of S)H.push(dM(m,s,K));N={arrayValue:{values:H}}}else N=dM(m,s,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||hM(S,b),N=sM(l,"where",S,"in"===b||"not-in"===b);return Jt.create(w,b,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class qy extends WT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:wn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const l=s.getFlattenedFilters();for(const m of l)fM(u,m),u=k_(u,m)}(e._query,t),new ji(e.firestore,e.converter,k_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ZT extends aw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ZT(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Ie(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ie(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Zh(s,u);return function(m,w){if(null===P_(m)){const b=$p(m);null!==b&&pM(0,b,w.field)}}(r,l),l}(e._query,this._field,this._direction);return new ji(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new Cu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class JD extends aw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new JD(e,t,r)}_apply(e){return new ji(e.firestore,e.converter,Hp(e._query,this._limit,this._limitType))}}class XD extends aw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new XD(e,t,r)}_apply(e){const t=lM(e,this.type,this._docOrFields,this._inclusive);return new ji(e.firestore,e.converter,(s=t,new Cu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class eC extends aw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new eC(e,t,r)}_apply(e){const t=lM(e,this.type,this._docOrFields,this._inclusive);return new ji(e.firestore,e.converter,(s=t,new Cu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function lM(n,e,t,r){if(t[0]=(0,pn.m9)(t[0]),t[0]instanceof ow)return function(s,u,l,m,w){if(!m)throw new Ie(oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const S of ld(s))if(S.field.isKeyField())b.push(ad(u,m.key));else{const N=m.data.field(S.field);if(va(N))throw new Ie(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const H=S.field.canonicalString();throw new Ie(oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}b.push(N)}return new Ws(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Ig(n.firestore);return function(u,l,m,w,b,S){const N=u.explicitOrderBy;if(b.length>N.length)throw new Ie(oe.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let K=0;K<b.length;K++){const ye=b[K];if(N[K].field.isKeyField()){if("string"!=typeof ye)throw new Ie(oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ye}`);if(!O_(u)&&-1!==ye.indexOf("/"))throw new Ie(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ye}' contains a slash.`);const Fe=u.path.child(an.fromString(ye));if(!Ze.isDocumentKey(Fe))throw new Ie(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const ke=new Ze(Fe);H.push(ad(l,ke))}else{const Fe=sM(m,w,ye);H.push(Fe)}}return new Ws(H,S)}(n._query,n.firestore._databaseId,s,e,t,r)}}function dM(n,e,t){if("string"==typeof(t=(0,pn.m9)(t))){if(""===t)throw new Ie(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!O_(e)&&-1!==t.indexOf("/"))throw new Ie(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(an.fromString(t));if(!Ze.isDocumentKey(r))throw new Ie(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ad(n,new Ze(r))}if(t instanceof Jn)return ad(n,t._key);throw new Ie(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${GD(t)}.`)}function hM(n,e){if(!Array.isArray(n)||0===n.length)throw new Ie(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fM(n,e){if(e.isInequality()){const r=$p(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new Ie(oe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=P_(n);null!==u&&pM(0,s,u)}const t=function(r,s){for(const u of r)for(const l of u.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ie(oe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function pM(n,e,t){if(!t.isEqual(e))throw new Ie(oe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class KT{convertValue(e,t="none"){switch(Iu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ya(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Bc(e,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new qD(Yn(e.latitude),Yn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ay(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Vp(e));default:return null}}convertTimestamp(e){const t=Eu(e);return new $n(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=an.fromString(e);pt(KI(r));const s=new od(r.get(1),r.get(3)),u=new Ze(r.popFirst(5));return s.isEqual(t)||fr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function tC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class N1 extends KT{constructor(e){super(),this.firestore=e}convertBytes(e){return new el(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}class Cg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dd extends ow{constructor(e,t,r,s,u,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(QD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class cw extends Dd{data(e={}){return super.data(e)}}class _f{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Cg(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new cw(this._firestore,this._userDataWriter,r.key,r,new Cg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ie(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new cw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Cg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const m=new cw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Cg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==l.type&&(w=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:O1(l.type),doc:m,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function O1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function mM(n,e){return n instanceof Dd&&e instanceof Dd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof _f&&e instanceof _f&&n._firestore===e._firestore&&jT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class wf extends KT{constructor(e){super(),this.firestore=e}convertBytes(e){return new el(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}function yM(n,e,t){n=un(n,Jn);const r=un(n.firestore,Xn),s=tC(n.converter,e,t);return Wy(r,[ZD(Ig(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Fn.none())])}function vM(n,e,t,...r){n=un(n,Jn);const s=un(n.firestore,Xn),u=Ig(s);let l;return l="string"==typeof(e=(0,pn.m9)(e))||e instanceof Id?zT(u,"updateDoc",n._key,e,t,r):GT(u,"updateDoc",n._key,e),Wy(s,[l.toMutation(n._key,Fn.exists(!0))])}function _M(n,...e){var t,r,s;n=(0,pn.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||$T(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if($T(e[l])){const N=e[l];e[l]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[l+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[l+2]=null===(s=N.complete)||void 0===s?void 0:s.bind(N)}let w,b,S;if(n instanceof Jn)b=un(n.firestore,Xn),S=Qh(n._key.path),w={next:N=>{e[l]&&e[l](YT(b,n,N))},error:e[l+1],complete:e[l+2]};else{const N=un(n,ji);b=un(N.firestore,Xn),S=N._query;const H=new wf(b);w={next:K=>{e[l]&&e[l](new _f(b,H,N,K))},error:e[l+1],complete:e[l+2]},cM(n._query)}return function(N,H,K,ye){const Fe=new BD(ye),ke=new VD(H,Fe,K);return N.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return PD(yield zy(N),ke)})),()=>{Fe.Dc(),N.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return kD(yield zy(N),ke)}))}}(Lr(b),S,m,w)}function Wy(n,e){return function(t,r){const s=new Dr;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function J(n,e,t){return me.apply(this,arguments)}(yield VT(t),r,s)})),s.promise}(Lr(n),e)}function YT(n,e,t){const r=t.docs.get(e._key),s=new wf(n);return new Dd(n,s,e._key,r,new Cg(t.hasPendingWrites,t.fromCache),e.converter)}const J1={maxAttempts:5};class wM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ig(e)}set(e,t,r){this._verifyNotCommitted();const s=Ef(e,this._firestore),u=tC(s.converter,t,r),l=ZD(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(l.toMutation(s._key,Fn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=Ef(e,this._firestore);let l;return l="string"==typeof(t=(0,pn.m9)(t))||t instanceof Id?zT(this._dataReader,"WriteBatch.update",u._key,t,r,s):GT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Fn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ef(e,this._firestore);return this._mutations=this._mutations.concat(new fd(t._key,Fn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ie(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ef(n,e){if((n=(0,pn.m9)(n)).firestore!==e)throw new Ie(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class X1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ig(e)}get(e){const t=Ef(e,this._firestore),r=new N1(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return it();const u=s[0];if(u.isFoundDocument())return new ow(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new ow(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const s=Ef(e,this._firestore),u=tC(s.converter,t,r),l=ZD(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const u=Ef(e,this._firestore);let l;return l="string"==typeof(t=(0,pn.m9)(t))||t instanceof Id?zT(this._dataReader,"Transaction.update",u._key,t,r,s):GT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Ef(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ef(e,this._firestore),r=new wf(this._firestore);return super.get(e).then(s=>new Dd(this._firestore,r,t._key,s._document,new Cg(!1,!1),t.converter))}}!function(n,e=!0){Uh=ys.SDK_VERSION,(0,ys._registerComponent)(new up.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),l=new Xn(new ey(t.getProvider("auth-internal")),new f_(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ie(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new od(m.options.projectId,w)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),(0,ys.registerVersion)(Jm,"3.12.0",n),(0,ys.registerVersion)(Jm,"3.12.0","esm2017")}();function QT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ie("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function IM(){if(typeof Uint8Array>"u")throw new Ie("unimplemented","Uint8Arrays are not available in this environment.")}function DM(){if(!function cI(){return typeof atob<"u"}())throw new Ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}class lw{constructor(e){this._delegate=e}static fromBase64String(e){return DM(),new lw(el.fromBase64String(e))}static fromUint8Array(e){return IM(),new lw(el.fromUint8Array(e))}toBase64(){return DM(),this._delegate.toBase64()}toUint8Array(){return IM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function JT(n){return function uN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class cN{enableIndexedDbPersistence(e,t){return function a1(n,e){tM(n=un(n,Xn));const t=Lr(n);if(t._uninitializedComponentsProvider)throw new Ie(oe.FAILED_PRECONDITION,"SDK cache is already specified.");zs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),s=new Gy;return eM(t,s,new RT(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function u1(n){tM(n=un(n,Xn));const e=Lr(n);if(e._uninitializedComponentsProvider)throw new Ie(oe.FAILED_PRECONDITION,"SDK cache is already specified.");zs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Gy;return eM(e,r,new kA(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function c1(n){if(n._initialized&&!n._terminated)throw new Ie(oe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Dr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!Cr.D())return Promise.resolve();const s=r+"main";yield Cr.delete(s)}),function(r){return t.apply(this,arguments)})(xy(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class CM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof od||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&zs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function YA(n,e,t,r={}){var s;const u=(n=un(n,nw))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&zs("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,m;if("string"==typeof r.mockUserToken)l=r.mockUserToken,m=Or.MOCK_USER;else{l=(0,pn.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ie(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Or(w)}n._authCredentials=new BE(new h_(l,m))}}(this._delegate,e,t,r)}enableNetwork(){return function d1(n){return function KR(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield VA(n),t=yield UA(n);return e.setNetworkEnabled(!0),function(r){const s=Ye(r);return s.vu.delete(0),pf(s)}(t)}))}(Lr(n=un(n,Xn)))}(this._delegate)}disableNetwork(){return function h1(n){return function YR(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield VA(n),t=yield UA(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(s){const u=Ye(s);u.vu.add(0),yield gf(u),u.bu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Lr(n=un(n,Xn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,zA("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function l1(n){return function(e){const t=new Dr;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function NR(n,e){return gT.apply(this,arguments)}(yield VT(e),t)})),t.promise}(Lr(n=un(n,Xn)))}(this._delegate)}onSnapshotsInSync(e){return function H1(n,e){return function XR(n,e){const t=new BD(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield zy(n),s=t,Ye(r).ku.add(s),void s.next();var r,s})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield zy(n),s=t,void Ye(r).ku.delete(s);var r,s}))}}(Lr(n=un(n,Xn)),$T(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Zy(this,QA(this._delegate,e))}catch(t){throw Es(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ta(this,zD(this._delegate,e))}catch(t){throw Es(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Is(this,function r1(n,e){if(n=un(n,nw),BT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ie(oe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ji(n,null,(t=e,new Cu(an.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Es(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function eN(n,e,t){n=un(n,Xn);const r=Object.assign(Object.assign({},J1),t);return function(s){if(s.maxAttempts<1)throw new Ie(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,l){const m=new Dr;return s.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const w=yield function BA(n){return $D(n).then(e=>e.datastore)}(s);new WR(s.asyncQueue,w,l,u,m).run()})),m.promise}(Lr(n),s=>e(new X1(n,s)),r)}(this._delegate,t=>e(new bM(this,t)))}batch(){return Lr(this._delegate),new TM(new wM(this._delegate,e=>Wy(this._delegate,e)))}loadBundle(e){return function f1(n,e){const t=Lr(n=un(n,Xn)),r=new s1;return function e1(n,e,t,r){const s=function(u,l){let m;return m="string"==typeof u?kI().encode(u):u,w=function(w,b){if(w instanceof Uint8Array)return FA(w,b);if(w instanceof ArrayBuffer)return FA(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new zR(w,l);var w}(t,ff(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function HR(n,e,t){const r=Ye(n);var s;(s=(0,ge.Z)(function*(u,l,m){try{const w=yield l.getMetadata();if(yield function(H,K){const ye=Ye(H),Fe=or(K.createTime);return ye.persistence.runTransaction("hasNewerBundle","readonly",ke=>ye.qs.getBundleMetadata(ke,K.id)).then(ke=>!!ke&&ke.createTime.compareTo(Fe)>=0)}(u.localStore,w))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(H=w).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);m._updateProgress(i(w));const b=new RA(w,u.localStore,l.serializer);let S=yield l.bc();for(;S;){const H=yield b.zu(S);H&&m._updateProgress(H),S=yield l.bc()}const N=yield b.complete();return yield Ed(u,N.Ju,void 0),yield function(H,K){const ye=Ye(H);return ye.persistence.runTransaction("Save bundle","readwrite",Fe=>ye.qs.saveBundleMetadata(Fe,K))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Hu)}catch(w){return zs("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var H}),function(u,l,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield VT(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function p1(n,e){return function t1(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const s=Ye(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.qs.getNamedQuery(u,r))}(yield HD(n),e)}))}(Lr(n=un(n,Xn)),e).then(t=>t?new ji(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Is(this,t):null)}}class nC extends KT{constructor(e){super(),this.firestore=e}convertBytes(e){return new lw(new el(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ta.forKey(t,this.firestore,null)}}class bM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new nC(e)}get(e){const t=Tg(e);return this._delegate.get(t).then(r=>new dw(this._firestore,new Dd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Tg(e);return r?(QT("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Tg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Tg(e);return this._delegate.delete(t),this}}class TM{constructor(e){this._delegate=e}set(e,t,r){const s=Tg(e);return r?(QT("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Tg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Tg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class bg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new cw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new hw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=bg.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new bg(e,new nC(e),t),s.set(t,u)),u}}bg.INSTANCES=new WeakMap;class Ta{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ta(t,new Jn(t._delegate,r,new Ze(e)))}static forKey(e,t,r){return new Ta(t,new Jn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Zy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Zy(this.firestore,QA(this._delegate,e))}catch(t){throw Es(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,pn.m9)(e))instanceof Jn&&JA(this._delegate,e)}set(e,t){t=QT("DocumentReference.set",t);try{return t?yM(this._delegate,e,t):yM(this._delegate,e)}catch(r){throw Es(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?vM(this._delegate,e):vM(this._delegate,e,t,...r)}catch(s){throw Es(s,"updateDoc()","DocumentReference.update()")}}delete(){return function j1(n){return Wy(un(n.firestore,Xn),[new fd(n._key,Fn.none())])}(this._delegate)}onSnapshot(...e){const t=SM(e),r=AM(e,s=>new dw(this.firestore,new Dd(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return _M(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function F1(n){n=un(n,Jn);const e=un(n.firestore,Xn),t=Lr(e),r=new wf(e);return function QR(n,e){const t=new Dr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(s,u,l){try{const m=yield function(w,b){const S=Ye(w);return S.persistence.runTransaction("read document","readonly",N=>S.localDocuments.getDocument(N,b))}(s,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new Ie(oe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=mf(m,`Failed to get document '${u} from cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield HD(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Dd(e,r,n._key,s,new Cg(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function L1(n){n=un(n,Jn);const e=un(n.firestore,Xn);return jA(Lr(e),n._key,{source:"server"}).then(t=>YT(e,n,t))}(this._delegate):function k1(n){n=un(n,Jn);const e=un(n.firestore,Xn);return jA(Lr(e),n._key).then(t=>YT(e,n,t))}(this._delegate),t.then(r=>new dw(this.firestore,new Dd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ta(this.firestore,this._delegate.withConverter(e?bg.getInstance(this.firestore,e):null))}}function Es(n,e,t){return n.message=n.message.replace(e,t),n}function SM(n){for(const e of n)if("object"==typeof e&&!JT(e))return e;return{}}function AM(n,e){var t,r;let s;return s=JT(n[0])?n[0]:JT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class dw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ta(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return mM(this._delegate,e._delegate)}}class hw extends dw{data(e){const t=this._delegate.data(e);return function VE(n,e){n||it()}(void 0!==t),t}}class Is{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nC(e)}where(e,t,r){try{return new Is(this.firestore,vf(this._delegate,function C1(n,e,t){const r=e,s=QD("where",n);return uw._create(s,r,t)}(e,t,r)))}catch(s){throw Es(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Is(this.firestore,vf(this._delegate,function b1(n,e="asc"){const t=e,r=QD("orderBy",n);return ZT._create(r,t)}(e,t)))}catch(r){throw Es(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Is(this.firestore,vf(this._delegate,function T1(n){return ZA("limit",n),JD._create("limit",n,"F")}(e)))}catch(t){throw Es(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Is(this.firestore,vf(this._delegate,function S1(n){return ZA("limitToLast",n),JD._create("limitToLast",n,"L")}(e)))}catch(t){throw Es(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Is(this.firestore,vf(this._delegate,function A1(...n){return XD._create("startAt",n,!0)}(...e)))}catch(t){throw Es(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Is(this.firestore,vf(this._delegate,function M1(...n){return XD._create("startAfter",n,!1)}(...e)))}catch(t){throw Es(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Is(this.firestore,vf(this._delegate,function x1(...n){return eC._create("endBefore",n,!1)}(...e)))}catch(t){throw Es(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Is(this.firestore,vf(this._delegate,function R1(...n){return eC._create("endAt",n,!0)}(...e)))}catch(t){throw Es(t,"endAt()","Query.endAt()")}}isEqual(e){return jT(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function U1(n){n=un(n,ji);const e=un(n.firestore,Xn),t=Lr(e),r=new wf(e);return function JR(n,e){const t=new Dr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(s,u,l){try{const m=yield Py(s,u,!0),w=new c(u,m.ir),b=w.sc(m.documents),S=w.applyChanges(b,!1);l.resolve(S.snapshot)}catch(m){const w=mf(m,`Failed to execute query '${u} against cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield HD(n),e,t);var r})),t.promise}(t,n._query).then(s=>new _f(e,r,n,s))}(this._delegate):"server"===e?.source?function B1(n){n=un(n,ji);const e=un(n.firestore,Xn),t=Lr(e),r=new wf(e);return $A(t,n._query,{source:"server"}).then(s=>new _f(e,r,n,s))}(this._delegate):function V1(n){n=un(n,ji);const e=un(n.firestore,Xn),t=Lr(e),r=new wf(e);return cM(n._query),$A(t,n._query).then(s=>new _f(e,r,n,s))}(this._delegate),t.then(r=>new XT(this.firestore,new _f(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=SM(e),r=AM(e,s=>new XT(this.firestore,new _f(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return _M(this._delegate,t,r)}withConverter(e){return new Is(this.firestore,this._delegate.withConverter(e?bg.getInstance(this.firestore,e):null))}}class dN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new hw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class XT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Is(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new hw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new dN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new hw(this._firestore,r))})}isEqual(e){return mM(this._delegate,e._delegate)}}class Zy extends Is{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ta(this.firestore,e):null}doc(e){try{return new Ta(this.firestore,void 0===e?zD(this._delegate):zD(this._delegate,e))}catch(t){throw Es(t,"doc()","CollectionReference.doc()")}}add(e){return function $1(n,e){const t=un(n.firestore,Xn),r=zD(n),s=tC(n.converter,e);return Wy(t,[ZD(Ig(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Fn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ta(this.firestore,t))}isEqual(e){return JA(this._delegate,e._delegate)}withConverter(e){return new Zy(this.firestore,this._delegate.withConverter(e?bg.getInstance(this.firestore,e):null))}}function Tg(n){return un(n,Jn)}class eS{constructor(...e){this._delegate=new Id(...e)}static documentId(){return new eS(Kn.keyField().canonicalString())}isEqual(e){return(e=(0,pn.m9)(e))instanceof Id&&this._delegate._internalPath.isEqual(e._internalPath)}}class Sg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function nN(){return new HT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Sg(e)}static delete(){const e=function tN(){return new iw("deleteField")}();return e._methodName="FieldValue.delete",new Sg(e)}static arrayUnion(...e){const t=function rN(...n){return new _1("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Sg(t)}static arrayRemove(...e){const t=function iN(...n){return new w1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Sg(t)}static increment(e){const t=function sN(n){return new E1("increment",n)}(e);return t._methodName="FieldValue.increment",new Sg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const hN={Firestore:CM,GeoPoint:qD,Timestamp:$n,Blob:lw,Transaction:bM,WriteBatch:TM,DocumentReference:Ta,DocumentSnapshot:dw,Query:Is,QueryDocumentSnapshot:hw,QuerySnapshot:XT,CollectionReference:Zy,FieldPath:eS,FieldValue:Sg,setLogLevel:function lN(n){!function LE(n){_u.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function pN(n){(function fN(n,e){n.INTERNAL.registerComponent(new up.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},hN)))})(n,(e,t)=>new CM(e,t,new cN)),n.registerVersion("@firebase/firestore-compat","0.3.9")}(Sv.Z);var If=k(7579),gN=k(6451),rC=k(5363);function Ri(n,e){return(0,si.e)((t,r)=>{let s=null,u=0,l=!1;const m=()=>l&&!s&&r.complete();t.subscribe((0,yn.x)(r,w=>{s?.unsubscribe();let b=0;const S=u++;(0,_o.Xf)(n(w,S)).subscribe(s=(0,yn.x)(r,N=>r.next(e?e(w,N,S,b++):N),()=>{s=null,m()}))},()=>{l=!0,m()}))})}var mN=k(6063);class yN extends If.x{constructor(e=1/0,t=1/0,r=mN.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!s&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const l=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=l;w+=2)m=w;m&&r.splice(0,m+1)}}}var vN=k(3099);function MM(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,vN.B)({connector:()=>new yN(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}const iC=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Df=k(515);function Ky(n){return n<=0?()=>Df.E:(0,si.e)((e,t)=>{let r=0;e.subscribe((0,yn.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function sC(n){return(0,si.e)((e,t)=>{let r=!1;e.subscribe((0,yn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function xM(n=wN){return(0,si.e)((e,t)=>{let r=!1;e.subscribe((0,yn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function wN(){return new iC}function Cd(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xi((s,u)=>n(s,u,r)):So.y,Ky(1),t?sC(e):xM(()=>new iC))}var tS=k(576);function RM(n,e){return(0,tS.m)(e)?Ri(()=>n,e):Ri(()=>n)}var nS=k(9468);k(259);const iS=new Map,PM={activated:!1,tokenObservers:[]},bN={initialized:!1,enabled:!1};function Tr(n){return iS.get(n)||Object.assign({},PM)}function aC(){return bN}const sS="https://content-firebaseappcheck.googleapis.com/v1",MN="exchangeDebugToken",OM={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class RN{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new pn.BH,yield function NN(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new pn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const $i=new pn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function uS(){return uS=(0,ge.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const N=yield s.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(N){throw $i.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==l.status)throw $i.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(N){throw $i.create("fetch-parse-error",{originalErrorMessage:N?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw $i.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(w[1]),S=Date.now();return{token:m.token,expireTimeMillis:S+b,issuedAtTimeMillis:S}}),uS.apply(this,arguments)}const FN="firebase-app-check-database",LN=1,fw="firebase-app-check-store";let dC=null;function cS(){return cS=(0,ge.Z)(function*(n,e){const r=(yield function LM(){return dC||(dC=new Promise((n,e)=>{try{const t=indexedDB.open(FN,LN);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e($i.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(fw,{keyPath:"compositeKey"})}}catch(t){e($i.create("storage-open",{originalErrorMessage:t?.message}))}}),dC)}()).transaction(fw,"readwrite"),u=r.objectStore(fw).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=w=>{l()},r.onerror=w=>{var b;m($i.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})}),cS.apply(this,arguments)}const pw=new fa.Yd("@firebase/app-check");function hS(n,e){return(0,pn.hl)()?function UN(n,e){return function VM(n,e){return cS.apply(this,arguments)}(function BM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{pw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function mS(){return mS=(0,ge.Z)(function*(){const n=aC();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),mS.apply(this,arguments)}const zN={error:"UNKNOWN_ERROR"};function qN(n){return pn.US.encodeString(JSON.stringify(n),!1)}function hC(n){return yS.apply(this,arguments)}function yS(){return yS=(0,ge.Z)(function*(n,e=!1){const t=n.app;!function oS(n){if(!Tr(n).activated)throw $i.create("use-before-activation",{appName:n.name})}(t);const r=Tr(t);let u,s=r.token;if(s&&!Yy(s)&&(r.token=void 0,s=void 0),!s){const w=yield r.cachedTokenPromise;w&&(Yy(w)?s=w:yield hS(t,void 0))}if(!e&&s&&Yy(s))return{token:s.token};let m,l=!1;if(function pS(){return aC().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function lC(n,e){return uS.apply(this,arguments)}(function kM(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`${sS}/projects/${t}/apps/${r}:${MN}?key=${s}`,body:{debug_token:e}}}(t,yield function gS(){return mS.apply(this,arguments)}()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const w=yield r.exchangeTokenPromise;return yield hS(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield Tr(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?pw.warn(w.message):pw.error(w),u=w}return s?u?m=Yy(s)?{token:s.token,internalError:u}:HM(u):(m={token:s.token},r.token=s,yield hS(t,s)):m=HM(u),l&&function $M(n,e){const t=Tr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,m),m}),yS.apply(this,arguments)}function wS(n,e){const t=Tr(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function jM(n){const{app:e}=n,t=Tr(e);let r=t.tokenRefresher;r||(r=function ZN(n){const{app:e}=n;return new RN((0,ge.Z)(function*(){let r;if(r=Tr(e).token?yield hC(n,!0):yield hC(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Tr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},OM.RETRIAL_MIN_WAIT,OM.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Yy(n){return n.expireTimeMillis-Date.now()>0}function HM(n){return{token:qN(zN),error:n}}class KN{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Tr(this.app);for(const t of e)wS(this.app,t.next);return Promise.resolve()}}const QM="app-check-internal";!function cP(){(0,ys._registerComponent)(new up.wA("app-check",n=>function YN(n,e){return new KN(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(QM).initialize()})),(0,ys._registerComponent)(new up.wA(QM,n=>function QN(n){return{getToken:e=>hC(n,e),addTokenListener:e=>function _S(n,e,t,r){const{app:s}=n,u=Tr(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Yy(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),jM(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>jM(n))}(n,"INTERNAL",e),removeTokenListener:e=>wS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ys.registerVersion)("@firebase/app-check","0.7.0")}();class CS{constructor(){return(0,zr.vb)("app-check")}}typeof window<"u"&&window;var pP=k(9260);const XM=new f.OlP("angularfire2.auth.use-emulator"),ex=new f.OlP("angularfire2.auth.settings"),tx=new f.OlP("angularfire2.auth.tenant-id"),nx=new f.OlP("angularfire2.auth.langugage-code"),rx=new f.OlP("angularfire2.auth.use-device-language"),ix=new f.OlP("angularfire.auth.persistence"),sx=(n,e,t,r,s,u,l,m)=>(0,Us.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=s,u&&w.useDeviceLanguage(),l)for(const[b,S]of Object.entries(l))w.settings[b]=S;return m&&w.setPersistence(m),w},[t,r,s,u,l,m]);let ox=(()=>{class n{constructor(t,r,s,u,l,m,w,b,S,N,H,K){const ye=new If.x,Fe=_t(void 0).pipe((0,rC.Q)(l.outsideAngular),Ri(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,2644)))),(0,vt.U)(()=>(0,Us.on)(t,u,r)),(0,vt.U)(ke=>sx(ke,u,m,b,S,N,w,H)),MM({bufferSize:1,refCount:!1}));if(as(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=_t(null);else{Fe.pipe(Cd()).subscribe();const It=Fe.pipe(Ri(Ot=>Ot.getRedirectResult().then(Wt=>Wt,()=>null)),zr.iC,MM({bufferSize:1,refCount:!1})),Tt=Fe.pipe(Ri(Ot=>new _r.y(Wt=>({unsubscribe:u.runOutsideAngular(()=>Ot.onAuthStateChanged(hn=>Wt.next(hn),hn=>Wt.error(hn),()=>Wt.complete()))})))),wt=Fe.pipe(Ri(Ot=>new _r.y(Wt=>({unsubscribe:u.runOutsideAngular(()=>Ot.onIdTokenChanged(hn=>Wt.next(hn),hn=>Wt.error(hn),()=>Wt.complete()))}))));this.authState=It.pipe(RM(Tt),(0,nS.R)(l.outsideAngular),(0,rC.Q)(l.insideAngular)),this.user=It.pipe(RM(wt),(0,nS.R)(l.outsideAngular),(0,rC.Q)(l.insideAngular)),this.idToken=this.user.pipe(Ri(Ot=>Ot?(0,ln.D)(Ot.getIdToken()):_t(null))),this.idTokenResult=this.user.pipe(Ri(Ot=>Ot?(0,ln.D)(Ot.getIdTokenResult()):_t(null))),this.credential=(0,gN.T)(It,ye,this.authState.pipe(Xi(Ot=>!Ot))).pipe((0,vt.U)(Ot=>Ot?.user?Ot:null),(0,nS.R)(l.outsideAngular),(0,rC.Q)(l.insideAngular))}return(0,Us.pX)(this,Fe,u,{spy:{apply:(ke,It,Tt)=>{(ke.startsWith("signIn")||ke.startsWith("createUser"))&&Tt.then(wt=>ye.next(wt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Us.Dh),f.LFG(Us.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(zr.HU),f.LFG(XM,8),f.LFG(ex,8),f.LFG(tx,8),f.LFG(nx,8),f.LFG(rx,8),f.LFG(ix,8),f.LFG(CS,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function ax(n,e){return function mP(n,e=oA.z){return new _r.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function TS(n,e){return ax(n,e).pipe((0,vt.U)(t=>({payload:t,type:"query"})))}function pC(n,e){return TS(n,e).pipe(am(void 0),ap(),(0,vt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const w=s.find(S=>S.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(S=>S.ref.isEqual(l.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(l.metadata)||!w&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function ux(n,e,t){return pC(n,t).pipe(Eh((r,s)=>function vP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function _P(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return SS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return SS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return SS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function FC(n,e=So.y){return n=n??Tv,(0,si.e)((t,r)=>{let s,u=!0;t.subscribe((0,yn.x)(r,l=>{const m=e(l);(u||!n(s,m))&&(u=!1,s=m,r.next(l))}))})}(),(0,vt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function SS(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function cx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class lx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=pC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,vt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(am(void 0),ap(),Xi(([r,s])=>s.length>0||!r),(0,vt.U)(([r,s])=>s),zr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Eh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=cx(e);return ux(this.query,t,this.afs.schedulers.outsideAngular).pipe(zr.iC)}valueChanges(e={}){return TS(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),zr.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(zr.iC)}add(e){return this.ref.add(e)}doc(e){return new dx(this.ref.doc(e),this.afs)}}class dx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=px(r,t);return new lx(s,u,this.afs)}snapshotChanges(){return function yP(n,e){return ax(n,e).pipe(am(void 0),ap(),(0,vt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(zr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ln.D)(this.ref.get(e)).pipe(zr.iC)}}class wP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?pC(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Xi(t=>t.length>0),zr.iC):pC(this.query,this.afs.schedulers.outsideAngular).pipe(zr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Eh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=cx(e);return ux(this.query,t,this.afs.schedulers.outsideAngular).pipe(zr.iC)}valueChanges(e={}){return TS(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),zr.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(zr.iC)}}const hx=new f.OlP("angularfire2.enableFirestorePersistence"),fx=new f.OlP("angularfire2.firestore.persistenceSettings"),EP=new f.OlP("angularfire2.firestore.settings"),IP=new f.OlP("angularfire2.firestore.use-emulator");function px(n,e=(t=>t)){return{query:e(n),ref:n}}let gx=(()=>{class n{constructor(t,r,s,u,l,m,w,b,S,N,H,K,ye,Fe,ke,It,Tt){this.schedulers=w;const wt=(0,Us.on)(t,m,r),Ot=S;N&&sx(wt,m,H,ye,Fe,ke,K,It),[this.firestore,this.persistenceEnabled$]=(0,Us.cc)(`${wt.name}.firestore`,"AngularFirestore",wt.name,()=>{const Wt=m.runOutsideAngular(()=>wt.firestore());if(u&&Wt.settings(u),Ot&&Wt.useEmulator(...Ot),s&&!as(l)){const hn=()=>{try{return(0,ln.D)(Wt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(ns){return typeof console<"u"&&console.warn(ns),_t(!1)}};return[Wt,m.runOutsideAngular(hn)]}return[Wt,_t(!1)]},[u,Ot,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=px(s,r),m=this.schedulers.ngZone.run(()=>u);return new lx(m,l,this)}collectionGroup(t,r){const s=r||(l=>l),u=this.firestore.collectionGroup(t);return new wP(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new dx(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Us.Dh),f.LFG(Us.xv,8),f.LFG(hx,8),f.LFG(EP,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(zr.HU),f.LFG(fx,8),f.LFG(IP,8),f.LFG(ox,8),f.LFG(XM,8),f.LFG(ex,8),f.LFG(tx,8),f.LFG(nx,8),f.LFG(rx,8),f.LFG(ix,8),f.LFG(CS,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),DP=(()=>{class n{constructor(){pP.Z.registerVersion("angularfire",zr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:hx,useValue:!0},{provide:fx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[gx]}),n})();const CP_firebase={apiKey:"AIzaSyAhjPLwfUY6PotcP7FauSJDx9zbSOhhZVA",authDomain:"pendcrema.firebaseapp.com",projectId:"pendcrema",storageBucket:"pendcrema.appspot.com",messagingSenderId:"267539030362",appId:"1:267539030362:web:69566393a2cfe18d191363"};class Sa extends If.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var bP=k(9672);function mx(...n){const e=(0,Ps.yG)(n),t=(0,Ps.jO)(n),{args:r,keys:s}=Cl(n);if(0===r.length)return(0,ln.D)([],e);const u=new _r.y(function TP(n,e,t=So.y){return r=>{yx(e,()=>{const{length:s}=n,u=new Array(s);let l=s,m=s;for(let w=0;w<s;w++)yx(e,()=>{const b=(0,ln.D)(n[w],e);let S=!1;b.subscribe((0,yn.x)(r,N=>{u[w]=N,S||(S=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,s?l=>Ja(s,l):So.y));return t?u.pipe(Qa(t)):u}function yx(n,e,t){n?(0,bP.f)(t,n,e):e()}function vx(n){return new _r.y(e=>{(0,_o.Xf)(n()).subscribe(e)})}var SP=k(9635);function gw(n,e){const t=(0,tS.m)(n)?n:()=>n,r=s=>s.error(t());return new _r.y(e?s=>e.schedule(r,0,s):r)}var _x=k(727);function AS(){return(0,si.e)((n,e)=>{let t=null;n._refCount++;const r=(0,yn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class wx extends _r.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,si.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new _x.w0;const t=this.getSubject();e.add(this.source.subscribe((0,yn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=_x.w0.EMPTY)}return e}refCount(){return AS()(this)}}var Ds=k(5577);function Ag(n,e){return(0,tS.m)(e)?(0,Ds.z)(n,e,1):(0,Ds.z)(n,1)}var ts=k(8505);function Cf(n){return(0,si.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,yn.x)(t,void 0,void 0,l=>{u=(0,_o.Xf)(n(l,Cf(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function MS(n){return n<=0?()=>Df.E:(0,si.e)((e,t)=>{let r=[];e.subscribe((0,yn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Ex(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xi((s,u)=>n(s,u,r)):So.y,MS(1),t?sC(e):xM(()=>new iC))}function xS(n){return(0,si.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const qt="primary",mw=Symbol("RouteTitle");class xP{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Qy(n){return new xP(n)}function RP(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))s[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function tl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!Ix(n[s],e[s]))return!1;return!0}function Ix(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function Dx(n){return Array.prototype.concat.apply([],n)}function Cx(n){return n.length>0?n[n.length-1]:null}function Hi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function bf(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,ln.D)(Promise.resolve(n)):_t(n)}const gC=!1,PP={exact:function Sx(n,e,t){if(!Mg(n.segments,e.segments)||!mC(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Sx(n.children[r],e.children[r],t))return!1;return!0},subset:Ax},bx={exact:function OP(n,e){return tl(n,e)},subset:function kP(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ix(n[t],e[t]))},ignored:()=>!0};function Tx(n,e,t){return PP[t.paths](n.root,e.root,t.matrixParams)&&bx[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ax(n,e,t){return Mx(n,e,e.segments,t)}function Mx(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Mg(s,t)||e.hasChildren()||!mC(s,t,r))}if(n.segments.length===t.length){if(!Mg(n.segments,t)||!mC(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!Ax(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Mg(n.segments,s)&&mC(n.segments,s,r)&&n.children[qt])&&Mx(n.children[qt],e,u,r)}}function mC(n,e,t){return e.every((r,s)=>bx[t](n[s].parameters,r.parameters))}class Tf{constructor(e=new Xt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qy(this.queryParams)),this._queryParamMap}toString(){return VP.serialize(this)}}class Xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Hi(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yC(this)}}class yw{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Qy(this.parameters)),this._parameterMap}toString(){return Nx(this)}}function Mg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let vw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new RS},providedIn:"root"}),n})();class RS{parse(e){const t=new WP(e);return new Tf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${_w(e.root,!0)}`,r=function jP(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${vC(t)}=${vC(s)}`).join("&"):`${vC(t)}=${vC(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),s="string"==typeof e.fragment?`#${function UP(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${s}`}}const VP=new RS;function yC(n){return n.segments.map(e=>Nx(e)).join("/")}function _w(n,e){if(!n.hasChildren())return yC(n);if(e){const t=n.children[qt]?_w(n.children[qt],!1):"",r=[];return Hi(n.children,(s,u)=>{u!==qt&&r.push(`${u}:${_w(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function LP(n,e){let t=[];return Hi(n.children,(r,s)=>{s===qt&&(t=t.concat(e(r,s)))}),Hi(n.children,(r,s)=>{s!==qt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===qt?[_w(n.children[qt],!1)]:[`${s}:${_w(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[qt]?`${yC(n)}/${t[0]}`:`${yC(n)}/(${t.join("//")})`}}function xx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vC(n){return xx(n).replace(/%3B/gi,";")}function NS(n){return xx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _C(n){return decodeURIComponent(n)}function Rx(n){return _C(n.replace(/\+/g,"%20"))}function Nx(n){return`${NS(n.path)}${function BP(n){return Object.keys(n).map(e=>`;${NS(e)}=${NS(n[e])}`).join("")}(n.parameters)}`}const $P=/^[^\/()?;=#]+/;function wC(n){const e=n.match($P);return e?e[0]:""}const HP=/^[^=?&#]+/,zP=/^[^&#]+/;class WP{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[qt]=new Xt(e,t)),r}parseSegment(){const e=wC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,gC);return this.capture(e),new yw(_C(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=wC(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=wC(this.remaining);s&&(r=s,this.capture(r))}e[_C(t)]=_C(r)}parseQueryParam(e){const t=function GP(n){const e=n.match(HP);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function qP(n){const e=n.match(zP);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const s=Rx(t),u=Rx(r);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=wC(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new f.vHH(4010,gC);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=qt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[qt]:new Xt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,gC)}}function PS(n){return n.segments.length>0?new Xt([],{[qt]:n}):n}function EC(n){const e={};for(const r of Object.keys(n.children)){const u=EC(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function ZP(n){if(1===n.numberOfChildren&&n.children[qt]){const e=n.children[qt];return new Xt(n.segments.concat(e.segments),e.children)}return n}(new Xt(n.segments,e))}function xg(n){return n instanceof Tf}const OS=!1;function KP(n,e,t,r,s){if(0===t.length)return Jy(e.root,e.root,e.root,r,s);const u=function Lx(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Fx(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Hi(u.outlets,(w,b)=>{m[b]="string"==typeof w?w.split("/"):w}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===l?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new Fx(t,e,r)}(t);return u.toRoot()?Jy(e.root,e.root,new Xt([],{}),r,s):function l(w){const b=function QP(n,e,t,r){if(n.isAbsolute)return new Xy(e.root,!0,0);if(-1===r)return new Xy(t,t===e.root,0);return function Vx(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new f.vHH(4005,OS&&"Invalid number of '../'");s=r.segments.length}return new Xy(r,!1,s-u)}(t,r+(ww(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),S=b.processChildren?ev(b.segmentGroup,b.index,u.commands):kS(b.segmentGroup,b.index,u.commands);return Jy(e.root,b.segmentGroup,S,r,s)}(n.snapshot?._lastPathIndex)}function ww(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ew(n){return"object"==typeof n&&null!=n&&n.outlets}function Jy(n,e,t,r,s){let l,u={};r&&Hi(r,(w,b)=>{u[b]=Array.isArray(w)?w.map(S=>`${S}`):`${w}`}),l=n===e?t:kx(n,e,t);const m=PS(EC(l));return new Tf(m,u,s)}function kx(n,e,t){const r={};return Hi(n.children,(s,u)=>{r[u]=s===e?t:kx(s,e,t)}),new Xt(n.segments,r)}class Fx{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ww(r[0]))throw new f.vHH(4003,OS&&"Root segment cannot have matrix parameters");const s=r.find(Ew);if(s&&s!==Cx(r))throw new f.vHH(4004,OS&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Xy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function kS(n,e,t){if(n||(n=new Xt([],{})),0===n.segments.length&&n.hasChildren())return ev(n,e,t);const r=function XP(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const l=n.segments[s],m=t[r];if(Ew(m))break;const w=`${m}`,b=r<t.length-1?t[r+1]:null;if(s>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!Bx(w,b,l))return u;r+=2}else{if(!Bx(w,{},l))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Xt(n.segments.slice(0,r.pathIndex),{});return u.children[qt]=new Xt(n.segments.slice(r.pathIndex),n.children),ev(u,0,s)}return r.match&&0===s.length?new Xt(n.segments,{}):r.match&&!n.hasChildren()?FS(n,e,t):r.match?ev(n,0,s):FS(n,e,t)}function ev(n,e,t){if(0===t.length)return new Xt(n.segments,{});{const r=function JP(n){return Ew(n[0])?n[0].outlets:{[qt]:n}}(t),s={};if(!r[qt]&&n.children[qt]&&1===n.numberOfChildren&&0===n.children[qt].segments.length){const u=ev(n.children[qt],e,t);return new Xt(n.segments,u.children)}return Hi(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[l]=kS(n.children[l],e,u))}),Hi(n.children,(u,l)=>{void 0===r[l]&&(s[l]=u)}),new Xt(n.segments,s)}}function FS(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(Ew(u)){const w=eO(u.outlets);return new Xt(r,w)}if(0===s&&ww(t[0])){r.push(new yw(n.segments[e].path,Ux(t[0]))),s++;continue}const l=Ew(u)?u.outlets[qt]:`${u}`,m=s<t.length-1?t[s+1]:null;l&&m&&ww(m)?(r.push(new yw(l,Ux(m))),s+=2):(r.push(new yw(l,{})),s++)}return new Xt(r,{})}function eO(n){const e={};return Hi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=FS(new Xt([],{}),0,t))}),e}function Ux(n){const e={};return Hi(n,(t,r)=>e[r]=`${t}`),e}function Bx(n,e,t){return n==t.path&&tl(e,t.parameters)}const Iw="imperative";class nl{constructor(e,t){this.id=e,this.url=t}}class LS extends nl{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Rg extends nl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class IC extends nl{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class DC extends nl{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=16}}class VS extends nl{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class tO extends nl{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nO extends nl{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rO extends nl{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class iO extends nl{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sO extends nl{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oO{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class aO{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class uO{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cO{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lO{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dO{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jx{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let pO=(()=>{class n{createUrlTree(t,r,s,u,l,m){return KP(t||r.root,s,u,l,m)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),mO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(e){return pO.\u0275fac(e)},providedIn:"root"}),n})();class $x{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=US(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=US(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=BS(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return BS(e,this._root).map(t=>t.value)}}function US(n,e){if(n===e.value)return e;for(const t of e.children){const r=US(n,t);if(r)return r}return null}function BS(n,e){if(n===e.value)return[e];for(const t of e.children){const r=BS(n,t);if(r.length)return r.unshift(e),r}return[]}class bd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function tv(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Hx extends $x{constructor(e,t){super(e),this.snapshot=t,jS(this,e)}toString(){return this.snapshot.toString()}}function Gx(n,e){const t=function yO(n,e){const l=new CC([],{},{},"",{},qt,e,null,n.root,-1,{});return new qx("",new bd(l,[]))}(n,e),r=new Sa([new yw("",{})]),s=new Sa({}),u=new Sa({}),l=new Sa({}),m=new Sa(""),w=new Ng(r,s,l,m,u,qt,e,t.root);return w.snapshot=t.root,new Hx(new bd(w,[]),t)}class Ng{constructor(e,t,r,s,u,l,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.pipe((0,vt.U)(b=>b[mw]))??_t(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,vt.U)(e=>Qy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,vt.U)(e=>Qy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zx(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function vO(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class CC{get title(){return this.data?.[mw]}constructor(e,t,r,s,u,l,m,w,b,S,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.routeConfig=w,this._urlSegment=b,this._lastPathIndex=S,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class qx extends $x{constructor(e,t){super(t),this.url=e,jS(this,t)}toString(){return Wx(this._root)}}function jS(n,e){e.value._routerState=n,e.children.forEach(t=>jS(n,t))}function Wx(n){const e=n.children.length>0?` { ${n.children.map(Wx).join(", ")} } `:"";return`${n.value}${e}`}function $S(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,tl(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),tl(e.params,t.params)||n.params.next(t.params),function NP(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!tl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),tl(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function HS(n,e){const t=tl(n.params,e.params)&&function FP(n,e){return Mg(n,e)&&n.every((t,r)=>tl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||HS(n.parent,e.parent))}function Dw(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function wO(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Dw(n,r,s);return Dw(n,r)})}(n,e,t);return new bd(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>Dw(n,m)),l}}const r=function EO(n){return new Ng(new Sa(n.url),new Sa(n.params),new Sa(n.queryParams),new Sa(n.fragment),new Sa(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>Dw(n,u));return new bd(r,s)}}const GS="ngNavigationCancelingError";function Zx(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=xg(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=Kx(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function Kx(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[GS]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Yx(n){return Qx(n)&&xg(n.url)}function Qx(n){return n&&n[GS]}class IO{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Cw,this.attachRef=null}}let Cw=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new IO,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bC=!1;let zS=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=qt,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.parentContexts=(0,f.f3M)(Cw),this.location=(0,f.f3M)(f.s_b),this.changeDetector=(0,f.f3M)(f.sBO),this.environmentInjector=(0,f.f3M)(f.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,bC);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,bC);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,bC);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,bC);this._activatedRoute=t;const s=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new DO(t,m,s.injector);if(r&&function CO(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(l);this.activated=s.createComponent(b,s.length,w)}else this.activated=s.createComponent(l,{index:s.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[f.TTD]}),n})();class DO{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ng?this.route:e===Cw?this.childContexts:this.parent.get(e,t)}}let qS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[zS],encapsulation:2}),n})();function Jx(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ZS(n){const e=n.children&&n.children.map(ZS),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==qt&&(t.component=qS),t}function Aa(n){return n.outlet||qt}function Xx(n,e){const t=n.filter(r=>Aa(r)===e);return t.push(...n.filter(r=>Aa(r)!==e)),t}function bw(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class MO{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),$S(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=tv(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,s[l],r),delete s[l]}),Hi(s,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const l=r.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=tv(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=tv(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=tv(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new dO(u.value.snapshot))}),e.children.length&&this.forwardEvent(new cO(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if($S(s),s===u)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),$S(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=bw(s.snapshot),w=m?.get(f._Vd)??null;l.attachRef=null,l.route=s,l.resolver=w,l.injector=m,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class eR{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class TC{constructor(e,t){this.component=e,this.route=t}}function xO(n,e,t){const r=n._root;return Tw(r,e?e._root:null,t,[r.value])}function nv(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function Tw(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=tv(e);return n.children.forEach(l=>{(function NO(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const w=function PO(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Mg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Mg(n.url,e.url)||!tl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!HS(n,e)||!tl(n.queryParams,e.queryParams);default:return!HS(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);w?s.canActivateChecks.push(new eR(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Tw(n,e,u.component?m?m.children:null:t,r,s),w&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new TC(m.outlet.component,l))}else l&&Sw(e,m,s),s.canActivateChecks.push(new eR(r)),Tw(n,null,u.component?m?m.children:null:t,r,s)})(l,u[l.value.outlet],t,r.concat([l.value]),s),delete u[l.value.outlet]}),Hi(u,(l,m)=>Sw(l,t.getContext(m),s)),s}function Sw(n,e,t){const r=tv(n),s=n.value;Hi(r,(u,l)=>{Sw(u,s.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new TC(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function Aw(n){return"function"==typeof n}function KS(n){return n instanceof iC||"EmptyError"===n?.name}const SC=Symbol("INITIAL_VALUE");function rv(){return Ri(n=>mx(n.map(e=>e.pipe(Ky(1),am(SC)))).pipe((0,vt.U)(e=>{for(const t of e)if(!0!==t){if(t===SC)return SC;if(!1===t||t instanceof Tf)return t}return!0}),Xi(e=>e!==SC),Ky(1)))}function tR(n){return(0,SP.z)((0,ts.b)(e=>{if(xg(e))throw Zx(0,e)}),(0,vt.U)(e=>!0===e))}const YS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nR(n,e,t,r,s){const u=QS(n,e,t);return u.matched?function YO(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?_t(s.map(l=>{const m=nv(l,n);return bf(function UO(n){return n&&Aw(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(rv(),tR()):_t(!0)}(r=Jx(e,r),e,t).pipe((0,vt.U)(l=>!0===l?u:{...YS})):_t(u)}function QS(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...YS}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||RP)(t,n,e);if(!s)return{...YS};const u={};Hi(s.posParams,(m,w)=>{u[w]=m.path});const l=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function AC(n,e,t,r){if(t.length>0&&function XO(n,e,t){return t.some(r=>MC(n,e,r)&&Aa(r)!==qt)}(n,t,r)){const u=new Xt(e,function JO(n,e,t,r){const s={};s[qt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Aa(u)!==qt){const l=new Xt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,s[Aa(u)]=l}return s}(n,e,r,new Xt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function ek(n,e,t){return t.some(r=>MC(n,e,r))}(n,t,r)){const u=new Xt(n.segments,function QO(n,e,t,r,s){const u={};for(const l of r)if(MC(n,t,l)&&!s[Aa(l)]){const m=new Xt([],{});m._sourceSegment=n,m._segmentIndexShift=e.length,u[Aa(l)]=m}return{...s,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new Xt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function MC(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function rR(n,e,t,r){return!!(Aa(n)===r||r!==qt&&MC(e,t,n))&&("**"===n.path||QS(e,n,t).matched)}function iR(n,e,t){return 0===e.length&&!n.children[t]}const xC=!1;class RC{constructor(e){this.segmentGroup=e||null}}class sR{constructor(e){this.urlTree=e}}function Mw(n){return gw(new RC(n))}function oR(n){return gw(new sR(n))}function tk(n){return gw(new f.vHH(4e3,xC&&`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class ik{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=AC(this.urlTree.root,[],[],this.config).segmentGroup,t=new Xt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,qt).pipe((0,vt.U)(u=>this.createUrlTree(EC(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Cf(u=>{if(u instanceof sR)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof RC?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,qt).pipe((0,vt.U)(s=>this.createUrlTree(EC(s),e.queryParams,e.fragment))).pipe(Cf(s=>{throw s instanceof RC?this.noMatchError(s):s}))}noMatchError(e){return new f.vHH(4002,xC&&`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const s=PS(e);return new Tf(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,vt.U)(u=>new Xt([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,ln.D)(s).pipe(Ag(u=>{const l=r.children[u],m=Xx(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,vt.U)(w=>({segment:w,outlet:u})))}),Eh((u,l)=>(u[l.outlet]=l.segment,u),{}),Ex())}expandSegment(e,t,r,s,u,l){return(0,ln.D)(r).pipe(Ag(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,l).pipe(Cf(b=>{if(b instanceof RC)return _t(null);throw b}))),Cd(m=>!!m),Cf((m,w)=>{if(KS(m))return iR(t,s,u)?_t(new Xt([],{})):Mw(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,l,m){return rR(s,t,u,l)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l):Mw(t):Mw(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?oR(u):this.lineralizeSegments(r,u).pipe((0,Ds.z)(l=>{const m=new Xt(l,{});return this.expandSegment(e,m,t,l,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){const{matched:m,consumedSegments:w,remainingSegments:b,positionalParamSegments:S}=QS(t,s,u);if(!m)return Mw(t);const N=this.applyRedirectCommands(w,s.redirectTo,S);return s.redirectTo.startsWith("/")?oR(N):this.lineralizeSegments(s,N).pipe((0,Ds.z)(H=>this.expandSegment(e,t,r,H.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=Jx(r,e),r.loadChildren?(r._loadedRoutes?_t({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,vt.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Xt(s,{})))):_t(new Xt(s,{}))):nR(t,r,s,e).pipe(Ri(({matched:l,consumedSegments:m,remainingSegments:w})=>l?this.getChildConfig(e=r._injector??e,r,s).pipe((0,Ds.z)(S=>{const N=S.injector??e,H=S.routes,{segmentGroup:K,slicedSegments:ye}=AC(t,m,w,H),Fe=new Xt(K.segments,K.children);if(0===ye.length&&Fe.hasChildren())return this.expandChildren(N,H,Fe).pipe((0,vt.U)(wt=>new Xt(m,wt)));if(0===H.length&&0===ye.length)return _t(new Xt(m,{}));const ke=Aa(r)===u;return this.expandSegment(N,Fe,H,ye,ke?qt:u,!0).pipe((0,vt.U)(Tt=>new Xt(m.concat(Tt.segments),Tt.children)))})):Mw(t)))}getChildConfig(e,t,r){return t.children?_t({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?_t({routes:t._loadedRoutes,injector:t._loadedInjector}):function KO(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?_t(!0):_t(s.map(l=>{const m=nv(l,n);return bf(function kO(n){return n&&Aw(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(rv(),tR())}(e,t,r).pipe((0,Ds.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,ts.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function nk(n){return gw(Kx(xC&&`Cannot load children because the guard of the route "path: '${n.path}'" returned false`,3))}(t))):_t({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return _t(r);if(s.numberOfChildren>1||!s.children[qt])return tk(e.redirectTo);s=s.children[qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new Tf(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Hi(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let l={};return Hi(t.children,(m,w)=>{l[w]=this.createSegmentGroup(e,m,r,s)}),new Xt(u,l)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new f.vHH(4001,xC&&`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class ok{}class ck{constructor(e,t,r,s,u,l,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m}recognize(){const e=AC(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,qt).pipe((0,vt.U)(t=>{if(null===t)return null;const r=new CC([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new bd(r,t),u=new qx(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=zx(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,ln.D)(Object.keys(r.children)).pipe(Ag(s=>{const u=r.children[s],l=Xx(t,s);return this.processSegmentGroup(e,l,u,s)}),Eh((s,u)=>s&&u?(s.push(...u),s):null),function AP(n,e=!1){return(0,si.e)((t,r)=>{let s=0;t.subscribe((0,yn.x)(r,u=>{const l=n(u,s++);(l||e)&&r.next(u),!l&&r.complete()}))})}(s=>null!==s),sC(null),Ex(),(0,vt.U)(s=>{if(null===s)return null;const u=uR(s);return function lk(n){n.sort((e,t)=>e.value.outlet===qt?-1:t.value.outlet===qt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,ln.D)(t).pipe(Ag(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,s,u)),Cd(l=>!!l),Cf(l=>{if(KS(l))return iR(r,s,u)?_t([]):_t(null);throw l}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!rR(t,r,s,u))return _t(null);let l;if("**"===t.path){const m=s.length>0?Cx(s).parameters:{},w=lR(r)+s.length;l=_t({snapshot:new CC(s,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dR(t),Aa(t),t.component??t._loadedComponent??null,t,cR(r),w,hR(t)),consumedSegments:[],remainingSegments:[]})}else l=nR(r,t,s,e).pipe((0,vt.U)(({matched:m,consumedSegments:w,remainingSegments:b,parameters:S})=>{if(!m)return null;const N=lR(r)+w.length;return{snapshot:new CC(w,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dR(t),Aa(t),t.component??t._loadedComponent??null,t,cR(r),N,hR(t)),consumedSegments:w,remainingSegments:b}}));return l.pipe(Ri(m=>{if(null===m)return _t(null);const{snapshot:w,consumedSegments:b,remainingSegments:S}=m;e=t._injector??e;const N=t._loadedInjector??e,H=function dk(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:K,slicedSegments:ye}=AC(r,b,S,H.filter(ke=>void 0===ke.redirectTo));if(0===ye.length&&K.hasChildren())return this.processChildren(N,H,K).pipe((0,vt.U)(ke=>null===ke?null:[new bd(w,ke)]));if(0===H.length&&0===ye.length)return _t([new bd(w,[])]);const Fe=Aa(t)===u;return this.processSegment(N,H,K,ye,Fe?qt:u).pipe((0,vt.U)(ke=>null===ke?null:[new bd(w,ke)]))}))}}function hk(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function uR(n){const e=[],t=new Set;for(const r of n){if(!hk(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=uR(r.children);e.push(new bd(r.value,s))}return e.filter(r=>!t.has(r))}function cR(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function lR(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function dR(n){return n.data||{}}function hR(n){return n.resolve||{}}function fR(n){return"string"==typeof n.title||null===n.title}function JS(n){return Ri(e=>{const t=n(e);return t?(0,ln.D)(t).pipe((0,vt.U)(()=>e)):_t(e)})}const iv=new f.OlP("ROUTES");let XS=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,f.f3M)(f.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return _t(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=bf(t.loadComponent()).pipe((0,vt.U)(gR),(0,ts.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),xS(()=>{this.componentLoaders.delete(t)})),s=new wx(r,()=>new If.x).pipe(AS());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return _t({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,vt.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,b,S=!1;Array.isArray(m)?b=m:(w=m.create(t).injector,b=Dx(w.get(iv,[],f.XFs.Self|f.XFs.Optional)));return{routes:b.map(ZS),injector:w}}),xS(()=>{this.childrenLoaders.delete(r)})),l=new wx(u,()=>new If.x).pipe(AS());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return bf(t()).pipe((0,vt.U)(gR),(0,Ds.z)(r=>r instanceof f.YKP||Array.isArray(r)?_t(r):(0,ln.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function gR(n){return function wk(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let PC=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new If.x,this.configLoader=(0,f.f3M)(XS),this.environmentInjector=(0,f.f3M)(f.lqb),this.urlSerializer=(0,f.f3M)(vw),this.rootContexts=(0,f.f3M)(Cw),this.navigationId=0,this.afterPreactivation=()=>_t(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new aO(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new oO(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Sa({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Iw,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Xi(r=>0!==r.id),(0,vt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Ri(r=>{let s=!1,u=!1;return _t(r).pipe((0,ts.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ri(l=>{const m=t.browserUrlTree.toString(),w=!t.navigated||l.extractedUrl.toString()!==m||m!==t.currentUrlTree.toString();if(!w&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const S="";return this.events.next(new DC(l.id,t.serializeUrl(r.rawUrl),S,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Df.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return mR(l.source)&&(t.browserUrlTree=l.extractedUrl),_t(l).pipe(Ri(S=>{const N=this.transitions?.getValue();return this.events.next(new LS(S.id,this.urlSerializer.serialize(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions?.getValue()?Df.E:Promise.resolve(S)}),function sk(n,e,t,r){return Ri(s=>function rk(n,e,t,r,s){return new ik(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,vt.U)(u=>({...s,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,ts.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},r.urlAfterRedirects=S.urlAfterRedirects}),function pk(n,e,t,r,s){return(0,Ds.z)(u=>function uk(n,e,t,r,s,u,l="emptyOnly"){return new ck(n,e,t,r,s,l,u).recognize().pipe(Ri(m=>null===m?function ak(n){return new _r.y(e=>e.error(n))}(new ok):_t(m)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,s).pipe((0,vt.U)(l=>({...u,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,ts.b)(S=>{if(r.targetSnapshot=S.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!S.extras.skipLocationChange){const H=t.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);t.setBrowserUrl(H,S)}t.browserUrlTree=S.urlAfterRedirects}const N=new tO(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(N)}));if(w&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:S,extractedUrl:N,source:H,restoredState:K,extras:ye}=l,Fe=new LS(S,this.urlSerializer.serialize(N),H,K);this.events.next(Fe);const ke=Gx(N,this.rootComponentType).snapshot;return _t(r={...l,targetSnapshot:ke,urlAfterRedirects:N,extras:{...ye,skipLocationChange:!1,replaceUrl:!1}})}{const S="";return this.events.next(new DC(l.id,t.serializeUrl(r.extractedUrl),S,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Df.E}}),(0,ts.b)(l=>{const m=new nO(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(m)}),(0,vt.U)(l=>r={...l,guards:xO(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function jO(n,e){return(0,Ds.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?_t({...t,guardsResult:!0}):function $O(n,e,t,r){return(0,ln.D)(n).pipe((0,Ds.z)(s=>function ZO(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?_t(u.map(m=>{const w=bw(e)??s,b=nv(m,w);return bf(function VO(n){return n&&Aw(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):w.runInContext(()=>b(n,e,t,r))).pipe(Cd())})).pipe(rv()):_t(!0)}(s.component,s.route,t,e,r)),Cd(s=>!0!==s,!0))}(l,r,s,n).pipe((0,Ds.z)(m=>m&&function OO(n){return"boolean"==typeof n}(m)?function HO(n,e,t,r){return(0,ln.D)(e).pipe(Ag(s=>Uw(function zO(n,e){return null!==n&&e&&e(new uO(n)),_t(!0)}(s.route.parent,r),function GO(n,e){return null!==n&&e&&e(new lO(n)),_t(!0)}(s.route,r),function WO(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function RO(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>vx(()=>_t(l.guards.map(w=>{const b=bw(l.node)??t,S=nv(w,b);return bf(function LO(n){return n&&Aw(n.canActivateChild)}(S)?S.canActivateChild(r,n):b.runInContext(()=>S(r,n))).pipe(Cd())})).pipe(rv())));return _t(u).pipe(rv())}(n,s.path,t),function qO(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return _t(!0);const s=r.map(u=>vx(()=>{const l=bw(e)??t,m=nv(u,l);return bf(function FO(n){return n&&Aw(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(Cd())}));return _t(s).pipe(rv())}(n,s.route,t))),Cd(s=>!0!==s,!0))}(r,u,n,e):_t(m)),(0,vt.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,l=>this.events.next(l)),(0,ts.b)(l=>{if(r.guardsResult=l.guardsResult,xg(l.guardsResult))throw Zx(0,l.guardsResult);const m=new rO(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(m)}),Xi(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),JS(l=>{if(l.guards.canActivateChecks.length)return _t(l).pipe((0,ts.b)(m=>{const w=new iO(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}),Ri(m=>{let w=!1;return _t(m).pipe(function gk(n,e){return(0,Ds.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return _t(t);let u=0;return(0,ln.D)(s).pipe(Ag(l=>function mk(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!fR(s)&&(u[mw]=s.title),function yk(n,e,t,r){const s=function vk(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return _t({});const u={};return(0,ln.D)(s).pipe((0,Ds.z)(l=>function _k(n,e,t,r){const s=bw(e)??r,u=nv(n,s);return bf(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Cd(),(0,ts.b)(m=>{u[l]=m}))),MS(1),function MP(n){return(0,vt.U)(()=>n)}(u),Cf(l=>KS(l)?Df.E:gw(l)))}(u,n,e,r).pipe((0,vt.U)(l=>(n._resolvedData=l,n.data=zx(n,t).resolve,s&&fR(s)&&(n.data[mw]=s.title),null)))}(l.route,r,n,e)),(0,ts.b)(()=>u++),MS(1),(0,Ds.z)(l=>u===s.length?_t(t):Df.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,ts.b)({next:()=>w=!0,complete:()=>{w||(t.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,ts.b)(m=>{const w=new sO(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}))}),JS(l=>{const m=w=>{const b=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,ts.b)(S=>{w.component=S}),(0,vt.U)(()=>{})));for(const S of w.children)b.push(...m(S));return b};return mx(m(l.targetSnapshot.root)).pipe(sC(),Ky(1))}),JS(()=>this.afterPreactivation()),(0,vt.U)(l=>{const m=function _O(n,e,t){const r=Dw(n,e._root,t?t._root:void 0);return new Hx(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:m}}),(0,ts.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,vt.U)(r=>(new MO(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),Ky(1),(0,ts.b)({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Rg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),xS(()=>{s||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Cf(l=>{if(u=!0,Qx(l)){Yx(l)||(t.navigated=!0,t.restoreHistory(r,!0));const m=new IC(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(m),Yx(l)){const w=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||mR(r.source)};t.scheduleNavigation(w,Iw,null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const m=new VS(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(m);try{r.resolve(t.errorHandler(l))}catch(w){r.reject(w)}}return Df.E}))}))}cancelNavigationTransition(t,r,s){const u=new IC(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function mR(n){return n!==Iw}let yR=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===qt);return r}getResolvedTitleForRoute(t){return t.data[mw]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Ek)},providedIn:"root"}),n})(),Ek=(()=>{class n extends yR{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(jf))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ik=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Ck)},providedIn:"root"}),n})();class Dk{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Ck=(()=>{class n extends Dk{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const OC=new f.OlP("",{providedIn:"root",factory:()=>({})});let Tk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Sk)},providedIn:"root"}),n})(),Sk=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ak(n){throw n}function Mk(n,e,t){return e.parse("/")}const xk={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Rk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Uo=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,f.f3M)(f.c2e),this.isNgZoneEnabled=!1,this.options=(0,f.f3M)(OC,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Ak,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Mk,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,f.f3M)(Tk),this.routeReuseStrategy=(0,f.f3M)(Ik),this.urlCreationStrategy=(0,f.f3M)(mO),this.titleStrategy=(0,f.f3M)(yR),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Dx((0,f.f3M)(iv,{optional:!0})??[]),this.navigationTransitions=(0,f.f3M)(PC),this.urlSerializer=(0,f.f3M)(vw),this.location=(0,f.f3M)(Ue),this.isNgZoneEnabled=(0,f.f3M)(f.R0b)instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Tf,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Gx(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Iw,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,s){const u={replaceUrl:!0},l=s?.navigationId?s:null;if(s){const w={...s};delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(ZS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:w}=r,b=w?this.currentUrlTree.fragment:l;let S=null;switch(m){case"merge":S={...this.currentUrlTree.queryParams,...u};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}return null!==S&&(S=this.removeEmptyProps(S)),this.urlCreationStrategy.createUrlTree(s,this.routerState,this.currentUrlTree,t,S,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=xg(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,Iw,null,r)}navigate(t,r={skipLocationChange:!1}){return function Nk(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new f.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...xk}:!1===r?{...Rk}:r,xg(t))return Tx(this.currentUrlTree,t,s);const u=this.parseUrl(t);return Tx(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}scheduleNavigation(t,r,s,u,l){if(this.disposed)return Promise.resolve(!1);let m,w,b,S;return l?(m=l.resolve,w=l.reject,b=l.promise):b=new Promise((N,H)=>{m=N,w=H}),S="computed"===this.canceledNavigationResolution?s&&s.\u0275routerPageId?s.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:S,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(s,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(s,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sv=(()=>{class n{constructor(t,r,s,u,l,m){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=l,this.locationStrategy=m,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new If.x;const w=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===w||"area"===w,this.isAnchorElement?this.subscription=t.events.subscribe(b=>{b instanceof Rg&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,f.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,f.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,f.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,s,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||s||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,f.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const s=this.renderer,u=this.el.nativeElement;null!==r?s.setAttribute(u,t,r):s.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Uo),f.Y36(Ng),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(ct))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&f.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&f.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[f.TTD]}),n})(),tA=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,s,u,l){this.router=t,this.element=r,this.renderer=s,this.cdr=u,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new f.vpe,this.routerEventsSubscription=t.events.subscribe(m=>{m instanceof Rg&&this.update()})}ngAfterContentInit(){_t(this.links.changes,_t(null)).pipe((0,wh.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,ln.D)(t).pipe((0,wh.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(s=>!!s)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Pk(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>!!s.urlTree&&t.isActive(s.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Uo),f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(f.sBO),f.Y36(sv,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,s){if(1&t&&f.Suo(s,sv,5),2&t){let u;f.iGM(u=f.CRH())&&(r.links=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[f.TTD]}),n})();class vR{}let Ok=(()=>{class n{constructor(t,r,s,u,l){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Xi(t=>t instanceof Rg),Ag(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,f.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&s.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&s.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,ln.D)(s).pipe((0,wh.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):_t(null);const u=s.pipe((0,Ds.z)(l=>null===l?_t(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,ln.D)([u,l]).pipe((0,wh.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Uo),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(vR),f.LFG(XS))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const nA=new f.OlP("");let _R=(()=>{class n{constructor(t,r,s,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof LS?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Rg&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof jx&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new jx(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();var Bo=(()=>((Bo=Bo||{})[Bo.COMPLETE=0]="COMPLETE",Bo[Bo.FAILED=1]="FAILED",Bo[Bo.REDIRECTING=2]="REDIRECTING",Bo))();const ov=!1;function Sf(n,e){return{\u0275kind:n,\u0275providers:e}}const rA=new f.OlP("",{providedIn:"root",factory:()=>!1});function ER(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(Uo),s=n.get(IR);1===n.get(iA)&&r.initialNavigation(),n.get(DR,null,f.XFs.Optional)?.setUpPreloading(),n.get(nA,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const IR=new f.OlP(ov?"bootstrap done indicator":"",{factory:()=>new If.x}),iA=new f.OlP(ov?"initial navigation":"",{providedIn:"root",factory:()=>1});function Uk(){let n=[];return n=ov?[{provide:f.Xts,multi:!0,useFactory:()=>{const e=(0,f.f3M)(Uo);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function hO(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Sf(1,n)}const DR=new f.OlP(ov?"router preloader":"");function Bk(n){return Sf(0,[{provide:DR,useExisting:Ok},{provide:vR,useExisting:n}])}const xw=!1,CR=new f.OlP(xw?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),jk=[Ue,{provide:vw,useClass:RS},Uo,Cw,{provide:Ng,useFactory:function wR(n){return n.routerState.root},deps:[Uo]},XS,xw?{provide:rA,useValue:!0}:[]];function $k(){return new f.PXZ("Router",Uo)}let bR=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[jk,xw&&r?.enableTracing?Uk().\u0275providers:[],{provide:iv,multi:!0,useValue:t},{provide:CR,useFactory:qk,deps:[[Uo,new f.FiY,new f.tp0]]},{provide:OC,useValue:r||{}},r?.useHash?{provide:ct,useClass:xe}:{provide:ct,useClass:Me},{provide:nA,useFactory:()=>{const n=(0,f.f3M)(Oa),e=(0,f.f3M)(f.R0b),t=(0,f.f3M)(OC),r=(0,f.f3M)(PC),s=(0,f.f3M)(vw);return t.scrollOffset&&n.setOffset(t.scrollOffset),new _R(s,r,n,e,t)}},r?.preloadingStrategy?Bk(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:$k},r?.initialNavigation?Wk(r):[],[{provide:TR,useFactory:ER},{provide:f.tb,multi:!0,useExisting:TR}]]}}static forChild(t){return{ngModule:n,providers:[{provide:iv,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(CR,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[qS]}),n})();function qk(n){if(xw&&n)throw new f.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Wk(n){return["disabled"===n.initialNavigation?Sf(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(Uo);return()=>{e.setUpLocationChangeListener()}}},{provide:iA,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Sf(2,[{provide:iA,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(ce,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(Uo),u=e.get(IR);(function kk(n,e){n.events.pipe(Xi(t=>t instanceof Rg||t instanceof IC||t instanceof VS||t instanceof DC),(0,vt.U)(t=>t instanceof Rg||t instanceof DC?Bo.COMPLETE:t instanceof IC&&(0===t.code||1===t.code)?Bo.REDIRECTING:Bo.FAILED),Xi(t=>t!==Bo.REDIRECTING),Ky(1)).subscribe(()=>{e()})})(s,()=>{r(!0)}),e.get(PC).afterPreactivation=()=>(r(!0),u.closed?_t(void 0):u),s.initialNavigation()}))}}]).\u0275providers:[]]}const TR=new f.OlP(xw?"Router Initializer":"");let sA=(()=>{class n{constructor(){this.data=[{id:10,title:"Clavier sans fil corsaire",unitPrice:40.5},{id:20,title:"Disque SSD 1 To",unitPrice:101.53},{id:30,title:"Ecran Dell 22' OLED 244Mhz",unitPrice:225.37},{id:40,title:"Souris optique ergonomique Logitec",unitPrice:80}]}getAllProducts(){return this.data}getProductById(t){return this.data.find(s=>s.id==t)}addProduct(t){return this.data.find(r=>r.id==t.id)?(console.error("Un objet avec cette id existe d\xe9j\xe0 !"),!1):(this.data.push(t),console.log("Ajout du product : "+t.title),!0)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Kk=function(n){return["/product",n]};function Yk(n,e){if(1&n&&(f.TgZ(0,"tr",7)(1,"td",8)(2,"a",9),f._uU(3),f.qZA()()()),2&n){const t=e.$implicit;f.xp6(2),f.Q6J("routerLink",f.VKq(2,Kk,t.id)),f.xp6(1),f.Oqu(t.title)}}let Qk=(()=>{class n{constructor(t){this._service=t,this.data=[]}ngOnInit(){this.data=this._service.getAllProducts()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(sA))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-products-list"]],decls:13,vars:1,consts:[[1,"card"],[1,"card-header","bg-info","text-white"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],["scope","col"],["class","",4,"ngFor","ngForOf"],[1,""],["scope","row"],["routerLinkActive","router-link-active",3,"routerLink"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"h3"),f._uU(3,"Products List"),f.qZA()(),f.TgZ(4,"div",2)(5,"div",3)(6,"table",4)(7,"thead")(8,"tr")(9,"th",5),f._uU(10,"Title"),f.qZA()()(),f.TgZ(11,"tbody"),f.YNc(12,Yk,4,4,"tr",6),f.qZA()()()()()),2&t&&(f.xp6(12),f.Q6J("ngForOf",r.data))},dependencies:[Qs,sv,tA]}),n})(),Jk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-products-promotions"]],decls:2,vars:0,template:function(t,r){1&t&&(f.TgZ(0,"p"),f._uU(1,"products-promotions works!"),f.qZA())}}),n})(),SR=(()=>{class n{constructor(){this.length=0,this.count=new Sa(this.length),this.countObservable=this.count.asObservable()}addProductToCart(){this.count.next(++this.length),console.log(">>>> Add to cart trigger : "+this.count.value)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Xk=(()=>{class n{constructor(t,r,s){this._activated_route=t,this._service=r,this._cartService=s}ngOnInit(){this._activated_route.paramMap.subscribe({next:t=>{let r=Number(t.get("id"));this.product=this._service.getProductById(r)},error:t=>console.error("Erreur lors de l'invocation du service : "+t)})}addProductToCart(){this._cartService.addProductToCart()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ng),f.Y36(sA),f.Y36(SR))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-products-detail"]],decls:29,vars:8,consts:[[1,"card"],[1,"card-header","bg-info","text-white"],[1,"card-body"],[1,"row"],[1,"col-md-2"],["src","https://placehold.co/150x150","alt","Image de remplacement",1,"img-fluid","rounded"],[1,"col-md-6","align-middle"],[1,"row","mb-3"],[1,"col-md-3"],[1,"col-md-6"],[1,"col-md-6","fw-bold","text-danger"],[1,"card-footer","text-muted"],[1,"d-grid","gap-2","col-md-6","offset-md-3"],["type","button","name","","id","",1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"h5"),f._uU(3),f.qZA()(),f.TgZ(4,"div",2)(5,"div",3)(6,"div",4),f._UZ(7,"img",5),f.qZA(),f.TgZ(8,"div",6)(9,"div",7)(10,"div",8),f._uU(11,"Id"),f.qZA(),f.TgZ(12,"div",9),f._uU(13),f.qZA()(),f.TgZ(14,"div",7)(15,"div",8),f._uU(16,"Title"),f.qZA(),f.TgZ(17,"div",9),f._uU(18),f.qZA()(),f.TgZ(19,"div",7)(20,"div",8),f._uU(21,"Price"),f.qZA(),f.TgZ(22,"div",10),f._uU(23),f.ALo(24,"currency"),f.qZA()()()()(),f.TgZ(25,"div",11)(26,"div",12)(27,"button",13),f.NdJ("click",function(){return r.addProductToCart()}),f._uU(28,"Ajouter au panier"),f.qZA()()()()),2&t&&(f.xp6(3),f.hij("Product details: ",r.product.title,""),f.xp6(10),f.Oqu(r.product.id),f.xp6(5),f.Oqu(r.product.title),f.xp6(5),f.Oqu(f.Dn7(24,4,r.product.unitPrice,"EUR",!0)))},dependencies:[xf]}),n})();function eF(n,e){1&n&&(f.TgZ(0,"div",15),f._uU(1,"The ID is required !"),f.qZA())}function tF(n,e){1&n&&(f.TgZ(0,"div",15),f._uU(1,"The title is required and substring up to 5 caract."),f.qZA())}function nF(n,e){1&n&&(f.TgZ(0,"div",15),f._uU(1,"The ID is required !"),f.qZA())}function rF(n,e){if(1&n&&(f.TgZ(0,"div",15),f._uU(1,"L'id "),f.TgZ(2,"b"),f._uU(3),f.qZA(),f._uU(4," existe d\xe9j\xe0 dans la liste !"),f.qZA()),2&n){const t=f.oxw();f.xp6(3),f.Oqu(t.productForm.get("productId"))}}let iF=(()=>{class n{constructor(t,r){this._fb=t,this._service=r,this.productForm=this._fb.group({productId:[,ks.required],productTitle:["",[ks.required,ks.minLength(5)]],unitPrice:[1,ks.required]}),this.sendError=!1}addProduct(){this._service.addProduct({id:this.productForm.value.productId,title:this.productForm.value.productTitle,unitPrice:this.productForm.value.unitPrice})||(this.sendError=!0),console.log(this.productForm.value)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Cv),f.Y36(sA))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-products-add"]],decls:26,vars:6,consts:[[1,"card"],[1,"card-header","bg-info","text-white"],[1,"card-body","d-flex","justify-content-center"],[1,"col-md-6",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","productId",1,"form-label"],["type","number","formControlName","productId","id","productId","name","productId",1,"form-control"],["for","productTitle",1,"form-label"],["type","text","formControlName","productTitle","id","productTitle",1,"form-control"],["for","unitPrice",1,"form-label"],["type","number","formControlName","unitPrice","id","unitPrice",1,"form-control"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-outline-success",3,"disabled"],[1,"card-footer","text-muted"],["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"]],template:function(t,r){if(1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"h5"),f._uU(3,"Add a new product (Reactiv)"),f.qZA()(),f.TgZ(4,"div",2)(5,"form",3),f.NdJ("ngSubmit",function(){return r.addProduct()}),f.TgZ(6,"div",4)(7,"label",5),f._uU(8,"Product id"),f.qZA(),f._UZ(9,"input",6),f.qZA(),f.TgZ(10,"div",4)(11,"label",7),f._uU(12,"Product title"),f.qZA(),f._UZ(13,"input",8),f.qZA(),f.TgZ(14,"div",4)(15,"label",9),f._uU(16,"Unit price"),f.qZA(),f._UZ(17,"input",10),f.qZA(),f.TgZ(18,"div",11)(19,"button",12),f._uU(20,"Submit"),f.qZA()()()(),f.TgZ(21,"div",13),f.YNc(22,eF,2,0,"div",14),f.YNc(23,tF,2,0,"div",14),f.YNc(24,nF,2,0,"div",14),f.YNc(25,rF,5,1,"div",14),f.qZA()()),2&t){let s,u,l;f.xp6(5),f.Q6J("formGroup",r.productForm),f.xp6(14),f.Q6J("disabled",r.productForm.invalid),f.xp6(3),f.Q6J("ngIf",(null==(s=r.productForm.get("productId"))?null:s.touched)&&(null==(s=r.productForm.get("productId"))?null:s.invalid)),f.xp6(1),f.Q6J("ngIf",(null==(u=r.productForm.get("productTitle"))?null:u.touched)&&(null==(u=r.productForm.get("productTitle"))?null:u.invalid)),f.xp6(1),f.Q6J("ngIf",(null==(l=r.productForm.get("unitPrice"))?null:l.touched)&&(null==(l=r.productForm.get("unitPrice"))?null:l.invalid)),f.xp6(1),f.Q6J("ngIf",r.sendError)}},dependencies:[rs,uu,yc,hh,kl,Fl,hr,zl]}),n})(),AR=(()=>{class n{constructor(t){this._db=t,this.dbPath="/wishlist",this.wishesRef=t.collection(this.dbPath)}getAll(){return this.wishesRef}create(t){return this.wishesRef.add({...t})}update(t,r){return this.wishesRef.doc(t).update(r)}delete(t){return this.wishesRef.doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(gx))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sF(n,e){if(1&n&&(f.TgZ(0,"tr",9)(1,"td",10),f._uU(2),f.qZA(),f.TgZ(3,"td"),f._uU(4),f.qZA(),f.TgZ(5,"td"),f._UZ(6,"img",11),f.qZA()()),2&n){const t=e.$implicit;f.xp6(2),f.Oqu(t.titre),f.xp6(2),f.Oqu(t.marque),f.xp6(2),f.Q6J("src",t.image,f.LSH)}}const oF=function(){return["/addWish"]};let aF=(()=>{class n{constructor(t){this._wishService=t,this.wishs=[]}ngOnInit(){this.retrieveWishes()}retrieveWishes(){this._wishService.getAll().snapshotChanges().pipe((0,vt.U)(t=>t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()})))).subscribe(t=>{this.wishs=t})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(AR))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-wish-list"]],decls:17,vars:3,consts:[[1,""],[1,"table-responsive","mt-4"],[1,"table","table-hover"],[1,"table-light"],["scope","col"],["class","align-middle",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-outline-primary",3,"routerLink"],[1,"align-middle"],["scope","row"],["width","200px","alt","",1,"img-fluid","rounded",3,"src"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"table",2)(3,"thead",3)(4,"tr")(5,"th",4),f._uU(6,"Titre"),f.qZA(),f.TgZ(7,"th",4),f._uU(8,"Marque"),f.qZA(),f.TgZ(9,"th",4),f._uU(10,"Image"),f.qZA()()(),f.TgZ(11,"tbody"),f.YNc(12,sF,7,3,"tr",5),f.qZA()()()(),f.TgZ(13,"div",6)(14,"div",7)(15,"button",8),f._uU(16,"Ajouter un \xe9l\xe9ment"),f.qZA()()()),2&t&&(f.xp6(12),f.Q6J("ngForOf",r.wishs),f.xp6(3),f.Q6J("routerLink",f.DdM(2,oF)))},dependencies:[Qs,sv]}),n})();function uF(n,e){1&n&&(f.TgZ(0,"div",17),f._uU(1,"The ID is required !"),f.qZA())}function cF(n,e){1&n&&(f.TgZ(0,"div",17),f._uU(1,"The title is required and substring up to 5 caract."),f.qZA())}function lF(n,e){1&n&&(f.TgZ(0,"div",17),f._uU(1,"The ID is required !"),f.qZA())}const dF=[{path:"",redirectTo:"products",pathMatch:"full"},{path:"products",component:Qk},{path:"product/:id",component:Xk},{path:"addProduct",component:iF},{path:"wish",component:aF},{path:"addWish",component:(()=>{class n{constructor(t,r){this._wishService=t,this._fb=r,this.wishForm=this._fb.group({titre:["",[ks.required]],marque:["",ks.required],lien:["",ks.required],image:["",ks.required]})}ngOnInit(){}addWish(){let t={titre:this.wishForm.getRawValue().titre,marque:this.wishForm.getRawValue().marque,lien:this.wishForm.getRawValue().lien,image:this.wishForm.getRawValue().image};this._wishService.create(t).then(),this.wishForm.reset()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(AR),f.Y36(Cv))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-wish-add"]],decls:29,vars:5,consts:[[1,"card"],[1,"card-header","bg-info","text-white"],[1,"card-body","d-flex","justify-content-center"],[1,"col-md-6",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","titre",1,"form-label"],["type","text","formControlName","titre","id","titre",1,"form-control"],["for","marque",1,"form-label"],["type","text","formControlName","marque","id","marque",1,"form-control"],["for","lien",1,"form-label"],["type","text","formControlName","lien","id","lien",1,"form-control"],["for","image",1,"form-label"],["type","text","formControlName","image","id","image",1,"form-control"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-outline-success",3,"disabled"],[1,"card-footer","text-muted"],["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"]],template:function(t,r){if(1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"h5"),f._uU(3,"Add a new product (Reactiv)"),f.qZA()(),f.TgZ(4,"div",2)(5,"form",3),f.NdJ("ngSubmit",function(){return r.addWish()}),f.TgZ(6,"div",4)(7,"label",5),f._uU(8,"Titre"),f.qZA(),f._UZ(9,"input",6),f.qZA(),f.TgZ(10,"div",4)(11,"label",7),f._uU(12,"Marque"),f.qZA(),f._UZ(13,"input",8),f.qZA(),f.TgZ(14,"div",4)(15,"label",9),f._uU(16,"Lien"),f.qZA(),f._UZ(17,"input",10),f.qZA(),f.TgZ(18,"div",4)(19,"label",11),f._uU(20,"Image"),f.qZA(),f._UZ(21,"input",12),f.qZA(),f.TgZ(22,"div",13)(23,"button",14),f._uU(24,"Ajouter"),f.qZA()()()(),f.TgZ(25,"div",15),f.YNc(26,uF,2,0,"div",16),f.YNc(27,cF,2,0,"div",16),f.YNc(28,lF,2,0,"div",16),f.qZA()()),2&t){let s,u,l;f.xp6(5),f.Q6J("formGroup",r.wishForm),f.xp6(18),f.Q6J("disabled",r.wishForm.invalid),f.xp6(3),f.Q6J("ngIf",(null==(s=r.wishForm.get("productId"))?null:s.touched)&&(null==(s=r.wishForm.get("productId"))?null:s.invalid)),f.xp6(1),f.Q6J("ngIf",(null==(u=r.wishForm.get("productTitle"))?null:u.touched)&&(null==(u=r.wishForm.get("productTitle"))?null:u.invalid)),f.xp6(1),f.Q6J("ngIf",(null==(l=r.wishForm.get("unitPrice"))?null:l.touched)&&(null==(l=r.wishForm.get("unitPrice"))?null:l.invalid))}},dependencies:[rs,uu,yc,kl,Fl,hr,zl]}),n})()},{path:"promotions",component:Jk}];let hF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[bR.forRoot(dF),bR]}),n})();const MR=function(){return["/products"]},fF=function(){return["/wish"]},pF=function(){return["/addProduct"]};let gF=(()=>{class n{constructor(t){this._cartService=t,this.countBadge=0}ngOnInit(){this._cartService.countObservable.subscribe({next:t=>this.countBadge=t,error:t=>console.error(t)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(SR))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-navbar"]],decls:25,vars:9,consts:[[1,"navbar","sticky-top","navbar-expand-xl",2,"background-color","#e3f2fd"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapsibleNavId","aria-controls","collapsibleNavId","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler","d-lg-none"],[1,"navbar-toggler-icon"],["id","collapsibleNavId",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mt-2","mt-lg-0"],[1,"nav-item"],["routerLinkActive","[active]","aria-current","page",1,"nav-link",3,"routerLink"],[1,"visually-hidden"],["routerLinkActive","[active]",1,"nav-link",3,"routerLink"],[1,"navbar-nav","me-2","mt-2","mt-lg-0"],[1,"bi","bi-cart3"],[1,"badge","bg-success","position-absolute","top-10","translate-middle","badge","rounded-pill"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),f._uU(3,"ProductsApp"),f.qZA(),f.TgZ(4,"button",3),f._UZ(5,"span",4),f.qZA(),f.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),f._uU(10,"Catalogue "),f.TgZ(11,"span",9),f._uU(12,"(current)"),f.qZA()()(),f.TgZ(13,"li",7)(14,"a",10),f._uU(15,"Liste de souhait"),f.qZA()(),f.TgZ(16,"li",7)(17,"a",10),f._uU(18,"Add product"),f.qZA()()(),f.TgZ(19,"ul",11)(20,"li",7)(21,"a",8),f._UZ(22,"i",12),f.TgZ(23,"span",13),f._uU(24),f.qZA()()()()()()()),2&t&&(f.xp6(9),f.Q6J("routerLink",f.DdM(5,MR)),f.xp6(5),f.Q6J("routerLink",f.DdM(6,fF)),f.xp6(3),f.Q6J("routerLink",f.DdM(7,pF)),f.xp6(4),f.Q6J("routerLink",f.DdM(8,MR)),f.xp6(3),f.hij(" ",r.countBadge," "))},dependencies:[sv,tA]}),n})(),mF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-footer"]],decls:4,vars:0,consts:[[1,"mt-3","pb-3","pt-5","bg-light","rounded","border"],[1,"text-center"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"p",1),f._UZ(2,"b"),f._uU(3," - Tous droit r\xe9serv\xe9 !"),f.qZA()())}}),n})(),yF=(()=>{class n{constructor(){this.title="products-app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container-fluid"]],template:function(t,r){1&t&&(f._UZ(0,"app-navbar"),f.TgZ(1,"div",0),f._UZ(2,"router-outlet")(3,"app-footer"),f.qZA())},dependencies:[zS,gF,mF]}),n})(),vF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[yF]}),n.\u0275inj=f.cJS({imports:[ra,Lw,Vw,Us.hO.initializeApp(CP_firebase),DP,hF]}),n})();_l().bootstrapModule(vF).catch(n=>console.error(n))},9751:(gt,be,k)=>{k.d(be,{y:()=>ve});var f=k(2961),Y=k(727),O=k(8822),re=k(9635),ie=k(2416),se=k(576),fe=k(2806);let ve=(()=>{class q{constructor(De){De&&(this._subscribe=De)}lift(De){const We=new q;return We.source=this,We.operator=De,We}subscribe(De,We,ct){const de=function B(q){return q&&q instanceof f.Lv||function j(q){return q&&(0,se.m)(q.next)&&(0,se.m)(q.error)&&(0,se.m)(q.complete)}(q)&&(0,Y.Nn)(q)}(De)?De:new f.Hp(De,We,ct);return(0,fe.x)(()=>{const{operator:Me,source:xe}=this;de.add(Me?Me.call(de,xe):xe?this._subscribe(de):this._trySubscribe(de))}),de}_trySubscribe(De){try{return this._subscribe(De)}catch(We){De.error(We)}}forEach(De,We){return new(We=ce(We))((ct,de)=>{const Me=new f.Hp({next:xe=>{try{De(xe)}catch(Ue){de(Ue),Me.unsubscribe()}},error:de,complete:ct});this.subscribe(Me)})}_subscribe(De){var We;return null===(We=this.source)||void 0===We?void 0:We.subscribe(De)}[O.L](){return this}pipe(...De){return(0,re.U)(De)(this)}toPromise(De){return new(De=ce(De))((We,ct)=>{let de;this.subscribe(Me=>de=Me,Me=>ct(Me),()=>We(de))})}}return q.create=je=>new q(je),q})();function ce(q){var je;return null!==(je=q??ie.v.Promise)&&void 0!==je?je:Promise}},7579:(gt,be,k)=>{k.d(be,{x:()=>fe});var f=k(9751),Y=k(727);const re=(0,k(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=k(8737),se=k(2806);let fe=(()=>{class ce extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const q=new ve(this,this);return q.operator=B,q}_throwIfClosed(){if(this.closed)throw new re}next(B){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const q of this.currentObservers)q.next(B)}})}error(B){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:q}=this;for(;q.length;)q.shift().error(B)}})}complete(){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:q,isStopped:je,observers:De}=this;return q||je?Y.Lc:(this.currentObservers=null,De.push(B),new Y.w0(()=>{this.currentObservers=null,(0,ie.P)(De,B)}))}_checkFinalizedStatuses(B){const{hasError:q,thrownError:je,isStopped:De}=this;q?B.error(je):De&&B.complete()}asObservable(){const B=new f.y;return B.source=this,B}}return ce.create=(j,B)=>new ve(j,B),ce})();class ve extends fe{constructor(j,B){super(),this.destination=j,this.source=B}next(j){var B,q;null===(q=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===q||q.call(B,j)}error(j){var B,q;null===(q=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===q||q.call(B,j)}complete(){var j,B;null===(B=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===B||B.call(j)}_subscribe(j){var B,q;return null!==(q=null===(B=this.source)||void 0===B?void 0:B.subscribe(j))&&void 0!==q?q:Y.Lc}}},2961:(gt,be,k)=>{k.d(be,{Hp:()=>ct,Lv:()=>q});var f=k(576),Y=k(727),O=k(2416),re=k(7849);function ie(){}const se=ce("C",void 0,void 0);function ce(Re,_e,we){return{kind:Re,value:_e,error:we}}var j=k(3410),B=k(2806);class q extends Y.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,Y.Nn)(_e)&&_e.add(this)):this.destination=Ue}static create(_e,we,$e){return new ct(_e,we,$e)}next(_e){this.isStopped?xe(function ve(Re){return ce("N",Re,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?xe(function fe(Re){return ce("E",void 0,Re)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?xe(se,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function De(Re,_e){return je.call(Re,_e)}class We{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:we}=this;if(we.next)try{we.next(_e)}catch($e){de($e)}}error(_e){const{partialObserver:we}=this;if(we.error)try{we.error(_e)}catch($e){de($e)}else de(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(we){de(we)}}}class ct extends q{constructor(_e,we,$e){let Ne;if(super(),(0,f.m)(_e)||!_e)Ne={next:_e??void 0,error:we??void 0,complete:$e??void 0};else{let nt;this&&O.v.useDeprecatedNextContext?(nt=Object.create(_e),nt.unsubscribe=()=>this.unsubscribe(),Ne={next:_e.next&&De(_e.next,nt),error:_e.error&&De(_e.error,nt),complete:_e.complete&&De(_e.complete,nt)}):Ne=_e}this.destination=new We(Ne)}}function de(Re){O.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(Re):(0,re.h)(Re)}function xe(Re,_e){const{onStoppedNotification:we}=O.v;we&&j.z.setTimeout(()=>we(Re,_e))}const Ue={closed:!0,next:ie,error:function Me(Re){throw Re},complete:ie}},727:(gt,be,k)=>{k.d(be,{Lc:()=>se,w0:()=>ie,Nn:()=>fe});var f=k(576);const O=(0,k(3888).d)(ce=>function(B){ce(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((q,je)=>`${je+1}) ${q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var re=k(8737);class ie{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const De of B)De.remove(this);else B.remove(this);const{initialTeardown:q}=this;if((0,f.m)(q))try{q()}catch(De){j=De instanceof O?De.errors:[De]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const De of je)try{ve(De)}catch(We){j=j??[],We instanceof O?j=[...j,...We.errors]:j.push(We)}}if(j)throw new O(j)}}add(j){var B;if(j&&j!==this)if(this.closed)ve(j);else{if(j instanceof ie){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push(j)}}_hasParent(j){const{_parentage:B}=this;return B===j||Array.isArray(B)&&B.includes(j)}_addParent(j){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push(j),B):B?[B,j]:j}_removeParent(j){const{_parentage:B}=this;B===j?this._parentage=null:Array.isArray(B)&&(0,re.P)(B,j)}remove(j){const{_finalizers:B}=this;B&&(0,re.P)(B,j),j instanceof ie&&j._removeParent(this)}}ie.EMPTY=(()=>{const ce=new ie;return ce.closed=!0,ce})();const se=ie.EMPTY;function fe(ce){return ce instanceof ie||ce&&"closed"in ce&&(0,f.m)(ce.remove)&&(0,f.m)(ce.add)&&(0,f.m)(ce.unsubscribe)}function ve(ce){(0,f.m)(ce)?ce():ce.unsubscribe()}},2416:(gt,be,k)=>{k.d(be,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(gt,be,k)=>{k.d(be,{E:()=>Y});const Y=new(k(9751).y)(ie=>ie.complete())},8996:(gt,be,k)=>{k.d(be,{D:()=>_e});var f=k(8421),Y=k(5363),O=k(9468),se=k(9751),ve=k(2202),ce=k(576),j=k(9672);function q(we,$e){if(!we)throw new Error("Iterable cannot be null");return new se.y(Ne=>{(0,j.f)(Ne,$e,()=>{const nt=we[Symbol.asyncIterator]();(0,j.f)(Ne,$e,()=>{nt.next().then(ne=>{ne.done?Ne.complete():Ne.next(ne.value)})},0,!0)})})}var je=k(3670),De=k(8239),We=k(1144),ct=k(6495),de=k(2206),Me=k(4532),xe=k(3260);function _e(we,$e){return $e?function Re(we,$e){if(null!=we){if((0,je.c)(we))return function re(we,$e){return(0,f.Xf)(we).pipe((0,O.R)($e),(0,Y.Q)($e))}(we,$e);if((0,We.z)(we))return function fe(we,$e){return new se.y(Ne=>{let nt=0;return $e.schedule(function(){nt===we.length?Ne.complete():(Ne.next(we[nt++]),Ne.closed||this.schedule())})})}(we,$e);if((0,De.t)(we))return function ie(we,$e){return(0,f.Xf)(we).pipe((0,O.R)($e),(0,Y.Q)($e))}(we,$e);if((0,de.D)(we))return q(we,$e);if((0,ct.T)(we))return function B(we,$e){return new se.y(Ne=>{let nt;return(0,j.f)(Ne,$e,()=>{nt=we[ve.h](),(0,j.f)(Ne,$e,()=>{let ne,Ct;try{({value:ne,done:Ct}=nt.next())}catch(Xe){return void Ne.error(Xe)}Ct?Ne.complete():Ne.next(ne)},0,!0)}),()=>(0,ce.m)(nt?.return)&&nt.return()})}(we,$e);if((0,xe.L)(we))return function Ue(we,$e){return q((0,xe.Q)(we),$e)}(we,$e)}throw(0,Me.z)(we)}(we,$e):(0,f.Xf)(we)}},8421:(gt,be,k)=>{k.d(be,{Xf:()=>je});var f=k(655),Y=k(1144),O=k(8239),re=k(9751),ie=k(3670),se=k(2206),fe=k(4532),ve=k(6495),ce=k(3260),j=k(576),B=k(7849),q=k(8822);function je(Re){if(Re instanceof re.y)return Re;if(null!=Re){if((0,ie.c)(Re))return function De(Re){return new re.y(_e=>{const we=Re[q.L]();if((0,j.m)(we.subscribe))return we.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Re);if((0,Y.z)(Re))return function We(Re){return new re.y(_e=>{for(let we=0;we<Re.length&&!_e.closed;we++)_e.next(Re[we]);_e.complete()})}(Re);if((0,O.t)(Re))return function ct(Re){return new re.y(_e=>{Re.then(we=>{_e.closed||(_e.next(we),_e.complete())},we=>_e.error(we)).then(null,B.h)})}(Re);if((0,se.D)(Re))return Me(Re);if((0,ve.T)(Re))return function de(Re){return new re.y(_e=>{for(const we of Re)if(_e.next(we),_e.closed)return;_e.complete()})}(Re);if((0,ce.L)(Re))return function xe(Re){return Me((0,ce.Q)(Re))}(Re)}throw(0,fe.z)(Re)}function Me(Re){return new re.y(_e=>{(function Ue(Re,_e){var we,$e,Ne,nt;return(0,f.mG)(this,void 0,void 0,function*(){try{for(we=(0,f.KL)(Re);!($e=yield we.next()).done;)if(_e.next($e.value),_e.closed)return}catch(ne){Ne={error:ne}}finally{try{$e&&!$e.done&&(nt=we.return)&&(yield nt.call(we))}finally{if(Ne)throw Ne.error}}_e.complete()})})(Re,_e).catch(we=>_e.error(we))})}},6451:(gt,be,k)=>{k.d(be,{T:()=>se});var f=k(8189),Y=k(8421),O=k(515),re=k(7669),ie=k(8996);function se(...fe){const ve=(0,re.yG)(fe),ce=(0,re._6)(fe,1/0),j=fe;return j.length?1===j.length?(0,Y.Xf)(j[0]):(0,f.J)(ce)((0,ie.D)(j,ve)):O.E}},5403:(gt,be,k)=>{k.d(be,{x:()=>Y});var f=k(2961);function Y(re,ie,se,fe,ve){return new O(re,ie,se,fe,ve)}class O extends f.Lv{constructor(ie,se,fe,ve,ce,j){super(ie),this.onFinalize=ce,this.shouldUnsubscribe=j,this._next=se?function(B){try{se(B)}catch(q){ie.error(q)}}:super._next,this._error=ve?function(B){try{ve(B)}catch(q){ie.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(B){ie.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:se}=this;super.unsubscribe(),!se&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(gt,be,k)=>{k.d(be,{U:()=>O});var f=k(4482),Y=k(5403);function O(re,ie){return(0,f.e)((se,fe)=>{let ve=0;se.subscribe((0,Y.x)(fe,ce=>{fe.next(re.call(ie,ce,ve++))}))})}},8189:(gt,be,k)=>{k.d(be,{J:()=>O});var f=k(5577),Y=k(4671);function O(re=1/0){return(0,f.z)(Y.y,re)}},5577:(gt,be,k)=>{k.d(be,{z:()=>ve});var f=k(4004),Y=k(8421),O=k(4482),re=k(9672),ie=k(5403),fe=k(576);function ve(ce,j,B=1/0){return(0,fe.m)(j)?ve((q,je)=>(0,f.U)((De,We)=>j(q,De,je,We))((0,Y.Xf)(ce(q,je))),B):("number"==typeof j&&(B=j),(0,O.e)((q,je)=>function se(ce,j,B,q,je,De,We,ct){const de=[];let Me=0,xe=0,Ue=!1;const Re=()=>{Ue&&!de.length&&!Me&&j.complete()},_e=$e=>Me<q?we($e):de.push($e),we=$e=>{De&&j.next($e),Me++;let Ne=!1;(0,Y.Xf)(B($e,xe++)).subscribe((0,ie.x)(j,nt=>{je?.(nt),De?_e(nt):j.next(nt)},()=>{Ne=!0},void 0,()=>{if(Ne)try{for(Me--;de.length&&Me<q;){const nt=de.shift();We?(0,re.f)(j,We,()=>we(nt)):we(nt)}Re()}catch(nt){j.error(nt)}}))};return ce.subscribe((0,ie.x)(j,_e,()=>{Ue=!0,Re()})),()=>{ct?.()}}(q,je,ce,B)))}},5363:(gt,be,k)=>{k.d(be,{Q:()=>re});var f=k(9672),Y=k(4482),O=k(5403);function re(ie,se=0){return(0,Y.e)((fe,ve)=>{fe.subscribe((0,O.x)(ve,ce=>(0,f.f)(ve,ie,()=>ve.next(ce),se),()=>(0,f.f)(ve,ie,()=>ve.complete(),se),ce=>(0,f.f)(ve,ie,()=>ve.error(ce),se)))})}},3099:(gt,be,k)=>{k.d(be,{B:()=>ie});var f=k(8421),Y=k(7579),O=k(2961),re=k(4482);function ie(fe={}){const{connector:ve=(()=>new Y.x),resetOnError:ce=!0,resetOnComplete:j=!0,resetOnRefCountZero:B=!0}=fe;return q=>{let je,De,We,ct=0,de=!1,Me=!1;const xe=()=>{De?.unsubscribe(),De=void 0},Ue=()=>{xe(),je=We=void 0,de=Me=!1},Re=()=>{const _e=je;Ue(),_e?.unsubscribe()};return(0,re.e)((_e,we)=>{ct++,!Me&&!de&&xe();const $e=We=We??ve();we.add(()=>{ct--,0===ct&&!Me&&!de&&(De=se(Re,B))}),$e.subscribe(we),!je&&ct>0&&(je=new O.Hp({next:Ne=>$e.next(Ne),error:Ne=>{Me=!0,xe(),De=se(Ue,ce,Ne),$e.error(Ne)},complete:()=>{de=!0,xe(),De=se(Ue,j),$e.complete()}}),(0,f.Xf)(_e).subscribe(je))})(q)}}function se(fe,ve,...ce){if(!0===ve)return void fe();if(!1===ve)return;const j=new O.Hp({next:()=>{j.unsubscribe(),fe()}});return(0,f.Xf)(ve(...ce)).subscribe(j)}},9468:(gt,be,k)=>{k.d(be,{R:()=>Y});var f=k(4482);function Y(O,re=0){return(0,f.e)((ie,se)=>{se.add(O.schedule(()=>ie.subscribe(se),re))})}},8505:(gt,be,k)=>{k.d(be,{b:()=>ie});var f=k(576),Y=k(4482),O=k(5403),re=k(4671);function ie(se,fe,ve){const ce=(0,f.m)(se)||fe||ve?{next:se,error:fe,complete:ve}:se;return ce?(0,Y.e)((j,B)=>{var q;null===(q=ce.subscribe)||void 0===q||q.call(ce);let je=!0;j.subscribe((0,O.x)(B,De=>{var We;null===(We=ce.next)||void 0===We||We.call(ce,De),B.next(De)},()=>{var De;je=!1,null===(De=ce.complete)||void 0===De||De.call(ce),B.complete()},De=>{var We;je=!1,null===(We=ce.error)||void 0===We||We.call(ce,De),B.error(De)},()=>{var De,We;je&&(null===(De=ce.unsubscribe)||void 0===De||De.call(ce)),null===(We=ce.finalize)||void 0===We||We.call(ce)}))}):re.y}},4408:(gt,be,k)=>{k.d(be,{o:()=>ie});var f=k(727);class Y extends f.w0{constructor(fe,ve){super()}schedule(fe,ve=0){return this}}const O={setInterval(se,fe,...ve){const{delegate:ce}=O;return ce?.setInterval?ce.setInterval(se,fe,...ve):setInterval(se,fe,...ve)},clearInterval(se){const{delegate:fe}=O;return(fe?.clearInterval||clearInterval)(se)},delegate:void 0};var re=k(8737);class ie extends Y{constructor(fe,ve){super(fe,ve),this.scheduler=fe,this.work=ve,this.pending=!1}schedule(fe,ve=0){var ce;if(this.closed)return this;this.state=fe;const j=this.id,B=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId(B,j,ve)),this.pending=!0,this.delay=ve,this.id=null!==(ce=this.id)&&void 0!==ce?ce:this.requestAsyncId(B,this.id,ve),this}requestAsyncId(fe,ve,ce=0){return O.setInterval(fe.flush.bind(fe,this),ce)}recycleAsyncId(fe,ve,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return ve;null!=ve&&O.clearInterval(ve)}execute(fe,ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(fe,ve);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,ve){let j,ce=!1;try{this.work(fe)}catch(B){ce=!0,j=B||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:fe,scheduler:ve}=this,{actions:ce}=ve;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(ce,this),null!=fe&&(this.id=this.recycleAsyncId(ve,fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(gt,be,k)=>{k.d(be,{v:()=>O});var f=k(6063);class Y{constructor(ie,se=Y.now){this.schedulerActionCtor=ie,this.now=se}schedule(ie,se=0,fe){return new this.schedulerActionCtor(this,ie).schedule(fe,se)}}Y.now=f.l.now;class O extends Y{constructor(ie,se=Y.now){super(ie,se),this.actions=[],this._active=!1}flush(ie){const{actions:se}=this;if(this._active)return void se.push(ie);let fe;this._active=!0;do{if(fe=ie.execute(ie.state,ie.delay))break}while(ie=se.shift());if(this._active=!1,fe){for(;ie=se.shift();)ie.unsubscribe();throw fe}}}},4986:(gt,be,k)=>{k.d(be,{z:()=>O});var f=k(4408);const O=new(k(7565).v)(f.o)},6063:(gt,be,k)=>{k.d(be,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(gt,be,k)=>{k.d(be,{z:()=>f});const f={setTimeout(Y,O,...re){const{delegate:ie}=f;return ie?.setTimeout?ie.setTimeout(Y,O,...re):setTimeout(Y,O,...re)},clearTimeout(Y){const{delegate:O}=f;return(O?.clearTimeout||clearTimeout)(Y)},delegate:void 0}},2202:(gt,be,k)=>{k.d(be,{h:()=>Y});const Y=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(gt,be,k)=>{k.d(be,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(gt,be,k)=>{k.d(be,{_6:()=>se,jO:()=>re,yG:()=>ie});var f=k(576);function O(fe){return fe[fe.length-1]}function re(fe){return(0,f.m)(O(fe))?fe.pop():void 0}function ie(fe){return function Y(fe){return fe&&(0,f.m)(fe.schedule)}(O(fe))?fe.pop():void 0}function se(fe,ve){return"number"==typeof O(fe)?fe.pop():ve}},8737:(gt,be,k)=>{function f(Y,O){if(Y){const re=Y.indexOf(O);0<=re&&Y.splice(re,1)}}k.d(be,{P:()=>f})},3888:(gt,be,k)=>{function f(Y){const re=Y(ie=>{Error.call(ie),ie.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}k.d(be,{d:()=>f})},2806:(gt,be,k)=>{k.d(be,{O:()=>re,x:()=>O});var f=k(2416);let Y=null;function O(ie){if(f.v.useDeprecatedSynchronousErrorHandling){const se=!Y;if(se&&(Y={errorThrown:!1,error:null}),ie(),se){const{errorThrown:fe,error:ve}=Y;if(Y=null,fe)throw ve}}else ie()}function re(ie){f.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=ie)}},9672:(gt,be,k)=>{function f(Y,O,re,ie=0,se=!1){const fe=O.schedule(function(){re(),se?Y.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(Y.add(fe),!se)return fe}k.d(be,{f:()=>f})},4671:(gt,be,k)=>{function f(Y){return Y}k.d(be,{y:()=>f})},1144:(gt,be,k)=>{k.d(be,{z:()=>f});const f=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(gt,be,k)=>{k.d(be,{D:()=>Y});var f=k(576);function Y(O){return Symbol.asyncIterator&&(0,f.m)(O?.[Symbol.asyncIterator])}},576:(gt,be,k)=>{function f(Y){return"function"==typeof Y}k.d(be,{m:()=>f})},3670:(gt,be,k)=>{k.d(be,{c:()=>O});var f=k(8822),Y=k(576);function O(re){return(0,Y.m)(re[f.L])}},6495:(gt,be,k)=>{k.d(be,{T:()=>O});var f=k(2202),Y=k(576);function O(re){return(0,Y.m)(re?.[f.h])}},8239:(gt,be,k)=>{k.d(be,{t:()=>Y});var f=k(576);function Y(O){return(0,f.m)(O?.then)}},3260:(gt,be,k)=>{k.d(be,{L:()=>re,Q:()=>O});var f=k(655),Y=k(576);function O(ie){return(0,f.FC)(this,arguments,function*(){const fe=ie.getReader();try{for(;;){const{value:ve,done:ce}=yield(0,f.qq)(fe.read());if(ce)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(ve)}}finally{fe.releaseLock()}})}function re(ie){return(0,Y.m)(ie?.getReader)}},4482:(gt,be,k)=>{k.d(be,{A:()=>Y,e:()=>O});var f=k(576);function Y(re){return(0,f.m)(re?.lift)}function O(re){return ie=>{if(Y(ie))return ie.lift(function(se){try{return re(se,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(gt,be,k)=>{k.d(be,{U:()=>O,z:()=>Y});var f=k(4671);function Y(...re){return O(re)}function O(re){return 0===re.length?f.y:1===re.length?re[0]:function(se){return re.reduce((fe,ve)=>ve(fe),se)}}},7849:(gt,be,k)=>{k.d(be,{h:()=>O});var f=k(2416),Y=k(3410);function O(re){Y.z.setTimeout(()=>{const{onUnhandledError:ie}=f.v;if(!ie)throw re;ie(re)})}},4532:(gt,be,k)=>{function f(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(be,{z:()=>f})},655:(gt,be,k)=>{function re(le,he){var Ee={};for(var Te in le)Object.prototype.hasOwnProperty.call(le,Te)&&he.indexOf(Te)<0&&(Ee[Te]=le[Te]);if(null!=le&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(Te=Object.getOwnPropertySymbols(le);He<Te.length;He++)he.indexOf(Te[He])<0&&Object.prototype.propertyIsEnumerable.call(le,Te[He])&&(Ee[Te[He]]=le[Te[He]])}return Ee}function q(le,he,Ee,Te){return new(Ee||(Ee=Promise))(function(Be,lt){function ot($t){try{Je(Te.next($t))}catch(Dt){lt(Dt)}}function xt($t){try{Je(Te.throw($t))}catch(Dt){lt(Dt)}}function Je($t){$t.done?Be($t.value):function He(Be){return Be instanceof Ee?Be:new Ee(function(lt){lt(Be)})}($t.value).then(ot,xt)}Je((Te=Te.apply(le,he||[])).next())})}function Re(le){return this instanceof Re?(this.v=le,this):new Re(le)}function _e(le,he,Ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,Te=Ee.apply(le,he||[]),Be=[];return He={},lt("next"),lt("throw"),lt("return"),He[Symbol.asyncIterator]=function(){return this},He;function lt(nn){Te[nn]&&(He[nn]=function(vn){return new Promise(function(Cn,Sr){Be.push([nn,vn,Cn,Sr])>1||ot(nn,vn)})})}function ot(nn,vn){try{!function xt(nn){nn.value instanceof Re?Promise.resolve(nn.value.v).then(Je,$t):Dt(Be[0][2],nn)}(Te[nn](vn))}catch(Cn){Dt(Be[0][3],Cn)}}function Je(nn){ot("next",nn)}function $t(nn){ot("throw",nn)}function Dt(nn,vn){nn(vn),Be.shift(),Be.length&&ot(Be[0][0],Be[0][1])}}function $e(le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,he=le[Symbol.asyncIterator];return he?he.call(le):(le=function ct(le){var he="function"==typeof Symbol&&Symbol.iterator,Ee=he&&le[he],Te=0;if(Ee)return Ee.call(le);if(le&&"number"==typeof le.length)return{next:function(){return le&&Te>=le.length&&(le=void 0),{value:le&&le[Te++],done:!le}}};throw new TypeError(he?"Object is not iterable.":"Symbol.iterator is not defined.")}(le),Ee={},Te("next"),Te("throw"),Te("return"),Ee[Symbol.asyncIterator]=function(){return this},Ee);function Te(Be){Ee[Be]=le[Be]&&function(lt){return new Promise(function(ot,xt){!function He(Be,lt,ot,xt){Promise.resolve(xt).then(function(Je){Be({value:Je,done:ot})},lt)}(ot,xt,(lt=le[Be](lt)).done,lt.value)})}}}k.d(be,{FC:()=>_e,KL:()=>$e,_T:()=>re,mG:()=>q,qq:()=>Re})},4650:(gt,be,k)=>{k.d(be,{$8M:()=>na,$WT:()=>ur,$Z:()=>Ti,AFp:()=>T0,ALo:()=>$I,AaK:()=>ve,CRH:()=>qc,CZH:()=>ug,CqO:()=>nd,D6c:()=>hT,DdM:()=>Q_,Dn7:()=>or,EJc:()=>M0,F4k:()=>FE,FYo:()=>xv,FiY:()=>Ya,GfV:()=>Gw,Gpc:()=>B,JOm:()=>Di,LFG:()=>sn,LSH:()=>vh,Lbi:()=>A0,Lck:()=>NI,MMx:()=>$c,NdJ:()=>Jm,OlP:()=>Kt,Oqu:()=>E_,P3R:()=>ql,PXZ:()=>j0,Q6J:()=>Lh,QGY:()=>l_,Qsj:()=>Rv,R0b:()=>Ks,RDi:()=>Qg,Rgc:()=>tf,SBq:()=>js,Sil:()=>lD,Suo:()=>zc,TTD:()=>al,TgZ:()=>Zm,VKq:()=>J_,X6Q:()=>iT,XFs:()=>ht,Xpm:()=>Oi,Xts:()=>Fw,Y36:()=>Kl,YKP:()=>Kp,YNc:()=>xp,Yjl:()=>jt,Yz7:()=>Dt,Z0I:()=>Sr,ZZ4:()=>_g,_Bn:()=>Fn,_UZ:()=>Np,_Vd:()=>Ir,_c5:()=>yf,_uU:()=>w_,aQg:()=>ba,c2e:()=>Qb,cJS:()=>vn,cg1:()=>_a,dDg:()=>yD,dqk:()=>en,eFA:()=>pg,eJc:()=>m0,ekj:()=>ma,eoX:()=>vD,f3M:()=>Rn,g9A:()=>cD,h0i:()=>Tu,hGG:()=>dT,hij:()=>sy,iGM:()=>h0,ifc:()=>pe,ip1:()=>hf,jDz:()=>G_,kL8:()=>Iu,lG2:()=>Et,lqb:()=>ys,lri:()=>O0,n5z:()=>cc,oAB:()=>X,oxw:()=>Pe,q4F:()=>lp,qLn:()=>Wl,qOj:()=>Ph,qZA:()=>Km,rWj:()=>k0,sBO:()=>z0,s_b:()=>nf,soG:()=>My,tb:()=>hg,tp0:()=>Ja,uIk:()=>$m,vHH:()=>de,vpe:()=>Fo,wAp:()=>yt,xp6:()=>Uv,z2F:()=>mg,zSh:()=>Tv,zs3:()=>du});var f=k(7579),Y=k(727),O=k(9751),re=k(6451),ie=k(3099);function se(i){for(let o in i)if(i[o]===se)return o;throw Error("Could not find renamed property on target object.")}function fe(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function ve(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ve).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ce(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const j=se({__forward_ref__:se});function B(i){return i.__forward_ref__=B,i.toString=function(){return ve(this())},i}function q(i){return je(i)?i():i}function je(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===B}function De(i){return i&&!!i.\u0275providers}const ct="https://g.co/ng/security#xss";class de extends Error{constructor(o,a){super(Me(o,a)),this.code=o}}function Me(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}function xe(i){return"string"==typeof i?i:null==i?"":String(i)}function $e(i,o){throw new de(-201,!1)}function lt(i,o){null==i&&function ot(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function Dt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function vn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Cn(i){return Vr(i,fi)||Vr(i,Ys)}function Sr(i){return null!==Cn(i)}function Vr(i,o){return i.hasOwnProperty(o)?i[o]:null}function Cs(i){return i&&(i.hasOwnProperty(jo)||i.hasOwnProperty(Mr))?i[jo]:null}const fi=se({\u0275prov:se}),jo=se({\u0275inj:se}),Ys=se({ngInjectableDef:se}),Mr=se({ngInjectorDef:se});var ht=(()=>((ht=ht||{})[ht.Default=0]="Default",ht[ht.Host=1]="Host",ht[ht.Self=2]="Self",ht[ht.SkipSelf=4]="SkipSelf",ht[ht.Optional=8]="Optional",ht))();let Yr;function mr(i){const o=Yr;return Yr=i,o}function Ur(i,o,a){const c=Cn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&ht.Optional?null:void 0!==o?o:void $e(ve(i))}const en=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),pi={},Qr="__NG_DI_FLAG__",ar="ngTempTokenPath",Br="ngTokenPath",Sn=/\n/gm,Jr="\u0275",gn="__source";let bs;function Zt(i){const o=bs;return bs=i,o}function zi(i,o=ht.Default){if(void 0===bs)throw new de(-203,!1);return null===bs?Ur(i,void 0,o):bs.get(i,o&ht.Optional?null:void 0,o)}function sn(i,o=ht.Default){return(function rl(){return Yr}()||zi)(q(i),o)}function Rn(i,o=ht.Default){return sn(i,Hn(o))}function Hn(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Ni(i){const o=[];for(let a=0;a<i.length;a++){const c=q(i[a]);if(Array.isArray(c)){if(0===c.length)throw new de(900,!1);let d,g=ht.Default;for(let v=0;v<c.length;v++){const I=c[v],C=Pi(I);"number"==typeof C?-1===C?d=I.token:g|=C:d=I}o.push(sn(d,g))}else o.push(sn(c))}return o}function En(i,o){return i[Qr]=o,i.prototype[Qr]=o,i}function Pi(i){return i[Qr]}function L(i){return{toString:i}.toString()}var z=(()=>((z=z||{})[z.OnPush=0]="OnPush",z[z.Default=1]="Default",z))(),pe=(()=>{return(i=pe||(pe={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",pe;var i})();const Q={},Oe=[],bt=se({\u0275cmp:se}),Yt=se({\u0275dir:se}),Ln=se({\u0275pipe:se}),bn=se({\u0275mod:se}),cn=se({\u0275fac:se}),zt=se({__NG_ELEMENT_ID__:se});let xr=0;function Oi(i){return L(()=>{const o=Pu(i),a={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===z.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,data:i.data||{},encapsulation:i.encapsulation||pe.Emulated,id:"c"+xr++,styles:i.styles||Oe,_:null,schemas:i.schemas||null,tView:null};Af(a);const c=i.dependencies;return a.directiveDefs=$o(c,!1),a.pipeDefs=$o(c,!0),a})}function Ma(i){return ft(i)||tn(i)}function ae(i){return null!==i}function X(i){return L(()=>({type:i.type,bootstrap:i.bootstrap||Oe,declarations:i.declarations||Oe,imports:i.imports||Oe,exports:i.exports||Oe,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function dt(i,o){if(null==i)return Q;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=c,o&&(o[d]=g)}return a}function Et(i){return L(()=>{const o=Pu(i);return Af(o),o})}function jt(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function ft(i){return i[bt]||null}function tn(i){return i[Yt]||null}function Qt(i){return i[Ln]||null}function ur(i){const o=ft(i)||tn(i)||Qt(i);return null!==o&&o.standalone}function Gn(i,o){const a=i[bn]||null;if(!a&&!0===o)throw new Error(`Type ${ve(i)} does not have '\u0275mod' property.`);return a}function Pu(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,exportAs:i.exportAs||null,standalone:!0===i.standalone,selectors:i.selectors||Oe,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:dt(i.inputs,o),outputs:dt(i.outputs)}}function Af(i){i.features?.forEach(o=>o(i))}function $o(i,o){if(!i)return null;const a=o?Qt:Ma;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(ae)}const mi=0,qe=1,kt=2,In=3,yi=4,fn=5,zn=6,Qs=7,Nn=8,xa=9,rs=10,Lt=11,Ra=12,Js=13,is=14,Xs=15,Vn=16,Ho=17,ss=18,Wi=19,Go=20,yr=21,_n=22,Na=1,il=2,zo=7,Ts=8,eo=9,cr=10;function ei(i){return Array.isArray(i)&&"object"==typeof i[Na]}function ti(i){return Array.isArray(i)&&!0===i[Na]}function Pa(i){return 0!=(4&i.flags)}function qo(i){return i.componentOffset>-1}function sl(i){return 1==(1&i.flags)}function vi(i){return!!i.template}function ku(i){return 0!=(256&i[kt])}function Zi(i,o){return i.hasOwnProperty(cn)?i[cn]:null}class to{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function al(){return Oa}function Oa(i){return i.type.prototype.ngOnChanges&&(i.setInput=ul),xd}function xd(){const i=Pf(this),o=i?.current;if(o){const a=i.previous;if(a===Q)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function ul(i,o,a,c){const d=this.declaredInputs[a],g=Pf(i)||function Vu(i,o){return i[Ss]=o}(i,{previous:Q,current:null}),v=g.current||(g.current={}),I=g.previous,C=I[d];v[d]=new to(C&&C.currentValue,o,I===Q),i[c]=o}al.ngInherit=!0;const Ss="__ngSimpleChanges__";function Pf(i){return i[Ss]||null}const $r=function(i,o,a){};function lr(i){for(;Array.isArray(i);)i=i[mi];return i}function us(i,o){return lr(o[i])}function dr(i,o){return lr(o[i.index])}function Nd(i,o){return i.data[o]}function er(i,o){const a=o[i];return ei(a)?a:a[mi]}function cs(i){return 64==(64&i[kt])}function Ms(i,o){return null==o?null:i[o]}function Ko(i){i[ss]=0}function Fa(i,o){i[fn]+=o;let a=i,c=i[In];for(;null!==c&&(1===o&&1===a[fn]||-1===o&&0===a[fn]);)c[fn]+=o,a=c,c=c[In]}const Mt={lFrame:dl(null),bindingsEnabled:!0};function $u(){return Mt.bindingsEnabled}function ue(){return Mt.lFrame.lView}function Ft(){return Mt.lFrame.tView}function tr(){let i=no();for(;null!==i&&64===i.type;)i=i.parent;return i}function no(){return Mt.lFrame.currentTNode}function Hr(i,o){const a=Mt.lFrame;a.currentTNode=i,a.isParent=o}function Ld(){return Mt.lFrame.isParent}function qn(){const i=Mt.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function ro(){return Mt.lFrame.bindingIndex++}function Wu(i,o){const a=Mt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Wn(o)}function Wn(i){Mt.lFrame.currentDirectiveIndex=i}function ll(){return Mt.lFrame.currentQueryIndex}function Zu(i){Mt.lFrame.currentQueryIndex=i}function Ud(i){const o=i[qe];return 2===o.type?o.declTNode:1===o.type?i[zn]:null}function Ku(i,o,a){if(a&ht.SkipSelf){let d=o,g=i;for(;!(d=d.parent,null!==d||a&ht.Host||(d=Ud(g),null===d||(g=g[Xs],10&d.type))););if(null===d)return!1;o=d,i=g}const c=Mt.lFrame=Ba();return c.currentTNode=o,c.lView=i,!0}function Yu(i){const o=Ba(),a=i[qe];Mt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Ba(){const i=Mt.lFrame,o=null===i?null:i.child;return null===o?dl(i):o}function dl(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function ja(){const i=Mt.lFrame;return Mt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Bd=ja;function Qu(){const i=ja();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function vr(){return Mt.lFrame.selectedIndex}function ds(i){Mt.lFrame.selectedIndex=i}function Tn(){const i=Mt.lFrame;return Nd(i.tView,i.selectedIndex)}function ec(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const g=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:R}=g;v&&(i.contentHooks??(i.contentHooks=[])).push(-a,v),I&&((i.contentHooks??(i.contentHooks=[])).push(a,I),(i.contentCheckHooks??(i.contentCheckHooks=[])).push(a,I)),C&&(i.viewHooks??(i.viewHooks=[])).push(-a,C),A&&((i.viewHooks??(i.viewHooks=[])).push(a,A),(i.viewCheckHooks??(i.viewCheckHooks=[])).push(a,A)),null!=R&&(i.destroyHooks??(i.destroyHooks=[])).push(a,R)}}function hl(i,o,a){pl(i,o,3,a)}function fl(i,o,a,c){(3&i[kt])===a&&pl(i,o,a,c)}function $d(i,o){let a=i[kt];(3&a)===o&&(a&=2047,a+=1,i[kt]=a)}function pl(i,o,a,c){const g=c??-1,v=o.length-1;let I=0;for(let C=void 0!==c?65535&i[ss]:0;C<v;C++)if("number"==typeof o[C+1]){if(I=o[C],null!=c&&I>=c)break}else o[C]<0&&(i[ss]+=65536),(I<g||-1==g)&&(Qo(i,a,o,C),i[ss]=(4294901760&i[ss])+C+2),C++}function Qo(i,o,a,c){const d=a[c]<0,g=a[c+1],I=i[d?-a[c]:a[c]];if(d){if(i[kt]>>11<i[ss]>>16&&(3&i[kt])===o){i[kt]+=2048,$r(4,I,g);try{g.call(I)}finally{$r(5,I,g)}}}else{$r(4,I,g);try{g.call(I)}finally{$r(5,I,g)}}}const Jo=-1;class hs{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Xo(i,o,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const g=a[c++],v=a[c++],I=a[c++];i.setAttribute(o,v,I,g)}else{const g=d,v=a[++c];ao(g)?i.setProperty(o,g,v):i.setAttribute(o,g,v),c++}}return c}function gl(i){return 3===i||4===i||6===i}function ao(i){return 64===i.charCodeAt(0)}function uo(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||rc(i,a,d,null,-1===a||2===a?o[++c]:null)}}return i}function rc(i,o,a,c,d){let g=0,v=i.length;if(-1===o)v=-1;else for(;g<i.length;){const I=i[g++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=g-1;break}}}for(;g<i.length;){const I=i[g];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==d&&(i[g+1]=d));if(c===i[g+1])return void(i[g+2]=d)}g++,null!==c&&g++,null!==d&&g++}-1!==v&&(i.splice(v,0,o),g=v+1),i.splice(g++,0,a),null!==c&&i.splice(g++,0,c),null!==d&&i.splice(g++,0,d)}function co(i){return i!==Jo}function xs(i){return 32767&i}function lo(i,o){let a=function Hd(i){return i>>16}(i),c=o;for(;a>0;)c=c[Xs],a--;return c}let ic=!0;function Ha(i){const o=ic;return ic=i,o}const sc=255,Gd=5;let ho=0;const Fi={};function ml(i,o){const a=ta(i,o);if(-1!==a)return a;const c=o[qe];c.firstCreatePass&&(i.injectorIndex=o.length,ea(c.data,i),ea(o,null),ea(c.blueprint,null));const d=zd(i,o),g=i.injectorIndex;if(co(d)){const v=xs(d),I=lo(d,o),C=I[qe].data;for(let A=0;A<8;A++)o[g+A]=I[v+A]|C[v+A]}return o[g+8]=d,g}function ea(i,o){i.push(0,0,0,0,0,0,0,0,o)}function ta(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function zd(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){if(c=qa(d),null===c)return Jo;if(a++,d=d[Xs],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return Jo}function mn(i,o,a){!function fs(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(zt)&&(c=a[zt]),null==c&&(c=a[zt]=ho++);const d=c&sc;o.data[i+(d>>Gd)]|=1<<d}(i,o,a)}function oc(i,o,a){if(a&ht.Optional||void 0!==i)return i;$e()}function yl(i,o,a,c){if(a&ht.Optional&&void 0===c&&(c=null),!(a&(ht.Self|ht.Host))){const d=i[xa],g=mr(void 0);try{return d?d.get(o,c,a&ht.Optional):Ur(o,c,a&ht.Optional)}finally{mr(g)}}return oc(c,0,a)}function ac(i,o,a,c=ht.Default,d){if(null!==i){if(1024&o[kt]){const v=function _l(i,o,a,c,d){let g=i,v=o;for(;null!==g&&null!==v&&1024&v[kt]&&!(256&v[kt]);){const I=uc(g,v,a,c|ht.Self,Fi);if(I!==Fi)return I;let C=g.parent;if(!C){const A=v[yr];if(A){const R=A.get(a,Fi,c);if(R!==Fi)return R}C=qa(v),v=v[Xs]}g=C}return d}(i,o,a,c,Fi);if(v!==Fi)return v}const g=uc(i,o,a,c,Fi);if(g!==Fi)return g}return yl(o,a,c,d)}function uc(i,o,a,c,d){const g=function vl(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(zt)?i[zt]:void 0;return"number"==typeof o?o>=0?o&sc:Uf:o}(a);if("function"==typeof g){if(!Ku(o,i,c))return c&ht.Host?oc(d,0,c):yl(o,a,c,d);try{const v=g(c);if(null!=v||c&ht.Optional)return v;$e()}finally{Bd()}}else if("number"==typeof g){let v=null,I=ta(i,o),C=Jo,A=c&ht.Host?o[Vn][zn]:null;for((-1===I||c&ht.SkipSelf)&&(C=-1===I?zd(i,o):o[I+8],C!==Jo&&za(c,!1)?(v=o[qe],I=xs(C),o=lo(C,o)):I=-1);-1!==I;){const R=o[qe];if(Ga(g,I,R.data)){const F=nr(I,o,a,v,c,A);if(F!==Fi)return F}C=o[I+8],C!==Jo&&za(c,o[qe].data[I+8]===A)&&Ga(g,I,o)?(v=R,I=xs(C),o=lo(C,o)):I=-1}}return d}function nr(i,o,a,c,d,g){const v=o[qe],I=v.data[i+8],R=fo(I,v,a,null==c?qo(I)&&ic:c!=v&&0!=(3&I.type),d&ht.Host&&g===I);return null!==R?Un(o,v,R,I):Fi}function fo(i,o,a,c,d){const g=i.providerIndexes,v=o.data,I=1048575&g,C=i.directiveStart,R=g>>20,G=d?I+R:i.directiveEnd;for(let J=c?I:I+R;J<G;J++){const me=v[J];if(J<C&&a===me||J>=C&&me.type===a)return J}if(d){const J=v[C];if(J&&vi(J)&&J.type===a)return C}return null}function Un(i,o,a,c){let d=i[a];const g=o.data;if(function Bg(i){return i instanceof hs}(d)){const v=d;v.resolving&&function Re(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new de(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Ue(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():xe(i)}(g[a]));const I=Ha(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?mr(v.injectImpl):null;Ku(i,c,ht.Default);try{d=i[a]=v.factory(void 0,g,i,c),o.firstCreatePass&&a>=c.directiveStart&&function Ug(i,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(c){const v=Oa(o);(a.preOrderHooks??(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(i,v)}d&&(a.preOrderHooks??(a.preOrderHooks=[])).push(0-i,d),g&&((a.preOrderHooks??(a.preOrderHooks=[])).push(i,g),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(i,g))}(a,g[a],o)}finally{null!==C&&mr(C),Ha(I),v.resolving=!1,Bd()}}return d}function Ga(i,o,a){return!!(a[o+(i>>Gd)]&1<<i)}function za(i,o){return!(i&ht.Self||i&ht.Host&&o)}class ps{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return ac(this._tNode,this._lView,o,Hn(c),a)}}function Uf(){return new ps(tr(),ue())}function cc(i){return L(()=>{const o=i.prototype.constructor,a=o[cn]||po(o),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const g=d[cn]||po(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function po(i){return je(i)?()=>{const o=po(q(i));return o&&o()}:Zi(i)}function qa(i){const o=i[qe],a=o.type;return 2===a?o.declTNode:1===a?i[zn]:null}function na(i){return function qd(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const g=a[d];if(gl(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(g===o)return a[d+1];d+=2}}}return null}(tr(),i)}const ra="__parameters__";function mo(i,o,a){return L(()=>{const c=function go(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...g){if(this instanceof d)return c.apply(this,g),this;const v=new d(...g);return I.annotation=v,I;function I(C,A,R){const F=C.hasOwnProperty(ra)?C[ra]:Object.defineProperty(C,ra,{value:[]})[ra];for(;F.length<=R;)F.push(null);return(F[R]=F[R]||[]).push(v),C}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class Kt{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Dt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Yi(i,o){i.forEach(a=>Array.isArray(a)?Yi(a,o):o(a))}function Gf(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function vo(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Gr(i,o,a){let c=_r(i,o);return c>=0?i[1|c]=a:(c=~c,function Dl(i,o,a,c){let d=i.length;if(d==o)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function ln(i,o){const a=_r(i,o);if(a>=0)return i[1|a]}function _r(i,o){return function Ns(i,o,a){let c=0,d=i.length>>a;for(;d!==c;){const g=c+(d-c>>1),v=i[g<<a];if(o===v)return g<<a;v>o?d=g:c=g+1}return~(d<<a)}(i,o,1)}const Ya=En(mo("Optional"),8),Ja=En(mo("SkipSelf"),4);var Di=(()=>((Di=Di||{})[Di.Important=1]="Important",Di[Di.DashCase=2]="DashCase",Di))();const Ol=new Map;let Wf=0;const W="__ngContext__";function te(i,o){ei(o)?(i[W]=o[Go],function kl(i){Ol.set(i[Go],i)}(o)):i[W]=o}let Pr;function Co(i,o){return Pr(i,o)}function bo(i){const o=i[In];return ti(o)?o[In]:o}function Ic(i){return Cc(i[Js])}function Dc(i){return Cc(i[yi])}function Cc(i){for(;null!==i&&!ti(i);)i=i[yi];return i}function ca(i,o,a,c,d){if(null!=c){let g,v=!1;ti(c)?g=c:ei(c)&&(v=!0,c=c[mi]);const I=lr(c);0===i&&null!==a?null==d?oh(o,a,I):da(o,a,I,d||null,!0):1===i&&null!==a?da(o,a,I,d||null,!0):2===i?function au(i,o,a){const c=ah(i,o);c&&function fv(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,I,v):3===i&&o.destroyNode(I),null!=g&&function Pw(i,o,a,c,d){const g=a[zo];g!==lr(a)&&ca(o,i,c,g,d);for(let I=cr;I<a.length;I++){const C=a[I];Ac(C[qe],C,i,o,c,g)}}(o,i,g,a,d)}}function Gg(i,o,a){return i.createElement(o,a)}function Tc(i,o){const a=i[eo],c=a.indexOf(o),d=o[In];512&o[kt]&&(o[kt]&=-513,Fa(d,-1)),a.splice(c,1)}function la(i,o){if(i.length<=cr)return;const a=cr+o,c=i[a];if(c){const d=c[Ho];null!==d&&d!==i&&Tc(d,c),o>0&&(i[a-1][yi]=c[yi]);const g=vo(i,cr+o);!function Rw(i,o){Ac(i,o,o[Lt],2,null,null),o[mi]=null,o[zn]=null}(c[qe],c);const v=g[Wi];null!==v&&v.detachView(g[qe]),c[In]=null,c[yi]=null,c[kt]&=-65}return c}function Ul(i,o){if(!(128&o[kt])){const a=o[Lt];a.destroyNode&&Ac(i,o,a,3,null,null),function bc(i){let o=i[Js];if(!o)return Bl(i[qe],i);for(;o;){let a=null;if(ei(o))a=o[Js];else{const c=o[cr];c&&(a=c)}if(!a){for(;o&&!o[yi]&&o!==i;)ei(o)&&Bl(o[qe],o),o=o[In];null===o&&(o=i),ei(o)&&Bl(o[qe],o),a=o&&o[yi]}o=a}}(o)}}function Bl(i,o){if(!(128&o[kt])){o[kt]&=-65,o[kt]|=128,function ih(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof hs)){const g=a[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const I=d[g[v]],C=g[v+1];$r(4,I,C);try{C.call(I)}finally{$r(5,I,C)}}else{$r(4,d,g);try{g.call(d)}finally{$r(5,d,g)}}}}}(i,o),function Yf(i,o){const a=i.cleanup,c=o[Qs];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const v=a[g+3];v>=0?c[d=v]():c[d=-v].unsubscribe(),g+=2}else{const v=c[d=a[g+1]];a[g].call(v)}if(null!==c){for(let g=d+1;g<c.length;g++)(0,c[g])();o[Qs]=null}}(i,o),1===o[qe].type&&o[Lt].destroy();const a=o[Ho];if(null!==a&&ti(o[In])){a!==o[In]&&Tc(a,o);const c=o[Wi];null!==c&&c.detachView(i)}!function E(i){Ol.delete(i[Go])}(o)}}function sh(i,o,a){return function zg(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[mi];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:g}=i.data[c.directiveStart+d];if(g===pe.None||g===pe.Emulated)return null}return dr(c,a)}}(i,o.parent,a)}function da(i,o,a,c,d){i.insertBefore(o,a,c,d)}function oh(i,o,a){i.appendChild(o,a)}function Qf(i,o,a,c,d){null!==c?da(i,o,a,c,d):oh(i,o,a)}function ah(i,o){return i.parentNode(o)}let ep,uu,Rc,uh=function Xf(i,o,a){return 40&i.type?dr(i,a):null};function ha(i,o,a,c){const d=sh(i,c,o),g=o[Lt],I=function qg(i,o,a){return uh(i,o,a)}(c.parent||o[zn],c,o);if(null!=d)if(Array.isArray(a))for(let C=0;C<a.length;C++)Qf(g,d,a[C],I,!1);else Qf(g,d,a,I,!1);void 0!==ep&&ep(g,c,o,a,d)}function ch(i,o){if(null!==o){const a=o.type;if(3&a)return dr(o,i);if(4&a)return Sc(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return ch(i,c);{const d=i[o.index];return ti(d)?Sc(-1,d):lr(d)}}if(32&a)return Co(o,i)()||lr(i[o.index]);{const c=pv(i,o);return null!==c?Array.isArray(c)?c[0]:ch(bo(i[Vn]),c):ch(i,o.next)}}return null}function pv(i,o){return null!==o?i[Vn][zn].projection[o.projection]:null}function Sc(i,o){const a=cr+i+1;if(a<o.length){const c=o[a],d=c[qe].firstChild;if(null!==d)return ch(c,d)}return o[zo]}function $l(i,o,a,c,d,g,v){for(;null!=a;){const I=c[a.index],C=a.type;if(v&&0===o&&(I&&te(lr(I),c),a.flags|=2),32!=(32&a.flags))if(8&C)$l(i,o,a.child,c,d,g,!1),ca(o,i,d,I,g);else if(32&C){const A=Co(a,c);let R;for(;R=A();)ca(o,i,d,R,g);ca(o,i,d,I,g)}else 16&C?Mc(i,o,c,a,d,g):ca(o,i,d,I,g);a=v?a.projectionNext:a.next}}function Ac(i,o,a,c,d,g){$l(a,c,i.firstChild,o,d,g,!1)}function Mc(i,o,a,c,d,g){const v=a[Vn],C=v[zn].projection[c.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)ca(o,i,d,C[A],g);else $l(i,o,C,v[In],d,g,!0)}function Hl(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function mv(i,o,a){const{mergedAttrs:c,classes:d,styles:g}=a;null!==c&&Xo(i,o,c),null!==d&&Hl(i,o,d),null!==g&&function Wg(i,o,a){i.setAttribute(o,"style",a)}(i,o,g)}function Qg(i){uu=i}function fh(i){return function Jg(){if(void 0===Rc&&(Rc=null,en.trustedTypes))try{Rc=en.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Rc}()?.createScriptURL(i)||i}class Xg{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ct})`}}function hr(i){return i instanceof Xg?i.changingThisBreaksApplicationSecurity:i}function Pc(i,o){const a=function rp(i){return i instanceof Xg&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${ct})`)}return a===o}const rm=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Bn=(()=>((Bn=Bn||{})[Bn.NONE=0]="NONE",Bn[Bn.HTML=1]="HTML",Bn[Bn.STYLE=2]="STYLE",Bn[Bn.SCRIPT=3]="SCRIPT",Bn[Bn.URL=4]="URL",Bn[Bn.RESOURCE_URL=5]="RESOURCE_URL",Bn))();function vh(i){const o=om();return o?o.sanitize(Bn.URL,i)||"":Pc(i,"URL")?hr(i):function mh(i){return(i=String(i)).match(rm)?i:"unsafe:"+i}(xe(i))}function sm(i){const o=om();if(o)return fh(o.sanitize(Bn.RESOURCE_URL,i)||"");if(Pc(i,"ResourceURL"))return fh(hr(i));throw new de(904,!1)}function ql(i,o,a){return function kw(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?sm:vh}(o,a)(i)}function om(){const i=ue();return i&&i[Ra]}const Fw=new Kt("ENVIRONMENT_INITIALIZER"),Lw=new Kt("INJECTOR",-1),Vw=new Kt("INJECTOR_DEF_TYPES");class Us{get(o,a=pi){if(a===pi){const c=new Error(`NullInjectorError: No provider for ${ve(o)}!`);throw c.name="NullInjectorError",c}return a}}function _t(...i){return{\u0275providers:zr(0,i),\u0275fromNgModule:!0}}function zr(i,...o){const a=[],c=new Set;let d;return Yi(o,g=>{const v=g;bv(v,a,[],c)&&(d||(d=[]),d.push(v))}),void 0!==d&&wh(d,a),a}function wh(i,o){for(let a=0;a<i.length;a++){const{providers:d}=i[a];si(d,g=>{o.push(g)})}}function bv(i,o,a,c){if(!(i=q(i)))return!1;let d=null,g=Cs(i);const v=!g&&ft(i);if(g||v){if(v&&!v.standalone)return!1;d=i}else{const C=i.ngModule;if(g=Cs(C),!g)return!1;d=C}const I=c.has(d);if(v){if(I)return!1;if(c.add(d),v.dependencies){const C="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const A of C)bv(A,o,a,c)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let A;c.add(d);try{Yi(g.imports,R=>{bv(R,o,a,c)&&(A||(A=[]),A.push(R))})}finally{}void 0!==A&&wh(A,o)}if(!I){const A=Zi(d)||(()=>new d);o.push({provide:d,useFactory:A,deps:Oe},{provide:Vw,useValue:d,multi:!0},{provide:Fw,useValue:()=>sn(d),multi:!0})}const C=g.providers;null==C||I||si(C,R=>{o.push(R)})}}return d!==i&&void 0!==i.providers}function si(i,o){for(let a of i)De(a)&&(a=a.\u0275providers),Array.isArray(a)?si(a,o):o(a)}const am=se({provide:String,useValue:se});function ap(i){return null!==i&&"object"==typeof i&&am in i}function So(i){return"function"==typeof i}const Tv=new Kt("Set Injector scope."),Xi={},aA={};let Sv;function ge(){return void 0===Sv&&(Sv=new Us),Sv}class ys{}class up extends ys{get destroyed(){return this._destroyed}constructor(o,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ih(o,v=>this.processProvider(v)),this.records.set(Lw,Qe(void 0,this)),d.has("environment")&&this.records.set(ys,Qe(void 0,this));const g=this.records.get(Tv);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Vw.multi,Oe,ht.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Zt(this),c=mr(void 0);try{return o()}finally{Zt(a),mr(c)}}get(o,a=pi,c=ht.Default){this.assertNotDestroyed(),c=Hn(c);const d=Zt(this),g=mr(void 0);try{if(!(c&ht.SkipSelf)){let I=this.records.get(o);if(void 0===I){const C=function um(i){return"function"==typeof i||"object"==typeof i&&i instanceof Kt}(o)&&Cn(o);I=C&&this.injectableDefInScope(C)?Qe(fa(o),Xi):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&ht.Self?ge():this.parent).get(o,a=c&ht.Optional&&a===pi?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[ar]=v[ar]||[]).unshift(ve(o)),d)throw v;return function jr(i,o,a,c){const d=i[ar];throw o[gn]&&d.unshift(o[gn]),i.message=function V(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&i.charAt(1)==Jr?i.slice(2):i;let d=ve(o);if(Array.isArray(o))d=o.map(ve).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];g.push(v+":"+("string"==typeof I?JSON.stringify(I):ve(I)))}d=`{${g.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(Sn,"\n  ")}`}("\n"+i.message,d,a,c),i[Br]=d,i[ar]=null,i}(v,o,"R3InjectorError",this.source)}throw v}finally{mr(g),Zt(d)}}resolveInjectorInitializers(){const o=Zt(this),a=mr(void 0);try{const c=this.get(Fw.multi,Oe,ht.Self);for(const d of c)d()}finally{Zt(o),mr(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(ve(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(o){let a=So(o=q(o))?o:q(o&&o.provide);const c=function LC(i){return ap(i)?Qe(void 0,i.useValue):Qe(Bs(i),Xi)}(o);if(So(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Qe(void 0,Xi,!0),d.factory=()=>Ni(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===Xi&&(a.value=aA,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Vt(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=q(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function fa(i){const o=Cn(i),a=null!==o?o.factory:Zi(i);if(null!==a)return a;if(i instanceof Kt)throw new de(204,!1);if(i instanceof Function)return function pn(i){const o=i.length;if(o>0)throw function dc(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new de(204,!1);const a=function Ar(i){return i&&(i[fi]||i[Ys])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new de(204,!1)}function Bs(i,o,a){let c;if(So(i)){const d=q(i);return Zi(d)||fa(d)}if(ap(i))c=()=>q(i.useValue);else if(function Eh(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Ni(i.deps||[]));else if(function Bw(i){return!(!i||!i.useExisting)}(i))c=()=>sn(q(i.useExisting));else{const d=q(i&&(i.useClass||i.provide));if(!function Av(i){return!!i.deps}(i))return Zi(d)||fa(d);c=()=>new d(...Ni(i.deps))}return c}function Qe(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Ih(i,o){for(const a of i)Array.isArray(a)?Ih(a,o):a&&De(a)?Ih(a.\u0275providers,o):o(a)}class cp{}class jw{}class VC{resolveComponentFactory(o){throw function Mv(i){const o=Error(`No component factory found for ${ve(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let Ir=(()=>{class i{}return i.NULL=new VC,i})();function cm(){return Zn(tr(),ue())}function Zn(i,o){return new js(dr(i,o))}let js=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=cm,i})();function UC(i){return i instanceof js?i.nativeElement:i}class xv{}let Rv=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Hw(){const i=ue(),a=er(tr().index,i);return(ei(a)?a:i)[Lt]}(),i})(),bi=(()=>{class i{}return i.\u0275prov=Dt({token:i,providedIn:"root",factory:()=>null}),i})();class Gw{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const lp=new Gw("15.2.9"),lm={},dp="ngOriginalError";function $s(i){return i[dp]}class Wl{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&$s(o);for(;a&&$s(a);)a=$s(a);return a||null}}function Hs(i){return i instanceof Function?i():i}function kv(i,o,a){let c=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const g=o.length;if(d+g===c||i.charCodeAt(d+g)<=32)return d}a=d+1}}const Qw="ng-template";function hp(i,o,a){let c=0,d=!0;for(;c<i.length;){let g=i[c++];if("string"==typeof g&&d){const v=i[c++];if(a&&"class"===g&&-1!==kv(v.toLowerCase(),o,0))return!0}else{if(1===g){for(;c<i.length&&"string"==typeof(g=i[c++]);)if(g.toLowerCase()===o)return!0;return!1}"number"==typeof g&&(d=!1)}}return!1}function Jw(i){return 4===i.type&&i.value!==Qw}function fp(i,o,a){return o===(4!==i.type||a?i.value:Qw)}function $C(i,o,a){let c=4;const d=i.attrs||[],g=function eE(i){for(let o=0;o<i.length;o++)if(gl(i[o]))return o;return i.length}(d);let v=!1;for(let I=0;I<o.length;I++){const C=o[I];if("number"!=typeof C){if(!v)if(4&c){if(c=2|1&c,""!==C&&!fp(i,C,a)||""===C&&1===o.length){if(Ao(c))return!1;v=!0}}else{const A=8&c?C:o[++I];if(8&c&&null!==i.attrs){if(!hp(i.attrs,A,a)){if(Ao(c))return!1;v=!0}continue}const F=hm(8&c?"class":C,d,Jw(i),a);if(-1===F){if(Ao(c))return!1;v=!0;continue}if(""!==A){let G;G=F>g?"":d[F+1].toLowerCase();const J=8&c?G:null;if(J&&-1!==kv(J,A,0)||2&c&&A!==G){if(Ao(c))return!1;v=!0}}}}else{if(!v&&!Ao(c)&&!Ao(C))return!1;if(v&&Ao(C))continue;v=!1,c=C|1&c}}return Ao(c)||v}function Ao(i){return 0==(1&i)}function hm(i,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let g=!1;for(;d<o.length;){const v=o[d];if(v===i)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function tE(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function fm(i,o,a=!1){for(let c=0;c<o.length;c++)if($C(i,o[c],a))return!0;return!1}function gm(i,o){return i?":not("+o.trim()+")":o}function Fv(i){let o=i[0],a=1,c=2,d="",g=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const I=i[++a];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!Ao(v)&&(o+=gm(g,d),d=""),c=v,g=g||!Ao(c);a++}return""!==d&&(o+=gm(g,d)),o}const Ut={};function Uv(i){nE(Ft(),ue(),vr()+i,!1)}function nE(i,o,a,c){if(!c)if(3==(3&o[kt])){const g=i.preOrderCheckHooks;null!==g&&hl(o,g,a)}else{const g=i.preOrderHooks;null!==g&&fl(o,g,0,a)}ds(a)}function qr(i,o=null,a=null,c){const d=pp(i,o,a,c);return d.resolveInjectorInitializers(),d}function pp(i,o=null,a=null,c,d=new Set){const g=[a||Oe,_t(i)];return c=c||("object"==typeof i?void 0:ve(i)),new up(g,o||ge(),c||null,d)}let du=(()=>{class i{static create(a,c){if(Array.isArray(a))return qr({name:""},c,a,"");{const d=a.name??"";return qr({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=pi,i.NULL=new Us,i.\u0275prov=Dt({token:i,providedIn:"any",factory:()=>sn(Lw)}),i.__NG_ELEMENT_ID__=-1,i})();function Kl(i,o=ht.Default){const a=ue();return null===a?sn(i,o):ac(tr(),a,q(i),o)}function Ti(){throw new Error("invalid")}function Sh(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const g=a[c+1];if(-1!==g){const v=i.data[g];Zu(a[c]),v.contentQueries(2,o[g],g)}}}function Ah(i,o,a,c,d,g,v,I,C,A,R){const F=o.blueprint.slice();return F[mi]=d,F[kt]=76|c,(null!==R||i&&1024&i[kt])&&(F[kt]|=1024),Ko(F),F[In]=F[Xs]=i,F[Nn]=a,F[rs]=v||i&&i[rs],F[Lt]=I||i&&i[Lt],F[Ra]=C||i&&i[Ra]||null,F[xa]=A||i&&i[xa]||null,F[zn]=g,F[Go]=function $g(){return Wf++}(),F[yr]=R,F[Vn]=2==o.type?i[Vn]:F,F}function Yl(i,o,a,c,d){let g=i.data[o];if(null===g)g=function Dm(i,o,a,c,d){const g=no(),v=Ld(),C=i.data[o]=function gE(i,o,a,c,d,g){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,a,o,c,d);return null===i.firstChild&&(i.firstChild=C),null!==g&&(v?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C,C.prev=g)),C}(i,o,a,c,d),function Vd(){return Mt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=a,g.value=c,g.attrs=d;const v=function zu(){const i=Mt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Hr(g,!0),g}function pu(i,o,a,c){if(0===a)return-1;const d=o.length;for(let g=0;g<a;g++)o.push(c),i.blueprint.push(c),i.data.push(null);return d}function mp(i,o,a){Yu(o);try{const c=i.viewQuery;null!==c&&Qv(1,c,a);const d=i.template;null!==d&&Cm(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Sh(i,o),i.staticViewQueries&&Qv(2,i.viewQuery,a);const g=i.components;null!==g&&function fE(i,o){for(let a=0;a<o.length;a++)CE(i,o[a])}(o,g)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[kt]&=-5,Qu()}}function Mh(i,o,a,c){const d=o[kt];if(128!=(128&d)){Yu(o);try{Ko(o),function Ki(i){return Mt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Cm(i,o,a,2,c);const v=3==(3&d);if(v){const A=i.preOrderCheckHooks;null!==A&&hl(o,A,null)}else{const A=i.preOrderHooks;null!==A&&fl(o,A,0,null),$d(o,0)}if(function Ip(i){for(let o=Ic(i);null!==o;o=Dc(o)){if(!o[il])continue;const a=o[eo];for(let c=0;c<a.length;c++){const d=a[c];512&d[kt]||Fa(d[In],1),d[kt]|=512}}}(o),function nb(i){for(let o=Ic(i);null!==o;o=Dc(o))for(let a=cr;a<o.length;a++){const c=o[a],d=c[qe];cs(c)&&Mh(d,c,d.template,c[Nn])}}(o),null!==i.contentQueries&&Sh(i,o),v){const A=i.contentCheckHooks;null!==A&&hl(o,A)}else{const A=i.contentHooks;null!==A&&fl(o,A,1),$d(o,1)}!function hE(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)ds(~d);else{const g=d,v=a[++c],I=a[++c];Wu(v,g),I(2,o[g])}}}finally{ds(-1)}}(i,o);const I=i.components;null!==I&&function Im(i,o){for(let a=0;a<o.length;a++)Fc(i,o[a])}(o,I);const C=i.viewQuery;if(null!==C&&Qv(2,C,c),v){const A=i.viewCheckHooks;null!==A&&hl(o,A)}else{const A=i.viewHooks;null!==A&&fl(o,A,2),$d(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[kt]&=-41,512&o[kt]&&(o[kt]&=-513,Fa(o[In],-1))}finally{Qu()}}}function Cm(i,o,a,c,d){const g=vr(),v=2&c;try{ds(-1),v&&o.length>_n&&nE(i,o,_n,!1),$r(v?2:0,d),a(c,d)}finally{ds(g),$r(v?3:1,d)}}function xh(i,o,a){if(Pa(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=i.data[g];v.contentQueries&&v.contentQueries(1,a[g],g)}}}function Ql(i,o,a){$u()&&(function XC(i,o,a,c){const d=a.directiveStart,g=a.directiveEnd;qo(a)&&function Ep(i,o,a){const c=dr(o,i),d=pE(a),g=i[rs],v=mu(i,Ah(i,d,null,a.onPush?32:16,c,o,g,g.createRenderer(c,a),null,null,null));i[o.index]=v}(o,a,i.data[d+a.componentOffset]),i.firstCreatePass||ml(a,o),te(c,o);const v=a.initialInputs;for(let I=d;I<g;I++){const C=i.data[I],A=Un(o,i,I,a);te(A,o),null!==v&&eb(0,I-d,A,C,0,v),vi(C)&&(er(a.index,o)[Nn]=Un(o,i,I,a))}}(i,o,a,dr(a,o)),64==(64&a.flags)&&kc(i,o,a))}function bm(i,o,a=dr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],I=-1===v?a(o,i):i[v];i[d++]=I}}}function pE(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=yp(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function yp(i,o,a,c,d,g,v,I,C,A){const R=_n+c,F=R+d,G=function Tm(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:Ut);return a}(R,F),J="function"==typeof A?A():A;return G[qe]={type:i,blueprint:G,template:a,queries:null,viewQuery:I,declTNode:o,data:G.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:J,incompleteFirstPass:!1}}function Zv(i,o,a,c){const d=Jv(o);null===a?d.push(c):(d.push(a),i.firstCreatePass&&Pm(i).push(c,d.length-1))}function Kv(i,o,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const g=i[d];null===c?mE(a,o,d,g):c.hasOwnProperty(d)&&mE(a,o,c[d],g)}return a}function mE(i,o,a,c){i.hasOwnProperty(a)?i[a].push(o,c):i[a]=[o,c]}function Yv(i,o,a,c){if($u()){const d=null===c?null:{"":-1},g=function Sm(i,o){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let g=0;g<a.length;g++){const v=a[g];if(fm(o,v.selectors,!1))if(c||(c=[]),vi(v))if(null!==v.findHostDirectiveDefs){const I=[];d=d||new Map,v.findHostDirectiveDefs(v,I,d),c.unshift(...I,v),Rh(i,o,I.length)}else c.unshift(v),Rh(i,o,0);else d=d||new Map,v.findHostDirectiveDefs?.(v,c,d),c.push(v)}return null===c?null:[c,d]}(i,a);let v,I;null===g?v=I=null:[v,I]=g,null!==v&&_E(i,o,a,v,d,I),d&&function IE(i,o,a){if(o){const c=i.localNames=[];for(let d=0;d<o.length;d+=2){const g=a[o[d+1]];if(null==g)throw new de(-301,!1);c.push(o[d],g)}}}(a,c,d)}a.mergedAttrs=uo(a.mergedAttrs,a.attrs)}function _E(i,o,a,c,d,g){for(let A=0;A<c.length;A++)mn(ml(a,o),i,c[A].type);!function Am(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,c.length);for(let A=0;A<c.length;A++){const R=c[A];R.providersResolver&&R.providersResolver(R)}let v=!1,I=!1,C=pu(i,o,c.length,null);for(let A=0;A<c.length;A++){const R=c[A];a.mergedAttrs=uo(a.mergedAttrs,R.hostAttrs),wp(i,a,o,C,R),jn(C,R,d),null!==R.contentQueries&&(a.flags|=4),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(a.flags|=64);const F=R.type.prototype;!v&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((i.preOrderHooks??(i.preOrderHooks=[])).push(a.index),v=!0),!I&&(F.ngOnChanges||F.ngDoCheck)&&((i.preOrderCheckHooks??(i.preOrderCheckHooks=[])).push(a.index),I=!0),C++}!function vp(i,o,a){const d=o.directiveEnd,g=i.data,v=o.attrs,I=[];let C=null,A=null;for(let R=o.directiveStart;R<d;R++){const F=g[R],G=a?a.get(F):null,me=G?G.outputs:null;C=Kv(F.inputs,R,C,G?G.inputs:null),A=Kv(F.outputs,R,A,me);const Le=null===C||null===v||Jw(o)?null:tb(C,R,v);I.push(Le)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=8),C.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=C,o.outputs=A}(i,a,g)}function kc(i,o,a){const c=a.directiveStart,d=a.directiveEnd,g=a.index,v=function Vg(){return Mt.lFrame.currentDirectiveIndex}();try{ds(g);for(let I=c;I<d;I++){const C=i.data[I],A=o[I];Wn(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&gu(C,A)}}finally{ds(-1),Wn(v)}}function gu(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function Rh(i,o,a){o.componentOffset=a,(i.components??(i.components=[])).push(o.index)}function jn(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;vi(o)&&(a[""]=i)}}function wp(i,o,a,c,d){i.data[c]=d;const g=d.factory||(d.factory=Zi(d.type)),v=new hs(g,vi(d),Kl);i.blueprint[c]=v,a[c]=v,function wE(i,o,a,c,d){const g=d.hostBindings;if(g){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const I=~o.index;(function EE(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(v)!=I&&v.push(I),v.push(a,c,g)}}(i,o,c,pu(i,a,d.hostVars,Ut),d)}function pa(i,o,a,c,d,g){const v=dr(i,o);!function Mm(i,o,a,c,d,g,v){if(null==g)i.removeAttribute(o,d,a);else{const I=null==v?xe(g):v(g,c||"",d);i.setAttribute(o,d,I,a)}}(o[Lt],v,g,i.value,a,c,d)}function eb(i,o,a,c,d,g){const v=g[o];if(null!==v){const I=c.setInput;for(let C=0;C<v.length;){const A=v[C++],R=v[C++],F=v[C++];null!==I?c.setInput(a,F,A,R):a[R]=F}}}function tb(i,o,a){let c=null,d=0;for(;d<a.length;){const g=a[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(i.hasOwnProperty(g)){null===c&&(c=[]);const v=i[g];for(let I=0;I<v.length;I+=2)if(v[I]===o){c.push(g,v[I+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function DE(i,o,a,c){return[i,!0,!1,o,null,0,c,a,null,null]}function Fc(i,o){const a=er(o,i);if(cs(a)){const c=a[qe];48&a[kt]?Mh(c,a,c.template,a[Nn]):a[fn]>0&&xm(a)}}function xm(i){for(let c=Ic(i);null!==c;c=Dc(c))for(let d=cr;d<c.length;d++){const g=c[d];if(cs(g))if(512&g[kt]){const v=g[qe];Mh(v,g,v.template,g[Nn])}else g[fn]>0&&xm(g)}const a=i[qe].components;if(null!==a)for(let c=0;c<a.length;c++){const d=er(a[c],i);cs(d)&&d[fn]>0&&xm(d)}}function CE(i,o){const a=er(o,i),c=a[qe];(function bE(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(c,a),mp(c,a,a[Nn])}function mu(i,o){return i[Js]?i[is][yi]=o:i[Js]=o,i[is]=o,o}function Rm(i){for(;i;){i[kt]|=32;const o=bo(i);if(ku(i)&&!o)return i;i=o}return null}function Nm(i,o,a,c=!0){const d=o[rs];d.begin&&d.begin();try{Mh(i,o,i.template,a)}catch(v){throw c&&Xv(o,v),v}finally{d.end&&d.end()}}function Qv(i,o,a){Zu(0),o(i,a)}function Jv(i){return i[Qs]||(i[Qs]=[])}function Pm(i){return i.cleanup||(i.cleanup=[])}function Xv(i,o){const a=i[xa],c=a?a.get(Wl,null):null;c&&c.handleError(o)}function km(i,o,a,c,d){for(let g=0;g<a.length;){const v=a[g++],I=a[g++],C=o[v],A=i.data[v];null!==A.setInput?A.setInput(C,d,c,I):C[I]=d}}function Fm(i,o,a){let c=a?i.styles:null,d=a?i.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?g=I:1==g?d=ce(d,I):2==g&&(c=ce(c,I+": "+o[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function Lm(i,o,a,c,d=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&c.push(lr(g)),ti(g))for(let I=cr;I<g.length;I++){const C=g[I],A=C[qe].firstChild;null!==A&&Lm(C[qe],C,A,c)}const v=a.type;if(8&v)Lm(i,o,a.child,c);else if(32&v){const I=Co(a,o);let C;for(;C=I();)c.push(C)}else if(16&v){const I=pv(o,a);if(Array.isArray(I))c.push(...I);else{const C=bo(o[Vn]);Lm(C[qe],C,I,c,!0)}}a=d?a.projectionNext:a.next}return c}class Dp{get rootNodes(){const o=this._lView,a=o[qe];return Lm(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Nn]}set context(o){this._lView[Nn]=o}get destroyed(){return 128==(128&this._lView[kt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[In];if(ti(o)){const a=o[Ts],c=a?a.indexOf(this):-1;c>-1&&(la(o,c),vo(a,c))}this._attachedToViewContainer=!1}Ul(this._lView[qe],this._lView)}onDestroy(o){Zv(this._lView[qe],this._lView,null,o)}markForCheck(){Rm(this._cdRefInjectingView||this._lView)}detach(){this._lView[kt]&=-65}reattach(){this._lView[kt]|=64}detectChanges(){Nm(this._lView[qe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Nw(i,o){Ac(i,o,o[Lt],2,null,null)}(this._lView[qe],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=o}}class Vm extends Dp{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Nm(o[qe],o,o[Nn],!1)}checkNoChanges(){}get context(){return null}}class Nh extends Ir{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=ft(o);return new yu(a,this.ngModule)}}function Cp(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class TE{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=Hn(c);const d=this.injector.get(o,lm,c);return d!==lm||a===lm?d:this.parentInjector.get(o,a,c)}}class yu extends jw{get inputs(){return Cp(this.componentDef.inputs)}get outputs(){return Cp(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Lv(i){return i.map(Fv).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,d){let g=(d=d||this.ngModule)instanceof ys?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new TE(o,g):o,I=v.get(xv,null);if(null===I)throw new de(407,!1);const C=v.get(bi,null),A=I.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",F=c?function Wv(i,o,a){return i.selectRootElement(o,a===pe.ShadowDom)}(A,c,this.componentDef.encapsulation):Gg(A,R,function e_(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),G=this.componentDef.onPush?288:272,J=yp(0,null,null,1,0,null,null,null,null,null),me=Ah(null,J,null,G,null,null,I,A,C,v,null);let Le,Ke;Yu(me);try{const ut=this.componentDef;let St,Se=null;ut.findHostDirectiveDefs?(St=[],Se=new Map,ut.findHostDirectiveDefs(ut,St,Se),St.push(ut)):St=[ut];const Bt=function ir(i,o){const a=i[qe],c=_n;return i[c]=o,Yl(a,c,2,"#host",null)}(me,F),xn=function SE(i,o,a,c,d,g,v,I){const C=d[qe];!function sb(i,o,a,c){for(const d of i)o.mergedAttrs=uo(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Fm(o,o.mergedAttrs,!0),null!==a&&mv(c,a,o))}(c,i,o,v);const A=g.createRenderer(o,a),R=Ah(d,pE(a),null,a.onPush?32:16,d[i.index],i,g,A,I||null,null,null);return C.firstCreatePass&&Rh(C,i,c.length-1),mu(d,R),d[i.index]=R}(Bt,F,ut,St,me,I,A);Ke=Nd(J,_n),F&&function ab(i,o,a,c){if(c)Xo(i,a,["ng-version",lp.full]);else{const{attrs:d,classes:g}=function Vv(i){const o=[],a=[];let c=1,d=2;for(;c<i.length;){let g=i[c];if("string"==typeof g)2===d?""!==g&&o.push(g,i[++c]):8===d&&a.push(g);else{if(!Ao(d))break;d=g}c++}return{attrs:o,classes:a}}(o.selectors[0]);d&&Xo(i,a,d),g&&g.length>0&&Hl(i,a,g.join(" "))}}(A,ut,F,c),void 0!==a&&function AE(i,o,a){const c=i.projection=[];for(let d=0;d<o.length;d++){const g=a[d];c.push(null!=g?Array.from(g):null)}}(Ke,this.ngContentSelectors,a),Le=function ob(i,o,a,c,d,g){const v=tr(),I=d[qe],C=dr(v,d);_E(I,d,v,a,null,c);for(let R=0;R<a.length;R++)te(Un(d,I,v.directiveStart+R,v),d);kc(I,d,v),C&&te(C,d);const A=Un(d,I,v.directiveStart+v.componentOffset,v);if(i[Nn]=d[Nn]=A,null!==g)for(const R of g)R(A,o);return xh(I,v,i),A}(xn,ut,St,Se,me,[ME]),mp(J,me,null)}finally{Qu()}return new bp(this.componentType,Le,Zn(Ke,me),me,Ke)}}class bp extends cp{constructor(o,a,c,d,g){super(),this.location=c,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new Vm(d),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const g=this._rootLView;km(g[qe],g,d,o,a),Rm(er(this._tNode.index,g))}}get injector(){return new ps(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function ME(){const i=tr();ec(ue()[qe],i)}function Ph(i){let o=function t_(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let d;if(vi(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new de(903,!1);d=o.\u0275dir}if(d){if(a){c.push(d);const v=i;v.inputs=xo(i.inputs),v.declaredInputs=xo(i.declaredInputs),v.outputs=xo(i.outputs);const I=d.hostBindings;I&&n_(i,I);const C=d.viewQuery,A=d.contentQueries;if(C&&RE(i,C),A&&NE(i,A),fe(i.inputs,d.inputs),fe(i.declaredInputs,d.declaredInputs),fe(i.outputs,d.outputs),vi(d)&&d.data.animation){const R=i.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const I=g[v];I&&I.ngInherit&&I(i),I===Ph&&(a=!1)}}o=Object.getPrototypeOf(o)}!function xE(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=o+=d.hostVars,d.hostAttrs=uo(d.hostAttrs,a=uo(a,d.hostAttrs))}}(c)}function xo(i){return i===Q?{}:i===Oe?[]:i}function RE(i,o){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{o(c,d),a(c,d)}:o}function NE(i,o){const a=i.contentQueries;i.contentQueries=a?(c,d,g)=>{o(c,d,g),a(c,d,g)}:o}function n_(i,o){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{o(c,d),a(c,d)}:o}function Ap(i){return!!Bm(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function Bm(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ro(i,o,a){return i[o]=a}function sr(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function Mp(i,o,a,c,d){const g=function Lc(i,o,a,c){const d=sr(i,o,a);return sr(i,o+1,c)||d}(i,o,a,c);return sr(i,o+2,d)||g}function $m(i,o,a,c){const d=ue();return sr(d,ro(),o)&&(Ft(),pa(Tn(),d,i,o,a,c)),$m}function xp(i,o,a,c,d,g,v,I){const C=ue(),A=Ft(),R=i+_n,F=A.firstCreatePass?function ai(i,o,a,c,d,g,v,I,C){const A=o.consts,R=Yl(o,i,4,v||null,Ms(A,I));Yv(o,a,R,Ms(A,C)),ec(o,R);const F=R.tView=yp(2,R,c,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,R),F.queries=o.queries.embeddedTView(R)),R}(R,A,C,o,a,c,d,g,v):A.data[R];Hr(F,!1);const G=C[Lt].createComment("");ha(A,C,G,F),te(G,C),mu(C,C[R]=DE(G,C,G,F)),sl(F)&&Ql(A,C,F),null!=v&&bm(C,F,I)}function Lh(i,o,a){const c=ue();return sr(c,ro(),o)&&function Si(i,o,a,c,d,g,v,I){const C=dr(o,a);let R,A=o.inputs;!I&&null!=A&&(R=A[c])?(km(i,a,R,c,d),qo(o)&&function _p(i,o){const a=er(o,i);16&a[kt]||(a[kt]|=32)}(a,o.index)):3&o.type&&(c=function yE(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=v?v(d,o.value||"",c):d,g.setProperty(C,c,d))}(Ft(),Tn(),c,i,o,c[Lt],a,!1),Lh}function Wm(i,o,a,c,d){const v=d?"class":"style";km(i,a,o.inputs[v],v,c)}function Zm(i,o,a,c){const d=ue(),g=Ft(),v=_n+i,I=d[Lt],C=g.firstCreatePass?function Vh(i,o,a,c,d,g){const v=o.consts,C=Yl(o,i,2,c,Ms(v,d));return Yv(o,a,C,Ms(v,g)),null!==C.attrs&&Fm(C,C.attrs,!1),null!==C.mergedAttrs&&Fm(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(v,g,d,o,a,c):g.data[v],A=d[v]=Gg(I,o,function jd(){return Mt.lFrame.currentNamespace}()),R=sl(C);return Hr(C,!0),mv(I,A,C),32!=(32&C.flags)&&ha(g,d,A,C),0===function Od(){return Mt.lFrame.elementDepthCount}()&&te(A,d),function ju(){Mt.lFrame.elementDepthCount++}(),R&&(Ql(g,d,C),xh(g,C,d)),null!==c&&bm(d,C),Zm}function Km(){let i=tr();Ld()?function qu(){Mt.lFrame.isParent=!1}():(i=i.parent,Hr(i,!1));const o=i;!function kd(){Mt.lFrame.elementDepthCount--}();const a=Ft();return a.firstCreatePass&&(ec(a,i),Pa(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function $a(i){return 0!=(8&i.flags)}(o)&&Wm(a,o,ue(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function so(i){return 0!=(16&i.flags)}(o)&&Wm(a,o,ue(),o.stylesWithoutHost,!1),Km}function Np(i,o,a,c){return Zm(i,o,a,c),Km(),Np}function l_(i){return!!i&&"function"==typeof i.then}function FE(i){return!!i&&"function"==typeof i.subscribe}const nd=FE;function Jm(i,o,a,c){const d=ue(),g=Ft(),v=tr();return function _u(i,o,a,c,d,g,v){const I=sl(c),A=i.firstCreatePass&&Pm(i),R=o[Nn],F=Jv(o);let G=!0;if(3&c.type||v){const Le=dr(c,o),Ke=v?v(Le):Le,ut=F.length,St=v?Bt=>v(lr(Bt[c.index])):c.index;let Se=null;if(!v&&I&&(Se=function Uh(i,o,a,c){const d=i.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===a&&d[g+1]===c){const I=o[Qs],C=d[g+2];return I.length>C?I[C]:null}"string"==typeof v&&(g+=2)}return null}(i,o,d,c.index)),null!==Se)(Se.__ngLastListenerFn__||Se).__ngNextListenerFn__=g,Se.__ngLastListenerFn__=g,G=!1;else{g=LE(c,o,R,g,!1);const Bt=a.listen(Ke,d,g);F.push(g,Bt),A&&A.push(d,St,ut,ut+1)}}else g=LE(c,o,R,g,!1);const J=c.outputs;let me;if(G&&null!==J&&(me=J[d])){const Le=me.length;if(Le)for(let Ke=0;Ke<Le;Ke+=2){const xn=o[me[Ke]][me[Ke+1]].subscribe(g),gr=F.length;F.push(g,xn),A&&A.push(d,c.index,gr,-(gr+1))}}}(g,d,d[Lt],v,i,o,c),Jm}function Xm(i,o,a,c){try{return $r(6,o,a),!1!==a(c)}catch(d){return Xv(i,d),!1}finally{$r(7,o,a)}}function LE(i,o,a,c,d){return function g(v){if(v===Function)return c;Rm(i.componentOffset>-1?er(i.index,o):o);let C=Xm(o,a,c,v),A=g.__ngNextListenerFn__;for(;A;)C=Xm(o,a,A,v)&&C,A=A.__ngNextListenerFn__;return d&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function Pe(i=1){return function Of(i){return(Mt.lFrame.contextLView=function Ju(i,o){for(;i>0;)o=o[Xs],i--;return o}(i,Mt.lFrame.contextLView))[Nn]}(i)}function ey(i,o){return i<<17|o<<2}function Uc(i){return i>>17&32767}function f_(i){return 2|i}function Bh(i){return(131068&i)>>2}function p_(i,o){return-131069&i|o<<2}function Pt(i){return 1|i}function jh(i,o,a,c,d){const g=i[a+1],v=null===o;let I=c?Uc(g):Bh(g),C=!1;for(;0!==I&&(!1===C||v);){const R=i[I+1];an(i[I],o)&&(C=!0,i[I+1]=c?Pt(R):f_(R)),I=c?Uc(R):Bh(R)}C&&(i[a+1]=c?f_(g):Pt(g))}function an(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&_r(i,o)>=0}function ma(i,o){return function Oo(i,o,a,c){const d=ue(),g=Ft(),v=function Ei(i){const o=Mt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);g.firstUpdatePass&&function zE(i,o,a,c){const d=i.data;if(null===d[a+1]){const g=d[vr()],v=function wu(i,o){return o>=i.expandoStartIndex}(i,a);(function Lp(i,o){return 0!=(i.flags&(o?8:16))})(g,c)&&null===o&&!v&&(o=!1),o=function id(i,o,a,c){const d=function Yo(i){const o=Mt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let g=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(a=ui(a=v_(null,i,o,a,c),o.attrs,c),g=null);else{const v=o.directiveStylingLast;if(-1===v||i[v]!==d)if(a=v_(d,i,o,a,c),null===g){let C=function qE(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==Bh(c))return i[Uc(c)]}(i,o,c);void 0!==C&&Array.isArray(C)&&(C=v_(null,i,o,C[1],c),C=ui(C,o.attrs,c),function y_(i,o,a,c){i[Uc(a?o.classBindings:o.styleBindings)]=c}(i,o,c,C))}else g=function gb(i,o,a){let c;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)c=ui(c,i[g].hostAttrs,a);return ui(c,o.attrs,a)}(i,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),a}(d,g,o,c),function $n(i,o,a,c,d,g){let v=g?o.classBindings:o.styleBindings,I=Uc(v),C=Bh(v);i[c]=a;let R,A=!1;if(Array.isArray(a)?(R=a[1],(null===R||_r(a,R)>0)&&(A=!0)):R=a,d)if(0!==C){const G=Uc(i[I+1]);i[c+1]=ey(G,I),0!==G&&(i[G+1]=p_(i[G+1],c)),i[I+1]=function jE(i,o){return 131071&i|o<<17}(i[I+1],c)}else i[c+1]=ey(I,0),0!==I&&(i[I+1]=p_(i[I+1],c)),I=c;else i[c+1]=ey(C,0),0===I?I=c:i[C+1]=p_(i[C+1],c),C=c;A&&(i[c+1]=f_(i[c+1])),jh(i,R,c,!0),jh(i,R,c,!1),function mt(i,o,a,c,d){const g=d?i.residualClasses:i.residualStyles;null!=g&&"string"==typeof o&&_r(g,o)>=0&&(a[c+1]=Pt(a[c+1]))}(o,R,i,c,g),v=ey(I,C),g?o.classBindings=v:o.styleBindings=v}(d,g,o,a,v,c)}}(g,i,v,c),o!==Ut&&sr(d,v,o)&&function ZE(i,o,a,c,d,g,v,I){if(!(3&o.type))return;const C=i.data,A=C[I+1],R=function $E(i){return 1==(1&i)}(A)?__(C,o,a,d,Bh(A),v):void 0;ws(R)||(ws(g)||function hb(i){return 2==(2&i)}(A)&&(g=__(C,null,a,d,I,v)),function gv(i,o,a,c,d){if(o)d?i.addClass(a,c):i.removeClass(a,c);else{let g=-1===c.indexOf("-")?void 0:Di.DashCase;null==d?i.removeStyle(a,c,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=Di.Important),i.setStyle(a,c,d,g))}}(c,v,us(vr(),a),d,g))}(g,g.data[vr()],d,d[Lt],i,d[v+1]=function KE(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=ve(hr(i)))),i}(o,a),c,v)}(i,o,null,!0),ma}function v_(i,o,a,c,d){let g=null;const v=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<v&&(g=o[I],c=ui(c,g.hostAttrs,d),g!==i);)I++;return null!==i&&(a.directiveStylingLast=I),c}function ui(i,o,a){const c=a?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Gr(i,v,!!a||o[++g]))}return void 0===i?null:i}function __(i,o,a,c,d,g){const v=null===o;let I;for(;d>0;){const C=i[d],A=Array.isArray(C),R=A?C[1]:C,F=null===R;let G=a[d+1];G===Ut&&(G=F?Oe:void 0);let J=F?ln(G,c):R===c?G:void 0;if(A&&!ws(J)&&(J=ln(C,c)),ws(J)&&(I=J,v))return I;const me=i[d+1];d=v?Uc(me):Bh(me)}if(null!==o){let C=g?o.residualClasses:o.residualStyles;null!=C&&(I=ln(C,c))}return I}function ws(i){return void 0!==i}function w_(i,o=""){const a=ue(),c=Ft(),d=i+_n,g=c.firstCreatePass?Yl(c,d,1,o,null):c.data[d],v=a[d]=function nh(i,o){return i.createText(o)}(a[Lt],o);ha(c,a,v,g),Hr(g,!1)}function E_(i){return sy("",i,""),E_}function sy(i,o,a){const c=ue(),d=function Wr(i,o,a,c){return sr(i,ro(),a)?o+xe(a)+c:Ut}(c,i,o,a);return d!==Ut&&function Mo(i,o,a){const c=us(o,i);!function Ll(i,o,a){i.setValue(o,a)}(i[Lt],c,a)}(c,vr(),d),sy}const va=void 0;var Vp=["en",[["a","p"],["AM","PM"],va],[["AM","PM"],va,va],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],va,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],va,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",va,"{1} 'at' {0}",va],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ay(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Gh={};function _a(i){const o=function dI(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=ko(o);if(a)return a;const c=o.split("-")[0];if(a=ko(c),a)return a;if("en"===c)return Vp;throw new de(701,!1)}function Iu(i){return _a(i)[yt.PluralCase]}function ko(i){return i in Gh||(Gh[i]=en.ng&&en.ng.common&&en.ng.common.locales&&en.ng.common.locales[i]),Gh[i]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const Du="en-US";let Up=Du;function bu(i,o,a,c,d){if(i=q(i),Array.isArray(i))for(let g=0;g<i.length;g++)bu(i[g],o,a,c,d);else{const g=Ft(),v=ue();let I=So(i)?i:q(i.provide),C=Bs(i);const A=tr(),R=1048575&A.providerIndexes,F=A.directiveStart,G=A.providerIndexes>>20;if(So(i)||!i.multi){const J=new hs(C,d,Kl),me=gy(I,o,d?R:R+G,F);-1===me?(mn(ml(A,v),g,I),py(g,i,o.length),o.push(I),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(J),v.push(J)):(a[me]=J,v[me]=J)}else{const J=gy(I,o,R+G,F),me=gy(I,o,R,R+G),Ke=me>=0&&a[me];if(d&&!Ke||!d&&!(J>=0&&a[J])){mn(ml(A,v),g,I);const ut=function Ob(i,o,a,c,d){const g=new hs(i,a,Kl);return g.multi=[],g.index=o,g.componentProviders=0,hd(g,d,c&&!a),g}(d?Zp:RI,a.length,d,c,C);!d&&Ke&&(a[me].providerFactory=ut),py(g,i,o.length,0),o.push(I),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(ut),v.push(ut)}else py(g,i,J>-1?J:me,hd(a[d?me:J],C,!d&&c));!d&&c&&Ke&&a[me].componentProviders++}}}function py(i,o,a,c){const d=So(o),g=function FC(i){return!!i.useClass}(o);if(d||g){const C=(g?q(o.useClass):o).prototype.ngOnDestroy;if(C){const A=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const R=A.indexOf(a);-1===R?A.push(a,[c,C]):A[R+1].push(c,C)}else A.push(a,C)}}}function hd(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function gy(i,o,a,c){for(let d=a;d<c;d++)if(o[d]===i)return d;return-1}function RI(i,o,a,c){return $_(this.multi,[])}function Zp(i,o,a,c){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=Un(a,a[qe],this.providerFactory.index,c);g=I.slice(0,v),$_(d,g);for(let C=v;C<I.length;C++)g.push(I[C])}else g=[],$_(d,g);return g}function $_(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function Fn(i,o=[]){return a=>{a.providersResolver=(c,d)=>function xI(i,o,a){const c=Ft();if(c.firstCreatePass){const d=vi(i);bu(a,c.data,c.blueprint,d,!0),bu(o,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,o)}}class Tu{}class Kp{}function NI(i,o){return new ef(i,o??null)}class ef extends Tu{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Nh(this);const c=Gn(o);this._bootstrapComponents=Hs(c.bootstrap),this._r3Injector=pp(o,a,[{provide:Tu,useValue:this},{provide:Ir,useValue:this.componentFactoryResolver}],ve(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class H_ extends Kp{constructor(o){super(),this.moduleType=o}create(o){return new ef(this.moduleType,o)}}class PI extends Tu{constructor(o,a,c){super(),this.componentFactoryResolver=new Nh(this),this.instance=null;const d=new up([...o,{provide:Tu,useValue:this},{provide:Ir,useValue:this.componentFactoryResolver}],a||ge(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function $c(i,o,a=null){return new PI(i,o,a).injector}let Su=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=zr(0,a.type),d=c.length>0?$c([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Dt({token:i,providedIn:"environment",factory:()=>new i(sn(ys))}),i})();function G_(i){i.getStandaloneInjector=o=>o.get(Su).getOrCreateStandaloneInjector(i)}function Q_(i,o,a){const c=qn()+i,d=ue();return d[c]===Ut?Ro(d,c,a?o.call(a):o()):function kh(i,o){return i[o]}(d,c)}function J_(i,o,a,c){return function e0(i,o,a,c,d,g){const v=o+a;return sr(i,v,d)?Ro(i,v+1,g?c.call(g,d):c(d)):Xp(i,v+1)}(ue(),qn(),i,o,a,c)}function Xp(i,o){const a=i[o];return a===Ut?void 0:a}function $I(i,o){const a=Ft();let c;const d=i+_n;a.firstCreatePass?(c=function n0(i,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(i===c.name)return c}}(o,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(a.destroyHooks??(a.destroyHooks=[])).push(d,c.onDestroy)):c=a.data[d];const g=c.factory||(c.factory=Zi(c.type)),v=mr(Kl);try{const I=Ha(!1),C=g();return Ha(I),function qm(i,o,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=c}(a,ue(),d,C),C}finally{mr(v)}}function or(i,o,a,c,d){const g=i+_n,v=ue(),I=function Nr(i,o){return i[o]}(v,g);return function Au(i,o){return i[qe].data[o].pure}(v,g)?function UI(i,o,a,c,d,g,v,I){const C=o+a;return Mp(i,C,d,g,v)?Ro(i,C+3,I?c.call(I,d,g,v):c(d,g,v)):Xp(i,C+3)}(v,qn(),o,I.transform,a,c,d,I):I.transform(a,c,d)}function tg(i){return o=>{setTimeout(i,void 0,o)}}const Fo=class Da extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let d=o,g=a||(()=>null),v=c;if(o&&"object"==typeof o){const C=o;d=C.next?.bind(C),g=C.error?.bind(C),v=C.complete?.bind(C)}this.__isAsync&&(g=tg(g),d&&(d=tg(d)),v&&(v=tg(v)));const I=super.subscribe({next:d,error:g,complete:v});return o instanceof Y.w0&&o.add(I),I}};function ng(){return this._results[Symbol.iterator]()}class wy{get changes(){return this._changes||(this._changes=new Fo)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=wy.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=ng)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=function Li(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Il(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],g=o[c];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let tf=(()=>{class i{}return i.__NG_ELEMENT_ID__=Bb,i})();const zI=tf,Ub=class extends zI{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tView,d=Ah(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);d[Ho]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[Wi];return null!==v&&(d[Wi]=v.createEmbeddedView(c)),mp(c,d,o),new Dp(d)}};function Bb(){return Hc(tr(),ue())}function Hc(i,o){return 4&i.type?new Ub(o,i,Zn(i,o)):null}let nf=(()=>{class i{}return i.__NG_ELEMENT_ID__=jb,i})();function jb(){return a0(tr(),ue())}const qI=nf,Ey=class extends qI{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return Zn(this._hostTNode,this._hostLView)}get injector(){return new ps(this._hostTNode,this._hostLView)}get parentInjector(){const o=zd(this._hostTNode,this._hostLView);if(co(o)){const a=lo(o,this._hostLView),c=xs(o);return new ps(a[qe].data[c+8],a)}return new ps(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=s0(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-cr}createEmbeddedView(o,a,c){let d,g;"number"==typeof c?d=c:null!=c&&(d=c.index,g=c.injector);const v=o.createEmbeddedView(a||{},g);return this.insert(v,d),v}createComponent(o,a,c,d,g){const v=o&&!function lc(i){return"function"==typeof i}(o);let I;if(v)I=a;else{const F=a||{};I=F.index,c=F.injector,d=F.projectableNodes,g=F.environmentInjector||F.ngModuleRef}const C=v?o:new yu(ft(o)),A=c||this.parentInjector;if(!g&&null==C.ngModule){const G=(v?A:this.parentInjector).get(ys,null);G&&(g=G)}const R=C.create(A,d,void 0,g);return this.insert(R.hostView,I),R}insert(o,a){const c=o._lView,d=c[qe];if(function cl(i){return ti(i[In])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const F=c[In],G=new Ey(F,F[zn],F[In]);G.detach(G.indexOf(o))}}const g=this._adjustIndex(a),v=this._lContainer;!function ms(i,o,a,c){const d=cr+c,g=a.length;c>0&&(a[d-1][yi]=o),c<g-cr?(o[yi]=a[d],Gf(a,cr+c,o)):(a.push(o),o[yi]=null),o[In]=a;const v=o[Ho];null!==v&&a!==v&&function rh(i,o){const a=i[eo];o[Vn]!==o[In][In][Vn]&&(i[il]=!0),null===a?i[eo]=[o]:a.push(o)}(v,o);const I=o[Wi];null!==I&&I.insertView(i),o[kt]|=64}(d,c,v,g);const I=Sc(g,v),C=c[Lt],A=ah(C,v[zo]);return null!==A&&function Kf(i,o,a,c,d,g){c[mi]=d,c[zn]=o,Ac(i,c,a,1,d,g)}(d,v[zn],C,c,A,I),o.attachToViewContainerRef(),Gf(o0(v),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=s0(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=la(this._lContainer,a);c&&(vo(o0(this._lContainer),a),Ul(c[qe],c))}detach(o){const a=this._adjustIndex(o,-1),c=la(this._lContainer,a);return c&&null!=vo(o0(this._lContainer),a)?new Dp(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function s0(i){return i[Ts]}function o0(i){return i[Ts]||(i[Ts]=[])}function a0(i,o){let a;const c=o[i.index];if(ti(c))a=c;else{let d;if(8&i.type)d=lr(c);else{const g=o[Lt];d=g.createComment("");const v=dr(i,o);da(g,ah(g,v),d,function Jf(i,o){return i.nextSibling(o)}(g,v),!1)}o[i.index]=a=DE(c,o,d,i),mu(o,a)}return new Ey(a,i,o)}class u0{constructor(o){this.queryList=o,this.matches=null}clone(){return new u0(this.queryList)}setDirty(){this.queryList.setDirty()}}class c0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let g=0;g<c;g++){const v=a.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new c0(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Dy(o,a).matches&&this.queries[a].setDirty()}}class WI{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class Ca{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,g=this.getByIndex(c).embeddedTView(o,d);g&&(g.indexInDeclarationView=c,null!==a?a.push(g):a=[g])}return null!==a?new Ca(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Gc{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Gc(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const g=c[d];this.matchTNodeWithReadOption(o,a,ZI(a,g)),this.matchTNodeWithReadOption(o,a,fo(a,o,g,!1,!1))}else c===tf?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,fo(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===js||d===nf||d===tf&&4&a.type)this.addMatch(a.index,-2);else{const g=fo(a,o,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function ZI(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function KI(i,o,a,c){return-1===a?function $b(i,o){return 11&i.type?Zn(i,o):4&i.type?Hc(i,o):null}(o,i):-2===a?function Mu(i,o,a){return a===js?Zn(o,i):a===tf?Hc(o,i):a===nf?a0(o,i):void 0}(i,o,c):Un(i,i[qe],a,o)}function l0(i,o,a,c){const d=o[Wi].queries[c];if(null===d.matches){const g=i.data,v=a.matches,I=[];for(let C=0;C<v.length;C+=2){const A=v[C];I.push(A<0?null:KI(o,g[A],v[C+1],a.metadata.read))}d.matches=I}return d.matches}function d0(i,o,a,c){const d=i.queries.getByIndex(a),g=d.matches;if(null!==g){const v=l0(i,o,d,a);for(let I=0;I<g.length;I+=2){const C=g[I];if(C>0)c.push(v[I/2]);else{const A=g[I+1],R=o[-C];for(let F=cr;F<R.length;F++){const G=R[F];G[Ho]===G[In]&&d0(G[qe],G,A,c)}if(null!==R[eo]){const F=R[eo];for(let G=0;G<F.length;G++){const J=F[G];d0(J[qe],J,A,c)}}}}}return c}function h0(i){const o=ue(),a=Ft(),c=ll();Zu(c+1);const d=Dy(a,c);if(i.dirty&&function Bu(i){return 4==(4&i[kt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const g=d.crossesNgTemplate?d0(a,o,c,[]):l0(a,o,d,c);i.reset(g,UC),i.notifyOnChanges()}return!0}return!1}function zc(i,o,a,c){const d=Ft();if(d.firstCreatePass){const g=tr();(function f0(i,o,a){null===i.queries&&(i.queries=new Ca),i.queries.track(new Gc(o,a))})(d,new WI(o,a,c),g.index),function p0(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function rf(i,o,a){const c=new wy(4==(4&a));Zv(i,o,c,c.destroy),null===o[Wi]&&(o[Wi]=new c0),o[Wi].queries.push(new u0(c))}(d,ue(),a)}function qc(){return function pd(i,o){return i[Wi].queries[o].queryList}(ue(),ll())}function Dy(i,o){return i.queries.getByIndex(o)}function m0(i){return!!Gn(i)}function ag(...i){}const hf=new Kt("Application Initializer");let ug=(()=>{class i{constructor(a){this.appInits=a,this.resolve=ag,this.reject=ag,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(l_(g))a.push(g);else if(nd(g)){const v=new Promise((I,C)=>{g.subscribe({complete:I,error:C})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(sn(hf,8))},i.\u0275prov=Dt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const T0=new Kt("AppId",{providedIn:"root",factory:function uD(){return`${S0()}${S0()}${S0()}`}});function S0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const cD=new Kt("Platform Initializer"),A0=new Kt("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let Qb=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Dt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const My=new Kt("LocaleId",{providedIn:"root",factory:()=>Rn(My,ht.Optional|ht.SkipSelf)||function Jb(){return typeof $localize<"u"&&$localize.locale||Du}()}),M0=new Kt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Xb{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let lD=(()=>{class i{compileModuleSync(a){return new H_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),g=Hs(Gn(a).declarations).reduce((v,I)=>{const C=ft(I);return C&&v.push(new yu(C)),v},[]);return new Xb(c,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Dt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const eT=(()=>Promise.resolve(0))();function Ry(i){typeof Zone>"u"?eT.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ks{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fo(!1),this.onMicrotaskEmpty=new Fo(!1),this.onStable=new Fo(!1),this.onError=new Fo(!1),typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function fD(){let i=en.requestAnimationFrame,o=en.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function tT(i){const o=()=>{!function mD(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(en,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Jc(i),i.isCheckStableRunning=!0,P0(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Jc(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,g,v,I)=>{try{return vd(i),a.invokeTask(d,g,v,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||i.shouldCoalesceRunChangeDetection)&&o(),Ny(i)}},onInvoke:(a,c,d,g,v,I,C)=>{try{return vd(i),a.invoke(d,g,v,I,C)}finally{i.shouldCoalesceRunChangeDetection&&o(),Ny(i)}},onHasTask:(a,c,d,g)=>{a.hasTask(d,g),c===d&&("microTask"==g.change?(i._hasPendingMicrotasks=g.microTask,Jc(i),P0(i)):"macroTask"==g.change&&(i.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,c,d,g)=>(a.handleError(d,g),i.runOutsideAngular(()=>i.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ks.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(Ks.isInAngularZone())throw new de(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,gD,ag,ag);try{return g.runTask(v,a,c)}finally{g.cancelTask(v)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const gD={};function P0(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Jc(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function vd(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Ny(i){i._nesting--,P0(i)}class Py{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fo,this.onMicrotaskEmpty=new Fo,this.onStable=new Fo,this.onError=new Fo}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}const O0=new Kt(""),k0=new Kt("");let L0,yD=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,L0||(function F0(i){L0=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ks.assertNotInAngularZone(),Ry(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ry(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(sn(Ks),sn(vD),sn(k0))},i.\u0275prov=Dt({token:i,factory:i.\u0275fac}),i})(),vD=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return L0?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Dt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Lo=!1;let Ru=null;const V0=new Kt("AllowMultipleToken"),dg=new Kt("PlatformDestroyListeners"),hg=new Kt("appBootstrapListener");class j0{constructor(o,a){this.name=o,this.token=a}}function pg(i,o,a=[]){const c=`Platform: ${o}`,d=new Kt(c);return(g=[])=>{let v=Kr();if(!v||v.injector.get(V0,!1)){const I=[...a,...g,{provide:d,useValue:!0}];i?i(I):function $0(i){if(Ru&&!Ru.get(V0,!1))throw new de(400,!1);Ru=i;const o=i.get(ID);(function wD(i){const o=i.get(cD,null);o&&o.forEach(a=>a())})(i)}(function ED(i=[],o){return du.create({name:o,providers:[{provide:Tv,useValue:"platform"},{provide:dg,useValue:new Set([()=>Ru=null])},...i]})}(I,c))}return function H0(i){const o=Kr();if(!o)throw new de(401,!1);return o}()}}function Kr(){return Ru?.get(ID)??null}let ID=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function gg(i,o){let a;return a="noop"===i?new Py:("zone.js"===i?void 0:i)||new Ks(o),a}(c?.ngZone,function G0(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:Ks,useValue:d}];return d.run(()=>{const v=du.create({providers:g,parent:this.injector,name:a.moduleType.name}),I=a.create(v),C=I.injector.get(Wl,null);if(!C)throw new de(402,!1);return d.runOutsideAngular(()=>{const A=d.onError.subscribe({next:R=>{C.handleError(R)}});I.onDestroy(()=>{ky(this._modules,I),A.unsubscribe()})}),function ff(i,o,a){try{const c=a();return l_(c)?c.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(C,d,()=>{const A=I.injector.get(ug);return A.runInitializers(),A.donePromise.then(()=>(function Wh(i){lt(i,"Expected localeId to be defined"),"string"==typeof i&&(Up=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(My,Du)||Du),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const d=Oy({},c);return function fg(i,o,a){const c=new H_(a);return Promise.resolve(c)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const c=a.injector.get(mg);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new de(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new de(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(dg,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(sn(du))},i.\u0275prov=Dt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Oy(i,o){return Array.isArray(o)?o.reduce(Oy,i):{...i,...o}}let mg=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new O.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{Ks.assertNotInAngularZone(),Ry(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Ks.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),A.unsubscribe()}});this.isStable=(0,re.T)(g,v.pipe((0,ie.B)()))}bootstrap(a,c){const d=a instanceof jw;if(!this._injector.get(ug).done){!d&&ur(a);throw new de(405,Lo)}let v;v=d?a:this._injector.get(Ir).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const I=function B0(i){return i.isBoundToModule}(v)?void 0:this._injector.get(Tu),A=v.create(du.NULL,[],c||v.selector,I),R=A.location.nativeElement,F=A.injector.get(O0,null);return F?.registerApplication(R),A.onDestroy(()=>{this.detachView(A.hostView),ky(this.components,A),F?.unregisterApplication(R)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new de(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;ky(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(hg,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>ky(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new de(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(sn(Ks),sn(ys),sn(Wl))},i.\u0275prov=Dt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function ky(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}function iT(){return!1}let z0=(()=>{class i{}return i.__NG_ELEMENT_ID__=gf,i})();function gf(i){return function q0(i,o,a){if(qo(i)&&!a){const c=er(i.index,o);return new Dp(c,c)}return 47&i.type?new Dp(o[Vn],o):null}(tr(),ue(),16==(16&i))}class Y0{constructor(){}supports(o){return Ap(o)}create(o){return new Q0(o)}}const uT=(i,o)=>o;class Q0{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||uT}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,g=null;for(;a||c;){const v=!c||a&&a.currentIndex<jy(c,d,g)?a:c,I=jy(v,d,g),C=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{g||(g=[]);const A=I-d,R=C-d;if(A!=R){for(let G=0;G<A;G++){const J=G<g.length?g[G]:g[G]=0,me=J+G;R<=me&&me<A&&(g[G]=J+1)}g[v.previousIndex]=R-A}}I!==C&&o(v,I,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Ap(o))throw new de(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)g=o[I],v=this._trackByFn(I,g),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,g,v,I)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,v,I),c=!0),a=a._next}else d=0,function o_(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,I=>{v=this._trackByFn(d,I),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,I,v,d)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,v,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,d)):o=this._addAfter(new cT(a,c),g,d),o}_verifyReinsertion(o,a,c,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new MD),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new MD),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class cT{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class J0{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class MD{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new J0,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function jy(i,o,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class xD{constructor(){}supports(o){return o instanceof Map||Bm(o)}create(){return new X0}}class X0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Bm(o)))throw new de(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const c=new RD(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class RD{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $y(){return new _g([new Y0])}let _g=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||$y()),deps:[[i,new Ja,new Ya]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new de(901,!1)}}return i.\u0275prov=Dt({token:i,providedIn:"root",factory:$y}),i})();function wd(){return new ba([new xD])}let ba=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||wd()),deps:[[i,new Ja,new Ya]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new de(901,!1)}}return i.\u0275prov=Dt({token:i,providedIn:"root",factory:wd}),i})();const yf=pg(null,"core",[]);let dT=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(sn(mg))},i.\u0275mod=X({type:i}),i.\u0275inj=vn({}),i})();function hT(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(gt,be,k)=>{k.d(be,{Z:()=>We});var f=k(2090),Y=k(4859),O=k(6881),re=k(1877);class ie{constructor(de,Me){this._delegate=de,this.firebase=Me,(0,O._addComponent)(de,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=de.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this._delegate.automaticDataCollectionEnabled=de}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(de=>{this._delegate.checkDestroyed(),de()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(de,Me=O._DEFAULT_ENTRY_NAME){var xe;this._delegate.checkDestroyed();const Ue=this._delegate.container.getProvider(de);return!Ue.isInitialized()&&"EXPLICIT"===(null===(xe=Ue.getComponent())||void 0===xe?void 0:xe.instantiationMode)&&Ue.initialize(),Ue.getImmediate({identifier:Me})}_removeServiceInstance(de,Me=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(de).clearInstance(Me)}_addComponent(de){(0,O._addComponent)(this._delegate,de)}_addOrOverwriteComponent(de){(0,O._addOrOverwriteComponent)(this._delegate,de)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ce(){const ct=function ve(ct){const de={},Me={__esModule:!0,initializeApp:function Re(Ne,nt={}){const ne=O.initializeApp(Ne,nt);if((0,f.r3)(de,ne.name))return de[ne.name];const Ct=new ct(ne,Me);return de[ne.name]=Ct,Ct},app:Ue,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function we(Ne){const nt=Ne.name,ne=nt.replace("-compat","");if(O._registerComponent(Ne)&&"PUBLIC"===Ne.type){const Ct=(Xe=Ue())=>{if("function"!=typeof Xe[ne])throw fe.create("invalid-app-argument",{appName:nt});return Xe[ne]()};void 0!==Ne.serviceProps&&(0,f.ZB)(Ct,Ne.serviceProps),Me[ne]=Ct,ct.prototype[ne]=function(...Xe){return this._getService.bind(this,nt).apply(this,Ne.multipleInstances?Xe:[])}}return"PUBLIC"===Ne.type?Me[ne]:null},removeApp:function xe(Ne){delete de[Ne]},useAsService:function $e(Ne,nt){return"serverAuth"===nt?null:nt},modularAPIs:O}};function Ue(Ne){if(!(0,f.r3)(de,Ne=Ne||O._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:Ne});return de[Ne]}return Me.default=Me,Object.defineProperty(Me,"apps",{get:function _e(){return Object.keys(de).map(Ne=>de[Ne])}}),Ue.App=ct,Me}(ie);return ct.INTERNAL=Object.assign(Object.assign({},ct.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function de(Me){(0,f.ZB)(ct,Me)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),ct}(),B=new re.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ct=self.firebase.SDK_VERSION;ct&&ct.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const We=j;!function De(ct){(0,O.registerVersion)("@firebase/app-compat","0.2.10",ct)}()},6881:(gt,be,k)=>{k.r(be),k.d(be,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>bs,_DEFAULT_ENTRY_NAME:()=>Ur,_addComponent:()=>rt,_addOrOverwriteComponent:()=>At,_apps:()=>en,_clearComponents:()=>Br,_components:()=>rn,_getProvider:()=>Qr,_registerComponent:()=>pi,_removeServiceInstance:()=>ar,deleteApp:()=>gi,getApp:()=>zi,getApps:()=>sn,initializeApp:()=>Zt,onLog:()=>Ni,registerVersion:()=>Hn,setLogLevel:()=>En});var f=k(5861),Y=k(4859),O=k(1877),re=k(2090);const ie=(ae,X)=>X.some(Ae=>ae instanceof Ae);let se,fe;const j=new WeakMap,B=new WeakMap,q=new WeakMap,je=new WeakMap,De=new WeakMap;let de={get(ae,X,Ae){if(ae instanceof IDBTransaction){if("done"===X)return B.get(ae);if("objectStoreNames"===X)return ae.objectStoreNames||q.get(ae);if("store"===X)return Ae.objectStoreNames[1]?void 0:Ae.objectStore(Ae.objectStoreNames[0])}return Re(ae[X])},set:(ae,X,Ae)=>(ae[X]=Ae,!0),has:(ae,X)=>ae instanceof IDBTransaction&&("done"===X||"store"===X)||X in ae};function Ue(ae){return"function"==typeof ae?function xe(ae){return ae!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ce(){return fe||(fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ae)?function(...X){return ae.apply(_e(this),X),Re(j.get(this))}:function(...X){return Re(ae.apply(_e(this),X))}:function(X,...Ae){const dt=ae.call(_e(this),X,...Ae);return q.set(dt,X.sort?X.sort():[X]),Re(dt)}}(ae):(ae instanceof IDBTransaction&&function ct(ae){if(B.has(ae))return;const X=new Promise((Ae,dt)=>{const Et=()=>{ae.removeEventListener("complete",jt),ae.removeEventListener("error",ft),ae.removeEventListener("abort",ft)},jt=()=>{Ae(),Et()},ft=()=>{dt(ae.error||new DOMException("AbortError","AbortError")),Et()};ae.addEventListener("complete",jt),ae.addEventListener("error",ft),ae.addEventListener("abort",ft)});B.set(ae,X)}(ae),ie(ae,function ve(){return se||(se=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ae,de):ae)}function Re(ae){if(ae instanceof IDBRequest)return function We(ae){const X=new Promise((Ae,dt)=>{const Et=()=>{ae.removeEventListener("success",jt),ae.removeEventListener("error",ft)},jt=()=>{Ae(Re(ae.result)),Et()},ft=()=>{dt(ae.error),Et()};ae.addEventListener("success",jt),ae.addEventListener("error",ft)});return X.then(Ae=>{Ae instanceof IDBCursor&&j.set(Ae,ae)}).catch(()=>{}),De.set(X,ae),X}(ae);if(je.has(ae))return je.get(ae);const X=Ue(ae);return X!==ae&&(je.set(ae,X),De.set(X,ae)),X}const _e=ae=>De.get(ae),Ne=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],ne=new Map;function Ct(ae,X){if(!(ae instanceof IDBDatabase)||X in ae||"string"!=typeof X)return;if(ne.get(X))return ne.get(X);const Ae=X.replace(/FromIndex$/,""),dt=X!==Ae,Et=nt.includes(Ae);if(!(Ae in(dt?IDBIndex:IDBObjectStore).prototype)||!Et&&!Ne.includes(Ae))return;const jt=function(){var ft=(0,f.Z)(function*(tn,...Qt){const ur=this.transaction(tn,Et?"readwrite":"readonly");let Gn=ur.store;return dt&&(Gn=Gn.index(Qt.shift())),(yield Promise.all([Gn[Ae](...Qt),Et&&ur.done]))[0]});return function(Qt){return ft.apply(this,arguments)}}();return ne.set(X,jt),jt}!function Me(ae){de=ae(de)}(ae=>({...ae,get:(X,Ae,dt)=>Ct(X,Ae)||ae.get(X,Ae,dt),has:(X,Ae)=>!!Ct(X,Ae)||ae.has(X,Ae)}));class Xe{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(Ae=>{if(function Ht(ae){return"VERSION"===ae.getComponent()?.type}(Ae)){const dt=Ae.getImmediate();return`${dt.library}/${dt.version}`}return null}).filter(Ae=>Ae).join(" ")}}const st="@firebase/app",he=new O.Yd("@firebase/app"),Ur="[DEFAULT]",Gi={[st]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},en=new Map,rn=new Map;function rt(ae,X){try{ae.container.addComponent(X)}catch(Ae){he.debug(`Component ${X.name} failed to register with FirebaseApp ${ae.name}`,Ae)}}function At(ae,X){ae.container.addOrOverwriteComponent(X)}function pi(ae){const X=ae.name;if(rn.has(X))return he.debug(`There were multiple attempts to register component ${X}.`),!1;rn.set(X,ae);for(const Ae of en.values())rt(Ae,ae);return!0}function Qr(ae,X){const Ae=ae.container.getProvider("heartbeat").getImmediate({optional:!0});return Ae&&Ae.triggerHeartbeat(),ae.container.getProvider(X)}function ar(ae,X,Ae=Ur){Qr(ae,X).clearInstance(Ae)}function Br(){rn.clear()}const Jr=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class gn{constructor(X,Ae,dt){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},Ae),this._name=Ae.name,this._automaticDataCollectionEnabled=Ae.automaticDataCollectionEnabled,this._container=dt,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw Jr.create("app-deleted",{appName:this._name})}}const bs="9.22.0";function Zt(ae,X={}){let Ae=ae;"object"!=typeof X&&(X={name:X});const dt=Object.assign({name:Ur,automaticDataCollectionEnabled:!1},X),Et=dt.name;if("string"!=typeof Et||!Et)throw Jr.create("bad-app-name",{appName:String(Et)});if(Ae||(Ae=(0,re.aH)()),!Ae)throw Jr.create("no-options");const jt=en.get(Et);if(jt){if((0,re.vZ)(Ae,jt.options)&&(0,re.vZ)(dt,jt.config))return jt;throw Jr.create("duplicate-app",{appName:Et})}const ft=new Y.H0(Et);for(const Qt of rn.values())ft.addComponent(Qt);const tn=new gn(Ae,dt,ft);return en.set(Et,tn),tn}function zi(ae=Ur){const X=en.get(ae);if(!X&&ae===Ur&&(0,re.aH)())return Zt();if(!X)throw Jr.create("no-app",{appName:ae});return X}function sn(){return Array.from(en.values())}function gi(ae){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,f.Z)(function*(ae){const X=ae.name;en.has(X)&&(en.delete(X),yield Promise.all(ae.container.getProviders().map(Ae=>Ae.delete())),ae.isDeleted=!0)})).apply(this,arguments)}function Hn(ae,X,Ae){var dt;let Et=null!==(dt=Gi[ae])&&void 0!==dt?dt:ae;Ae&&(Et+=`-${Ae}`);const jt=Et.match(/\s|\//),ft=X.match(/\s|\//);if(jt||ft){const tn=[`Unable to register library "${Et}" with version "${X}":`];return jt&&tn.push(`library name "${Et}" contains illegal characters (whitespace or "/")`),jt&&ft&&tn.push("and"),ft&&tn.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void he.warn(tn.join(" "))}pi(new Y.wA(`${Et}-version`,()=>({library:Et,version:X}),"VERSION"))}function Ni(ae,X){if(null!==ae&&"function"!=typeof ae)throw Jr.create("invalid-log-argument");(0,O.Am)(ae,X)}function En(ae){(0,O.Ub)(ae)}const Pi="firebase-heartbeat-database",jr=1,V="firebase-heartbeat-store";let L=null;function z(){return L||(L=function we(ae,X,{blocked:Ae,upgrade:dt,blocking:Et,terminated:jt}={}){const ft=indexedDB.open(ae,X),tn=Re(ft);return dt&&ft.addEventListener("upgradeneeded",Qt=>{dt(Re(ft.result),Qt.oldVersion,Qt.newVersion,Re(ft.transaction),Qt)}),Ae&&ft.addEventListener("blocked",Qt=>Ae(Qt.oldVersion,Qt.newVersion,Qt)),tn.then(Qt=>{jt&&Qt.addEventListener("close",()=>jt()),Et&&Qt.addEventListener("versionchange",ur=>Et(ur.oldVersion,ur.newVersion,ur))}).catch(()=>{}),tn}(Pi,jr,{upgrade:(ae,X)=>{0===X&&ae.createObjectStore(V)}}).catch(ae=>{throw Jr.create("idb-open",{originalErrorMessage:ae.message})})),L}function Q(){return(Q=(0,f.Z)(function*(ae){try{return yield(yield z()).transaction(V).objectStore(V).get(Yt(ae))}catch(X){if(X instanceof re.ZR)he.warn(X.message);else{const Ae=Jr.create("idb-get",{originalErrorMessage:X?.message});he.warn(Ae.message)}}})).apply(this,arguments)}function Oe(ae,X){return bt.apply(this,arguments)}function bt(){return(bt=(0,f.Z)(function*(ae,X){try{const dt=(yield z()).transaction(V,"readwrite");yield dt.objectStore(V).put(X,Yt(ae)),yield dt.done}catch(Ae){if(Ae instanceof re.ZR)he.warn(Ae.message);else{const dt=Jr.create("idb-set",{originalErrorMessage:Ae?.message});he.warn(dt.message)}}})).apply(this,arguments)}function Yt(ae){return`${ae.name}!${ae.options.appId}`}class cn{constructor(X){this.container=X,this._heartbeatsCache=null;const Ae=this.container.getProvider("app").getImmediate();this._storage=new Oi(Ae),this._heartbeatsCachePromise=this._storage.read().then(dt=>(this._heartbeatsCache=dt,dt))}triggerHeartbeat(){var X=this;return(0,f.Z)(function*(){const dt=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Et=zt();if(null===X._heartbeatsCache&&(X._heartbeatsCache=yield X._heartbeatsCachePromise),X._heartbeatsCache.lastSentHeartbeatDate!==Et&&!X._heartbeatsCache.heartbeats.some(jt=>jt.date===Et))return X._heartbeatsCache.heartbeats.push({date:Et,agent:dt}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(jt=>{const ft=new Date(jt.date).valueOf();return Date.now()-ft<=2592e6}),X._storage.overwrite(X._heartbeatsCache)})()}getHeartbeatsHeader(){var X=this;return(0,f.Z)(function*(){if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null===X._heartbeatsCache||0===X._heartbeatsCache.heartbeats.length)return"";const Ae=zt(),{heartbeatsToSend:dt,unsentEntries:Et}=function xr(ae,X=1024){const Ae=[];let dt=ae.slice();for(const Et of ae){const jt=Ae.find(ft=>ft.agent===Et.agent);if(jt){if(jt.dates.push(Et.date),qi(Ae)>X){jt.dates.pop();break}}else if(Ae.push({agent:Et.agent,dates:[Et.date]}),qi(Ae)>X){Ae.pop();break}dt=dt.slice(1)}return{heartbeatsToSend:Ae,unsentEntries:dt}}(X._heartbeatsCache.heartbeats),jt=(0,re.L)(JSON.stringify({version:2,heartbeats:dt}));return X._heartbeatsCache.lastSentHeartbeatDate=Ae,Et.length>0?(X._heartbeatsCache.heartbeats=Et,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),jt})()}}function zt(){return(new Date).toISOString().substring(0,10)}class Oi{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,f.Z)(function*(){return(yield X._canUseIndexedDBPromise)&&(yield function pe(ae){return Q.apply(this,arguments)}(X.app))||{heartbeats:[]}})()}overwrite(X){var Ae=this;return(0,f.Z)(function*(){var dt;if(yield Ae._canUseIndexedDBPromise){const jt=yield Ae.read();return Oe(Ae.app,{lastSentHeartbeatDate:null!==(dt=X.lastSentHeartbeatDate)&&void 0!==dt?dt:jt.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var Ae=this;return(0,f.Z)(function*(){var dt;if(yield Ae._canUseIndexedDBPromise){const jt=yield Ae.read();return Oe(Ae.app,{lastSentHeartbeatDate:null!==(dt=X.lastSentHeartbeatDate)&&void 0!==dt?dt:jt.lastSentHeartbeatDate,heartbeats:[...jt.heartbeats,...X.heartbeats]})}})()}}function qi(ae){return(0,re.L)(JSON.stringify({version:2,heartbeats:ae})).length}!function Ma(ae){pi(new Y.wA("platform-logger",X=>new Xe(X),"PRIVATE")),pi(new Y.wA("heartbeat",X=>new cn(X),"PRIVATE")),Hn(st,"0.9.10",ae),Hn(st,"0.9.10","esm2017"),Hn("fire-js","")}("")},4859:(gt,be,k)=>{k.d(be,{H0:()=>ve,wA:()=>O});var f=k(5861),Y=k(2090);class O{constructor(j,B,q){this.name=j,this.instanceFactory=B,this.type=q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const re="[DEFAULT]";class ie{constructor(j,B){this.name=j,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const B=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(B)){const q=new Y.BH;if(this.instancesDeferred.set(B,q),this.isInitialized(B)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:B});je&&q.resolve(je)}catch{}}return this.instancesDeferred.get(B).promise}getImmediate(j){var B;const q=this.normalizeInstanceIdentifier(j?.identifier),je=null!==(B=j?.optional)&&void 0!==B&&B;if(!this.isInitialized(q)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:q})}catch(De){if(je)return null;throw De}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function fe(ce){return"EAGER"===ce.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[B,q]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(B);try{const De=this.getOrInitializeService({instanceIdentifier:je});q.resolve(De)}catch{}}}}clearInstance(j=re){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,f.Z)(function*(){const B=Array.from(j.instances.values());yield Promise.all([...B.filter(q=>"INTERNAL"in q).map(q=>q.INTERNAL.delete()),...B.filter(q=>"_delete"in q).map(q=>q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=re){return this.instances.has(j)}getOptions(j=re){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:B={}}=j,q=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(q))throw Error(`${this.name}(${q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:q,options:B});for(const[De,We]of this.instancesDeferred.entries())q===this.normalizeInstanceIdentifier(De)&&We.resolve(je);return je}onInit(j,B){var q;const je=this.normalizeInstanceIdentifier(B),De=null!==(q=this.onInitCallbacks.get(je))&&void 0!==q?q:new Set;De.add(j),this.onInitCallbacks.set(je,De);const We=this.instances.get(je);return We&&j(We,je),()=>{De.delete(j)}}invokeOnInitCallbacks(j,B){const q=this.onInitCallbacks.get(B);if(q)for(const je of q)try{je(j,B)}catch{}}getOrInitializeService({instanceIdentifier:j,options:B={}}){let q=this.instances.get(j);if(!q&&this.component&&(q=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=j,ce===re?void 0:ce),options:B}),this.instances.set(j,q),this.instancesOptions.set(j,B),this.invokeOnInitCallbacks(q,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,q)}catch{}var ce;return q||null}normalizeInstanceIdentifier(j=re){return this.component?this.component.multipleInstances?j:re:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ve{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const B=this.getProvider(j.name);if(B.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);B.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const B=new ie(j,this);return this.providers.set(j,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(gt,be,k)=>{k.d(be,{Am:()=>ce,Ub:()=>ve,Yd:()=>fe,in:()=>Y});const f=[];var Y=(()=>{return(j=Y||(Y={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",Y;var j})();const O={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},re=Y.INFO,ie={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},se=(j,B,...q)=>{if(B<j.logLevel)return;const je=(new Date).toISOString(),De=ie[B];if(!De)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[De](`[${je}]  ${j.name}:`,...q)};class fe{constructor(B){this.name=B,this._logLevel=re,this._logHandler=se,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in Y))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?O[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...B),this._logHandler(this,Y.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...B),this._logHandler(this,Y.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...B),this._logHandler(this,Y.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...B),this._logHandler(this,Y.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...B),this._logHandler(this,Y.ERROR,...B)}}function ve(j){f.forEach(B=>{B.setLogLevel(j)})}function ce(j,B){for(const q of f){let je=null;B&&B.level&&(je=O[B.level]),q.userLogHandler=null===j?null:(De,We,...ct)=>{const de=ct.map(Me=>{if(null==Me)return null;if("string"==typeof Me)return Me;if("number"==typeof Me||"boolean"==typeof Me)return Me.toString();if(Me instanceof Error)return Me.message;try{return JSON.stringify(Me)}catch{return null}}).filter(Me=>Me).join(" ");We>=(je??De.logLevel)&&j({level:Y[We].toLowerCase(),message:de,args:ct,type:De.name})}}}},259:(gt,be,k)=>{k.d(be,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=k(6881);(0,f.registerVersion)("firebase","9.22.0","app")},9260:(gt,be,k)=>{k.d(be,{Z:()=>f.Z});var f=k(3942);f.Z.registerVersion("firebase","9.22.0","app-compat")},2644:(gt,be,k)=>{k.r(be);var f=k(5861),Y=k(3942),O=k(2090),re=k(6881),ie=k(655),se=k(1877),fe=k(4859);const ce={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q_EMAIL_SIGNIN="EMAIL_SIGNIN",q_PASSWORD_RESET="PASSWORD_RESET",q_RECOVER_EMAIL="RECOVER_EMAIL",q_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",q_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",q_VERIFY_EMAIL="VERIFY_EMAIL";const We=function je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},ct=function De(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},de=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xe=new se.Yd("@firebase/auth");function Re(y,...h){xe.logLevel<=se.in.ERROR&&xe.error(`Auth (${re.SDK_VERSION}): ${y}`,...h)}function _e(y,...h){throw nt(y,...h)}function we(y,...h){return nt(y,...h)}function $e(y,h,p){const _=Object.assign(Object.assign({},ct()),{[h]:p});return new O.LL("auth","Firebase",_).create(h,{appName:y.name})}function Ne(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&_e(y,"argument-error"),$e(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nt(y,...h){if("string"!=typeof y){const p=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(p,..._)}return de.create(y,...h)}function ne(y,h,...p){if(!y)throw nt(h,...p)}function Ct(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Re(h),new Error(h)}function Xe(y,h){y||Ct(h)}function Ht(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function st(){return"http:"===le()||"https:"===le()}function le(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Te{constructor(h,p){this.shortDelay=h,this.longDelay=p,Xe(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function he(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(st()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function He(y,h){Xe(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class Be{static initialize(h,p,_){this.fetchImpl=h,p&&(this.headersImpl=p),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ct("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ct("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ct("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ot=new Te(3e4,6e4);function xt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Je(y,h,p,_){return $t.apply(this,arguments)}function $t(){return($t=(0,f.Z)(function*(y,h,p,_,T={}){return Dt(y,T,(0,f.Z)(function*(){let x={},U={};_&&("GET"===h?U=_:x={body:JSON.stringify(_)});const Z=(0,O.xO)(Object.assign({key:y.config.apiKey},U)).slice(1),Ce=yield y._getAdditionalHeaders();return Ce["Content-Type"]="application/json",y.languageCode&&(Ce["X-Firebase-Locale"]=y.languageCode),Be.fetch()(Sr(y,y.config.apiHost,p,Z),Object.assign({method:h,headers:Ce,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function Dt(y,h,p){return nn.apply(this,arguments)}function nn(){return(nn=(0,f.Z)(function*(y,h,p){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},lt),h);try{const T=new Vr(y),x=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const U=yield x.json();if("needConfirmation"in U)throw Ar(y,"account-exists-with-different-credential",U);if(x.ok&&!("errorMessage"in U))return U;{const Z=x.ok?U.errorMessage:U.error.message,[Ce,Ve]=Z.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ce)throw Ar(y,"credential-already-in-use",U);if("EMAIL_EXISTS"===Ce)throw Ar(y,"email-already-in-use",U);if("USER_DISABLED"===Ce)throw Ar(y,"user-disabled",U);const et=_[Ce]||Ce.toLowerCase().replace(/[_\s]+/g,"-");if(Ve)throw $e(y,et,Ve);_e(y,et)}}catch(T){if(T instanceof O.ZR)throw T;_e(y,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function vn(y,h,p,_){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,f.Z)(function*(y,h,p,_,T={}){const x=yield Je(y,h,p,_,T);return"mfaPendingCredential"in x&&_e(y,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function Sr(y,h,p,_){const T=`${h}${p}?${_}`;return y.config.emulator?He(y.config,T):`${y.config.apiScheme}://${T}`}class Vr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,_)=>{this.timer=setTimeout(()=>_(we(this.auth,"network-request-failed")),ot.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ar(y,h,p){const _={appName:y.name};p.email&&(_.email=p.email),p.phoneNumber&&(_.phoneNumber=p.phoneNumber);const T=we(y,h,_);return T.customData._tokenResponse=p,T}function fi(){return(fi=(0,f.Z)(function*(y,h){return Je(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Ys(){return(Ys=(0,f.Z)(function*(y,h){return Je(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ht(){return(ht=(0,f.Z)(function*(y,h){return Je(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Yr(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function Ur(){return(Ur=(0,f.Z)(function*(y,h=!1){const p=(0,O.m9)(y),_=yield p.getIdToken(h),T=en(_);ne(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const x="object"==typeof T.firebase?T.firebase:void 0,U=x?.sign_in_provider;return{claims:T,token:_,authTime:Yr(Gi(T.auth_time)),issuedAtTime:Yr(Gi(T.iat)),expirationTime:Yr(Gi(T.exp)),signInProvider:U||null,signInSecondFactor:x?.sign_in_second_factor||null}})).apply(this,arguments)}function Gi(y){return 1e3*Number(y)}function en(y){const[h,p,_]=y.split(".");if(void 0===h||void 0===p||void 0===_)return Re("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(p);return T?JSON.parse(T):(Re("Failed to decode base64 JWT payload"),null)}catch(T){return Re("Caught error parsing JWT payload as JSON",T?.toString()),null}}function rt(y,h){return At.apply(this,arguments)}function At(){return(At=(0,f.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(_){throw _ instanceof O.ZR&&function pi({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}class Qr{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield p.iteration()}),_)}iteration(){var h=this;return(0,f.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&h.schedule(!0))}h.schedule()})()}}class ar{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yr(this.lastLoginAt),this.creationTime=Yr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Br(y){return Sn.apply(this,arguments)}function Sn(){return Sn=(0,f.Z)(function*(y){var h;const p=y.auth,_=yield y.getIdToken(),T=yield rt(y,function Mr(y,h){return ht.apply(this,arguments)}(p,{idToken:_}));ne(T?.users.length,p,"internal-error");const x=T.users[0];y._notifyReloadListener(x);const U=null!==(h=x.providerUserInfo)&&void 0!==h&&h.length?function Zt(y){return y.map(h=>{var{providerId:p}=h,_=(0,ie._T)(h,["providerId"]);return{providerId:p,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}(x.providerUserInfo):[],Z=function bs(y,h){return[...y.filter(_=>!h.some(T=>T.providerId===_.providerId)),...h]}(y.providerData,U),et=!!y.isAnonymous&&!(y.email&&x.passwordHash||Z?.length),tt={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:Z,metadata:new ar(x.createdAt,x.lastLoginAt),isAnonymous:et};Object.assign(y,tt)}),Sn.apply(this,arguments)}function gn(){return(gn=(0,f.Z)(function*(y){const h=(0,O.m9)(y);yield Br(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function sn(){return(sn=(0,f.Z)(function*(y,h){const p=yield Dt(y,{},(0,f.Z)(function*(){const _=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:x}=y.config,U=Sr(y,T,"/v1/token",`key=${x}`),Z=yield y._getAdditionalHeaders();return Z["Content-Type"]="application/x-www-form-urlencoded",Be.fetch()(U,{method:"POST",headers:Z,body:_})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class gi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){ne(h.idToken,"internal-error"),ne(typeof h.idToken<"u","internal-error"),ne(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function rn(y){const h=en(y);return ne(h,"internal-error"),ne(typeof h.exp<"u","internal-error"),ne(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var _=this;return(0,f.Z)(function*(){return ne(!_.accessToken||_.refreshToken,h,"user-token-expired"),p||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var _=this;return(0,f.Z)(function*(){const{accessToken:T,refreshToken:x,expiresIn:U}=yield function zi(y,h){return sn.apply(this,arguments)}(h,p);_.updateTokensAndExpiration(T,x,Number(U))})()}updateTokensAndExpiration(h,p,_){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,p){const{refreshToken:_,accessToken:T,expirationTime:x}=p,U=new gi;return _&&(ne("string"==typeof _,"internal-error",{appName:h}),U.refreshToken=_),T&&(ne("string"==typeof T,"internal-error",{appName:h}),U.accessToken=T),x&&(ne("number"==typeof x,"internal-error",{appName:h}),U.expirationTime=x),U}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new gi,this.toJSON())}_performRefresh(){return Ct("not implemented")}}function Rn(y,h){ne("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class Hn{constructor(h){var{uid:p,auth:_,stsTokenManager:T}=h,x=(0,ie._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=_,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new ar(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,f.Z)(function*(){const _=yield rt(p,p.stsTokenManager.getToken(p.auth,h));return ne(_,p.auth,"internal-error"),p.accessToken!==_&&(p.accessToken=_,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),_})()}getIdTokenResult(h){return function mr(y){return Ur.apply(this,arguments)}(this,h)}reload(){return function Jr(y){return gn.apply(this,arguments)}(this)}_assign(h){this!==h&&(ne(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const p=new Hn(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(h){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var _=this;return(0,f.Z)(function*(){let T=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),T=!0),p&&(yield Br(_)),yield _.auth._persistUserIfCurrent(_),T&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,f.Z)(function*(){const p=yield h.getIdToken();return yield rt(h,function Cs(y,h){return fi.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var _,T,x,U,Z,Ce,Ve,et;const tt=null!==(_=p.displayName)&&void 0!==_?_:void 0,Dn=null!==(T=p.email)&&void 0!==T?T:void 0,Ji=null!==(x=p.phoneNumber)&&void 0!==x?x:void 0,Oc=null!==(U=p.photoURL)&&void 0!==U?U:void 0,ip=null!==(Z=p.tenantId)&&void 0!==Z?Z:void 0,Bn=null!==(Ce=p._redirectEventId)&&void 0!==Ce?Ce:void 0,sp=null!==(Ve=p.createdAt)&&void 0!==Ve?Ve:void 0,Iv=null!==(et=p.lastLoginAt)&&void 0!==et?et:void 0,{uid:vh,emailVerified:sm,isAnonymous:op,providerData:_h,stsTokenManager:Dv}=p;ne(vh&&Dv,h,"internal-error");const kw=gi.fromJSON(this.name,Dv);ne("string"==typeof vh,h,"internal-error"),Rn(tt,h.name),Rn(Dn,h.name),ne("boolean"==typeof sm,h,"internal-error"),ne("boolean"==typeof op,h,"internal-error"),Rn(Ji,h.name),Rn(Oc,h.name),Rn(ip,h.name),Rn(Bn,h.name),Rn(sp,h.name),Rn(Iv,h.name);const ql=new Hn({uid:vh,auth:h,email:Dn,emailVerified:sm,displayName:tt,isAnonymous:op,photoURL:Oc,phoneNumber:Ji,tenantId:ip,stsTokenManager:kw,createdAt:sp,lastLoginAt:Iv});return _h&&Array.isArray(_h)&&(ql.providerData=_h.map(Cv=>Object.assign({},Cv))),Bn&&(ql._redirectEventId=Bn),ql}static _fromIdTokenResponse(h,p,_=!1){return(0,f.Z)(function*(){const T=new gi;T.updateFromServerResponse(p);const x=new Hn({uid:p.localId,auth:h,stsTokenManager:T,isAnonymous:_});return yield Br(x),x})()}}const Ni=new Map;function En(y){Xe(y instanceof Function,"Expected a class definition");let h=Ni.get(y);return h?(Xe(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,Ni.set(y,h),h)}const jr=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(p,_){var T=this;return(0,f.Z)(function*(){T.storage[p]=_})()}_get(p){var _=this;return(0,f.Z)(function*(){const T=_.storage[p];return void 0===T?null:T})()}_remove(p){var _=this;return(0,f.Z)(function*(){delete _.storage[p]})()}_addListener(p,_){}_removeListener(p,_){}}return y.type="NONE",y})();function V(y,h,p){return`firebase:${y}:${h}:${p}`}class L{constructor(h,p,_){this.persistence=h,this.auth=p,this.userKey=_;const{config:T,name:x}=this.auth;this.fullUserKey=V(this.userKey,T.apiKey,x),this.fullPersistenceKey=V("persistence",T.apiKey,x),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?Hn._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,f.Z)(function*(){if(p.persistence===h)return;const _=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,_?p.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,_="authUser"){return(0,f.Z)(function*(){if(!p.length)return new L(En(jr),h,_);const T=(yield Promise.all(p.map(function(){var Ve=(0,f.Z)(function*(et){if(yield et._isAvailable())return et});return function(et){return Ve.apply(this,arguments)}}()))).filter(Ve=>Ve);let x=T[0]||En(jr);const U=V(_,h.config.apiKey,h.name);let Z=null;for(const Ve of p)try{const et=yield Ve._get(U);if(et){const tt=Hn._fromJSON(h,et);Ve!==x&&(Z=tt),x=Ve;break}}catch{}const Ce=T.filter(Ve=>Ve._shouldAllowMigration);return x._shouldAllowMigration&&Ce.length?(x=Ce[0],Z&&(yield x._set(U,Z.toJSON())),yield Promise.all(p.map(function(){var Ve=(0,f.Z)(function*(et){if(et!==x)try{yield et._remove(U)}catch{}});return function(et){return Ve.apply(this,arguments)}}())),new L(x,h,_)):new L(x,h,_)})()}}function z(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(bt(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(pe(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ln(h))return"Blackberry";if(bn(h))return"Webos";if(Q(h))return"Safari";if((h.includes("chrome/")||Oe(h))&&!h.includes("edge/"))return"Chrome";if(Yt(h))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function pe(y=(0,O.z$)()){return/firefox\//i.test(y)}function Q(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Oe(y=(0,O.z$)()){return/crios\//i.test(y)}function bt(y=(0,O.z$)()){return/iemobile/i.test(y)}function Yt(y=(0,O.z$)()){return/android/i.test(y)}function Ln(y=(0,O.z$)()){return/blackberry/i.test(y)}function bn(y=(0,O.z$)()){return/webos/i.test(y)}function cn(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function qi(y=(0,O.z$)()){return cn(y)||Yt(y)||bn(y)||Ln(y)||/windows phone/i.test(y)||bt(y)}function ae(y,h=[]){let p;switch(y){case"Browser":p=z((0,O.z$)());break;case"Worker":p=`${z((0,O.z$)())}-${y}`;break;default:p=y}const _=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${re.SDK_VERSION}/${_}`}function Ae(){return(Ae=(0,f.Z)(function*(y){return(yield Je(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function dt(y,h){return Et.apply(this,arguments)}function Et(){return(Et=(0,f.Z)(function*(y,h){return Je(y,"GET","/v2/recaptchaConfig",xt(y,h))})).apply(this,arguments)}function jt(y){return void 0!==y&&void 0!==y.getResponse}function ft(y){return void 0!==y&&void 0!==y.enterprise}class tn{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(p=>"EMAIL_PASSWORD_PROVIDER"===p.provider&&"OFF"!==p.enforcementState)}}function ur(y){return new Promise((h,p)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=h,_.onerror=T=>{const x=we("internal-error");x.customData=T,p(x)},_.type="text/javascript",_.charset="UTF-8",function Qt(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(_)})}function Gn(y){return`__${y}${Math.floor(1e6*Math.random())}`}const $o="NO_RECAPTCHA";class mi{constructor(h){this.type="recaptcha-enterprise",this.auth=fn(h)}verify(h="verify",p=!1){var _=this;return(0,f.Z)(function*(){function x(){return x=(0,f.Z)(function*(Z){if(!p){if(null==Z.tenantId&&null!=Z._agentRecaptchaConfig)return Z._agentRecaptchaConfig.siteKey;if(null!=Z.tenantId&&void 0!==Z._tenantRecaptchaConfigs[Z.tenantId])return Z._tenantRecaptchaConfigs[Z.tenantId].siteKey}return new Promise(function(){var Ce=(0,f.Z)(function*(Ve,et){dt(Z,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(tt=>{if(void 0!==tt.recaptchaKey){const Dn=new tn(tt);return null==Z.tenantId?Z._agentRecaptchaConfig=Dn:Z._tenantRecaptchaConfigs[Z.tenantId]=Dn,Ve(Dn.siteKey)}et(new Error("recaptcha Enterprise site key undefined"))}).catch(tt=>{et(tt)})});return function(Ve,et){return Ce.apply(this,arguments)}}())}),x.apply(this,arguments)}function U(Z,Ce,Ve){const et=window.grecaptcha;ft(et)?et.enterprise.ready(()=>{et.enterprise.execute(Z,{action:h}).then(tt=>{Ce(tt)}).catch(()=>{Ce($o)})}):Ve(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Z,Ce)=>{(function T(Z){return x.apply(this,arguments)})(_.auth).then(Ve=>{if(!p&&ft(window.grecaptcha))U(Ve,Z,Ce);else{if(typeof window>"u")return void Ce(new Error("RecaptchaVerifier is only supported in browser"));ur("https://www.google.com/recaptcha/enterprise.js?render="+Ve).then(()=>{U(Ve,Z,Ce)}).catch(et=>{Ce(et)})}}).catch(Ve=>{Ce(Ve)})})})()}}function qe(y,h,p){return kt.apply(this,arguments)}function kt(){return(kt=(0,f.Z)(function*(y,h,p,_=!1){const T=new mi(y);let x;try{x=yield T.verify(p)}catch{x=yield T.verify(p,!0)}const U=Object.assign({},h);return Object.assign(U,_?{captchaResp:x}:{captchaResponse:x}),Object.assign(U,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(U,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),U})).apply(this,arguments)}class In{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const _=x=>new Promise((U,Z)=>{try{U(h(x))}catch(Ce){Z(Ce)}});_.onAbort=p,this.queue.push(_);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,f.Z)(function*(){if(p.auth.currentUser===h)return;const _=[];try{for(const T of p.queue)yield T(h),T.onAbort&&_.push(T.onAbort)}catch(T){_.reverse();for(const x of _)try{x()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class yi{constructor(h,p,_,T){this.app=h,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=_,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zn(this),this.idTokenSubscription=new zn(this),this.beforeStateQueue=new In(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=de,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(h,p){var _=this;return p&&(this._popupRedirectResolver=En(p)),this._initializationPromise=this.queue((0,f.Z)(function*(){var T,x;if(!_._deleted&&(_.persistenceManager=yield L.create(_,h),!_._deleted)){if(null!==(T=_._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(p),_.lastNotifiedUid=(null===(x=_.currentUser)||void 0===x?void 0:x.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,f.Z)(function*(){var _;const T=yield p.assertedPersistence.getCurrentUser();let x=T,U=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const Z=null===(_=p.redirectUser)||void 0===_?void 0:_._redirectEventId,Ce=x?._redirectEventId,Ve=yield p.tryRedirectSignIn(h);(!Z||Z===Ce)&&Ve?.user&&(x=Ve.user,U=!0)}if(!x)return p.directlySetCurrentUser(null);if(!x._redirectEventId){if(U)try{yield p.beforeStateQueue.runMiddleware(x)}catch(Z){x=T,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(Z))}return x?p.reloadAndSetCurrentUserOrClear(x):p.directlySetCurrentUser(null)}return ne(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===x._redirectEventId?p.directlySetCurrentUser(x):p.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(h){var p=this;return(0,f.Z)(function*(){let _=null;try{_=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,f.Z)(function*(){try{yield Br(h)}catch(_){if("auth/network-request-failed"!==_?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Ee(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,f.Z)(function*(){const _=h?(0,O.m9)(h):null;return _&&ne(_.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(_&&_._clone(p))})()}_updateCurrentUser(h,p=!1){var _=this;return(0,f.Z)(function*(){if(!_._deleted)return h&&ne(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),p||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,f.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,f.Z)(function*(){yield p.assertedPersistence.setPersistence(En(h))}))}initializeRecaptchaConfig(){var h=this;return(0,f.Z)(function*(){const p=yield dt(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),_=new tn(p);null==h.tenantId?h._agentRecaptchaConfig=_:h._tenantRecaptchaConfigs[h.tenantId]=_,_.emailPasswordEnabled&&new mi(h).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,_){return this.registerStateListener(this.authStateSubscription,h,p,_)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,_){return this.registerStateListener(this.idTokenSubscription,h,p,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var _=this;return(0,f.Z)(function*(){const T=yield _.getOrInitRedirectPersistenceManager(p);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,f.Z)(function*(){if(!p.redirectPersistenceManager){const _=h&&En(h)||p._popupRedirectResolver;ne(_,p,"argument-error"),p.redirectPersistenceManager=yield L.create(p,[En(_._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,f.Z)(function*(){var _,T;return p._isInitialized&&(yield p.queue((0,f.Z)(function*(){}))),(null===(_=p._currentUser)||void 0===_?void 0:_._redirectEventId)===h?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,f.Z)(function*(){if(h===p.currentUser)return p.queue((0,f.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,_,T){if(this._deleted)return()=>{};const x="function"==typeof p?p:p.next.bind(p),U=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(U,this,"internal-error"),U.then(()=>x(this.currentUser)),"function"==typeof p?h.addObserver(p,_,T):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,f.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ae(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var p;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();T&&(_["X-Firebase-Client"]=T);const x=yield h._getAppCheckToken();return x&&(_["X-Firebase-AppCheck"]=x),_})()}_getAppCheckToken(){var h=this;return(0,f.Z)(function*(){var p;const _=yield null===(p=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return _?.error&&function Ue(y,...h){xe.logLevel<=se.in.WARN&&xe.warn(`Auth (${re.SDK_VERSION}): ${y}`,...h)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function fn(y){return(0,O.m9)(y)}class zn{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function rs(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Ra(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class is{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return Ct("not implemented")}_getIdTokenResponse(h){return Ct("not implemented")}_linkToIdToken(h,p){return Ct("not implemented")}_getReauthenticationResolver(h){return Ct("not implemented")}}function Xs(y,h){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,f.Z)(function*(y,h){return Je(y,"POST","/v1/accounts:resetPassword",xt(y,h))})).apply(this,arguments)}function Ho(y,h){return ss.apply(this,arguments)}function ss(){return(ss=(0,f.Z)(function*(y,h){return Je(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Go(){return(Go=(0,f.Z)(function*(y,h){return Je(y,"POST","/v1/accounts:update",xt(y,h))})).apply(this,arguments)}function yr(y,h){return _n.apply(this,arguments)}function _n(){return(_n=(0,f.Z)(function*(y,h){return vn(y,"POST","/v1/accounts:signInWithPassword",xt(y,h))})).apply(this,arguments)}function Xr(y,h){return Na.apply(this,arguments)}function Na(){return(Na=(0,f.Z)(function*(y,h){return Je(y,"POST","/v1/accounts:sendOobCode",xt(y,h))})).apply(this,arguments)}function zo(){return(zo=(0,f.Z)(function*(y,h){return Xr(y,h)})).apply(this,arguments)}function Ts(y,h){return eo.apply(this,arguments)}function eo(){return(eo=(0,f.Z)(function*(y,h){return Xr(y,h)})).apply(this,arguments)}function cr(y,h){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,f.Z)(function*(y,h){return Xr(y,h)})).apply(this,arguments)}function ti(){return(ti=(0,f.Z)(function*(y,h){return Xr(y,h)})).apply(this,arguments)}function qo(){return(qo=(0,f.Z)(function*(y,h){return vn(y,"POST","/v1/accounts:signInWithEmailLink",xt(y,h))})).apply(this,arguments)}function vi(){return(vi=(0,f.Z)(function*(y,h){return vn(y,"POST","/v1/accounts:signInWithEmailLink",xt(y,h))})).apply(this,arguments)}class ku extends is{constructor(h,p,_,T=null){super("password",_),this._email=h,this._password=p,this._tenantId=T}static _fromEmailAndPassword(h,p){return new ku(h,p,"password")}static _fromEmailAndCode(h,p,_=null){return new ku(h,p,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,f.Z)(function*(){var _;switch(p.signInMethod){case"password":const T={returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=h._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const x=yield qe(h,T,"signInWithPassword");return yr(h,x)}return yr(h,T).catch(function(){var x=(0,f.Z)(function*(U){if("auth/missing-recaptcha-token"===U.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Z=yield qe(h,T,"signInWithPassword");return yr(h,Z)}return Promise.reject(U)});return function(U){return x.apply(this,arguments)}}());case"emailLink":return function Pa(y,h){return qo.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:_e(h,"internal-error")}})()}_linkToIdToken(h,p){var _=this;return(0,f.Z)(function*(){switch(_.signInMethod){case"password":return Ho(h,{idToken:p,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function sl(y,h){return vi.apply(this,arguments)}(h,{idToken:p,email:_._email,oobCode:_._password});default:_e(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function ki(y,h){return Td.apply(this,arguments)}function Td(){return(Td=(0,f.Z)(function*(y,h){return vn(y,"POST","/v1/accounts:signInWithIdp",xt(y,h))})).apply(this,arguments)}class os extends is{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new os(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):_e("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:T}=p,x=(0,ie._T)(p,["providerId","signInMethod"]);if(!_||!T)return null;const U=new os(_,T);return U.idToken=x.idToken||void 0,U.accessToken=x.accessToken||void 0,U.secret=x.secret,U.nonce=x.nonce,U.pendingToken=x.pendingToken||null,U}_getIdTokenResponse(h){return ki(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,ki(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,ki(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function ol(){return(ol=(0,f.Z)(function*(y,h){return Je(y,"POST","/v1/accounts:sendVerificationCode",xt(y,h))})).apply(this,arguments)}function Sd(){return(Sd=(0,f.Z)(function*(y,h){return vn(y,"POST","/v1/accounts:signInWithPhoneNumber",xt(y,h))})).apply(this,arguments)}function Fu(){return(Fu=(0,f.Z)(function*(y,h){const p=yield vn(y,"POST","/v1/accounts:signInWithPhoneNumber",xt(y,h));if(p.temporaryProof)throw Ar(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Ad={USER_NOT_FOUND:"user-not-found"};function Lu(){return(Lu=(0,f.Z)(function*(y,h){return vn(y,"POST","/v1/accounts:signInWithPhoneNumber",xt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Ad)})).apply(this,arguments)}class _i extends is{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new _i({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new _i({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function kg(y,h){return Sd.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function xf(y,h){return Fu.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function av(y,h){return Lu.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:_,verificationCode:T}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:_,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:_,phoneNumber:T,temporaryProof:x}=h;return _||p||T||x?new _i({verificationId:p,verificationCode:_,phoneNumber:T,temporaryProof:x}):null}}class Wo{constructor(h){var p,_,T,x,U,Z;const Ce=(0,O.zd)((0,O.pd)(h)),Ve=null!==(p=Ce.apiKey)&&void 0!==p?p:null,et=null!==(_=Ce.oobCode)&&void 0!==_?_:null,tt=function Rf(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ce.mode)&&void 0!==T?T:null);ne(Ve&&et&&tt,"argument-error"),this.apiKey=Ve,this.operation=tt,this.code=et,this.continueUrl=null!==(x=Ce.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(U=Ce.languageCode)&&void 0!==U?U:null,this.tenantId=null!==(Z=Ce.tenantId)&&void 0!==Z?Z:null}static parseLink(h){const p=function Md(y){const h=(0,O.zd)((0,O.pd)(y)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,_=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(_?(0,O.zd)((0,O.pd)(_)).link:null)||_||p||h||y}(h);try{return new Wo(p)}catch{return null}}}let Nf=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,_){return ku._fromEmailAndPassword(p,_)}static credentialWithLink(p,_){const T=Wo.parseLink(_);return ne(T,"argument-error"),ku._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class as{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Zi extends as{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class to extends Zi{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return ne("providerId"in p&&"signInMethod"in p,"argument-error"),os._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return ne(h.idToken||h.accessToken,"argument-error"),os._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return to.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return to.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:_,oauthTokenSecret:T,pendingToken:x,nonce:U,providerId:Z}=h;if(!_&&!T&&!p&&!x||!Z)return null;try{return new to(Z)._credential({idToken:p,accessToken:_,nonce:U,pendingToken:x})}catch{return null}}}let al=(()=>{class y extends Zi{constructor(){super("facebook.com")}static credential(p){return os._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Oa=(()=>{class y extends Zi{constructor(){super("google.com"),this.addScope("profile")}static credential(p,_){return os._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:T}=p;if(!_&&!T)return null;try{return y.credential(_,T)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),xd=(()=>{class y extends Zi{constructor(){super("github.com")}static credential(p){return os._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Ss extends is{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return ki(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,ki(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,ki(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:T,pendingToken:x}=p;return _&&T&&x&&_===T?new Ss(_,x):null}static _create(h,p){return new Ss(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Vu extends as{constructor(h){ne(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Vu.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Vu.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=Ss.fromJSON(h);return ne(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:_}=h;if(!p||!_)return null;try{return Ss._create(_,p)}catch{return null}}}let Uu=(()=>{class y extends Zi{constructor(){super("twitter.com")}static credential(p,_){return os._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:_,oauthTokenSecret:T}=p;if(!_||!T)return null;try{return y.credential(_,T)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function As(y,h){return $r.apply(this,arguments)}function $r(){return($r=(0,f.Z)(function*(y,h){return vn(y,"POST","/v1/accounts:signUp",xt(y,h))})).apply(this,arguments)}class Rr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,_,T=!1){return(0,f.Z)(function*(){const x=yield Hn._fromIdTokenResponse(h,_,T),U=ka(_);return new Rr({user:x,providerId:U,_tokenResponse:_,operationType:p})})()}static _forOperation(h,p,_){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const T=ka(_);return new Rr({user:h,providerId:T,_tokenResponse:_,operationType:p})})()}}function ka(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Zo(){return(Zo=(0,f.Z)(function*(y){var h;const p=fn(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new Rr({user:p.currentUser,providerId:null,operationType:"signIn"});const _=yield As(p,{returnSecureToken:!0}),T=yield Rr._fromIdTokenResponse(p,"signIn",_,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class us extends O.ZR{constructor(h,p,_,T){var x;super(p.code,p.message),this.operationType=_,this.user=T,Object.setPrototypeOf(this,us.prototype),this.customData={appName:h.name,tenantId:null!==(x=h.tenantId)&&void 0!==x?x:void 0,_serverResponse:p.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,p,_,T){return new us(h,p,_,T)}}function dr(y,h,p,_){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?us._fromErrorAndOperation(y,x,h,_):x})}function Rd(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Nr(){return Nr=(0,f.Z)(function*(y,h){const p=(0,O.m9)(y);yield cs(!0,p,h);const{providerUserInfo:_}=yield function jo(y,h){return Ys.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),T=Rd(_||[]);return p.providerData=p.providerData.filter(x=>T.has(x.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),Nr.apply(this,arguments)}function er(y,h){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,f.Z)(function*(y,h,p=!1){const _=yield rt(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return Rr._forOperation(y,"link",_)})).apply(this,arguments)}function cs(y,h,p){return cl.apply(this,arguments)}function cl(){return(cl=(0,f.Z)(function*(y,h,p){yield Br(h);const T=!1===y?"provider-already-linked":"no-such-provider";ne(Rd(h.providerData).has(p)===y,h.auth,T)})).apply(this,arguments)}function Ms(y,h){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,f.Z)(function*(y,h,p=!1){const{auth:_}=y,T="reauthenticate";try{const x=yield rt(y,dr(_,T,h,y),p);ne(x.idToken,_,"internal-error");const U=en(x.idToken);ne(U,_,"internal-error");const{sub:Z}=U;return ne(y.uid===Z,_,"user-mismatch"),Rr._forOperation(y,T,x)}catch(x){throw"auth/user-not-found"===x?.code&&_e(_,"user-mismatch"),x}})).apply(this,arguments)}function Fa(y,h){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,f.Z)(function*(y,h,p=!1){const _="signIn",T=yield dr(y,_,h),x=yield Rr._fromIdTokenResponse(y,_,T);return p||(yield y._updateCurrentUser(x.user)),x})).apply(this,arguments)}function La(y,h){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,f.Z)(function*(y,h){return Fa(fn(y),h)})).apply(this,arguments)}function Od(y,h){return ju.apply(this,arguments)}function ju(){return(ju=(0,f.Z)(function*(y,h){const p=(0,O.m9)(y);return yield cs(!1,p,h.providerId),er(p,h)})).apply(this,arguments)}function kd(y,h){return $u.apply(this,arguments)}function $u(){return($u=(0,f.Z)(function*(y,h){return Ms((0,O.m9)(y),h)})).apply(this,arguments)}function Fd(){return(Fd=(0,f.Z)(function*(y,h){return vn(y,"POST","/v1/accounts:signInWithCustomToken",xt(y,h))})).apply(this,arguments)}function Ft(){return Ft=(0,f.Z)(function*(y,h){const p=fn(y),_=yield function Fg(y,h){return Fd.apply(this,arguments)}(p,{token:h,returnSecureToken:!0}),T=yield Rr._fromIdTokenResponse(p,"signIn",_);return yield p._updateCurrentUser(T.user),T}),Ft.apply(this,arguments)}class Hu{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Gu._fromServerResponse(h,p):"totpInfo"in p?tr._fromServerResponse(h,p):_e(h,"internal-error")}}class Gu extends Hu{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Gu(p)}}class tr extends Hu{constructor(h){super("totp",h)}static _fromServerResponse(h,p){return new tr(p)}}function no(y,h,p){var _;ne((null===(_=p.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),ne(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(ne(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(ne(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Hr(){return Hr=(0,f.Z)(function*(y,h,p){var _;const T=fn(y),x={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const U=yield qe(T,x,"getOobCode",!0);p&&no(T,U,p),yield Ts(T,U)}else p&&no(T,x,p),yield Ts(T,x).catch(function(){var U=(0,f.Z)(function*(Z){if("auth/missing-recaptcha-token"!==Z.code)return Promise.reject(Z);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ce=yield qe(T,x,"getOobCode",!0);p&&no(T,Ce,p),yield Ts(T,Ce)}});return function(Z){return U.apply(this,arguments)}}())}),Hr.apply(this,arguments)}function qu(){return(qu=(0,f.Z)(function*(y,h,p){yield Xs((0,O.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function ls(){return ls=(0,f.Z)(function*(y,h){yield function Wi(y,h){return Go.apply(this,arguments)}((0,O.m9)(y),{oobCode:h})}),ls.apply(this,arguments)}function Va(y,h){return qn.apply(this,arguments)}function qn(){return(qn=(0,f.Z)(function*(y,h){const p=(0,O.m9)(y),_=yield Xs(p,{oobCode:h}),T=_.requestType;switch(ne(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(_.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(_.mfaInfo,p,"internal-error");default:ne(_.email,p,"internal-error")}let x=null;return _.mfaInfo&&(x=Hu._fromServerResponse(fn(p),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:x},operation:T}})).apply(this,arguments)}function Ki(){return(Ki=(0,f.Z)(function*(y,h){const{data:p}=yield Va((0,O.m9)(y),h);return p.email})).apply(this,arguments)}function Ei(){return Ei=(0,f.Z)(function*(y,h,p){var _;const T=fn(y),x={returnSecureToken:!0,email:h,password:p,clientType:"CLIENT_TYPE_WEB"};let U;if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const Ve=yield qe(T,x,"signUpPassword");U=As(T,Ve)}else U=As(T,x).catch(function(){var Ve=(0,f.Z)(function*(et){if("auth/missing-recaptcha-token"===et.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const tt=yield qe(T,x,"signUpPassword");return As(T,tt)}return Promise.reject(et)});return function(et){return Ve.apply(this,arguments)}}());const Z=yield U.catch(Ve=>Promise.reject(Ve)),Ce=yield Rr._fromIdTokenResponse(T,"signIn",Z);return yield T._updateCurrentUser(Ce.user),Ce}),Ei.apply(this,arguments)}function Wu(){return Wu=(0,f.Z)(function*(y,h,p){var _;const T=fn(y),x={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};function U(Z,Ce){ne(Ce.handleCodeInApp,T,"argument-error"),Ce&&no(T,Z,Ce)}if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const Z=yield qe(T,x,"getOobCode",!0);U(Z,p),yield cr(T,Z)}else U(x,p),yield cr(T,x).catch(function(){var Z=(0,f.Z)(function*(Ce){if("auth/missing-recaptcha-token"!==Ce.code)return Promise.reject(Ce);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ve=yield qe(T,x,"getOobCode",!0);U(Ve,p),yield cr(T,Ve)}});return function(Ce){return Z.apply(this,arguments)}}())}),Wu.apply(this,arguments)}function Yo(){return(Yo=(0,f.Z)(function*(y,h,p){const _=(0,O.m9)(y),T=Nf.credentialWithLink(h,p||Ht());return ne(T._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),La(_,T)})).apply(this,arguments)}function Zu(){return(Zu=(0,f.Z)(function*(y,h){return Je(y,"POST","/v1/accounts:createAuthUri",xt(y,h))})).apply(this,arguments)}function Ku(){return Ku=(0,f.Z)(function*(y,h){const _={identifier:h,continueUri:st()?Ht():"http://localhost"},{signinMethods:T}=yield function ll(y,h){return Zu.apply(this,arguments)}((0,O.m9)(y),_);return T||[]}),Ku.apply(this,arguments)}function Ba(){return Ba=(0,f.Z)(function*(y,h){const p=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&no(p.auth,T,h);const{email:x}=yield function il(y,h){return zo.apply(this,arguments)}(p.auth,T);x!==y.email&&(yield y.reload())}),Ba.apply(this,arguments)}function ja(){return ja=(0,f.Z)(function*(y,h,p){const _=(0,O.m9)(y),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&no(_.auth,x,p);const{email:U}=yield function ei(y,h){return ti.apply(this,arguments)}(_.auth,x);U!==y.email&&(yield y.reload())}),ja.apply(this,arguments)}function Qu(){return(Qu=(0,f.Z)(function*(y,h){return Je(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ju(){return Ju=(0,f.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const _=(0,O.m9)(y),x={idToken:yield _.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},U=yield rt(_,function Bd(y,h){return Qu.apply(this,arguments)}(_.auth,x));_.displayName=U.displayName||null,_.photoURL=U.photoUrl||null;const Z=_.providerData.find(({providerId:Ce})=>"password"===Ce);Z&&(Z.displayName=_.displayName,Z.photoURL=_.photoURL),yield _._updateTokensIfNecessary(U)}),Ju.apply(this,arguments)}function Tn(y,h,p){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,f.Z)(function*(y,h,p){const{auth:_}=y,x={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(x.email=h),p&&(x.password=p);const U=yield rt(y,Ho(_,x));yield y._updateTokensIfNecessary(U,!0)})).apply(this,arguments)}class io{constructor(h,p,_={}){this.isNewUser=h,this.providerId=p,this.profile=_}}class Ff extends io{constructor(h,p,_,T){super(h,p,_),this.username=T}}class jd extends io{constructor(h,p){super(h,"facebook.com",p)}}class Ug extends Ff{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class ec extends io{constructor(h,p){super(h,"google.com",p)}}class hl extends Ff{constructor(h,p,_){super(h,"twitter.com",p,_)}}function fl(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function kf(y){var h,p;if(!y)return null;const{providerId:_}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},x=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const U=null===(p=null===(h=en(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(U)return new io(x,"anonymous"!==U&&"custom"!==U?U:null)}if(!_)return null;switch(_){case"facebook.com":return new jd(x,T);case"github.com":return new Ug(x,T);case"google.com":return new ec(x,T);case"twitter.com":return new hl(x,T,y.screenName||null);case"custom":case"anonymous":return new io(x,null);default:return new io(x,_,T)}}(p)}class so{constructor(h,p,_){this.type=h,this.credential=p,this.auth=_}static _fromIdtoken(h,p){return new so("enroll",h,p)}static _fromMfaPendingCredential(h){return new so("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,_;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return so._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return so._fromIdtoken(h.multiFactorSession.idToken)}return null}}class oo{constructor(h,p,_){this.session=h,this.hints=p,this.signInResolver=_}static _fromError(h,p){const _=fn(h),T=p.customData._serverResponse,x=(T.mfaInfo||[]).map(Z=>Hu._fromServerResponse(_,Z));ne(T.mfaPendingCredential,_,"internal-error");const U=so._fromMfaPendingCredential(T.mfaPendingCredential);return new oo(U,x,function(){var Z=(0,f.Z)(function*(Ce){const Ve=yield Ce._process(_,U);delete T.mfaInfo,delete T.mfaPendingCredential;const et=Object.assign(Object.assign({},T),{idToken:Ve.idToken,refreshToken:Ve.refreshToken});switch(p.operationType){case"signIn":const tt=yield Rr._fromIdTokenResponse(_,p.operationType,et);return yield _._updateCurrentUser(tt.user),tt;case"reauthenticate":return ne(p.user,_,"internal-error"),Rr._forOperation(p.user,p.operationType,et);default:_e(_,"internal-error")}});return function(Ce){return Z.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,f.Z)(function*(){return p.signInResolver(h)})()}}class co{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(_=>Hu._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new co(h)}getSession(){var h=this;return(0,f.Z)(function*(){return so._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var _=this;return(0,f.Z)(function*(){const T=h,x=yield _.getSession(),U=yield rt(_.user,T._process(_.user.auth,x,p));return yield _.user._updateTokensIfNecessary(U),_.user.reload()})()}unenroll(h){var p=this;return(0,f.Z)(function*(){const _="string"==typeof h?h:h.uid,T=yield p.user.getIdToken();try{const x=yield rt(p.user,function rc(y,h){return Je(y,"POST","/v2/accounts/mfaEnrollment:withdraw",xt(y,h))}(p.user.auth,{idToken:T,mfaEnrollmentId:_}));p.enrolledFactors=p.enrolledFactors.filter(({uid:U})=>U!==_),yield p.user._updateTokensIfNecessary(x),yield p.user.reload()}catch(x){throw x}})()}}const xs=new WeakMap,lo="__sak";class ic{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(lo,"1"),this.storage.removeItem(lo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const ho=(()=>{class y extends ic{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,_)=>this.onStorageEvent(p,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ha(){const y=(0,O.z$)();return Q(y)||cn(y)}()&&function Ma(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=qi(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const _ of Object.keys(this.listeners)){const T=this.storage.getItem(_),x=this.localCache[_];T!==x&&p(_,x,T)}}onStorageEvent(p,_=!1){if(!p.key)return void this.forAllChangedKeys((Z,Ce,Ve)=>{this.notifyListeners(Z,Ve)});const T=p.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Z=this.storage.getItem(T);if(p.newValue!==Z)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!_)return}const x=()=>{const Z=this.storage.getItem(T);!_&&this.localCache[T]===Z||this.notifyListeners(T,Z)},U=this.storage.getItem(T);!function Oi(){return(0,O.w1)()&&10===document.documentMode}()||U===p.newValue||p.newValue===p.oldValue?x():setTimeout(x,10)}notifyListeners(p,_){this.localCache[p]=_;const T=this.listeners[p];if(T)for(const x of Array.from(T))x(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,_,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:_,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,_){var T=()=>super._set,x=this;return(0,f.Z)(function*(){yield T().call(x,p,_),x.localCache[p]=JSON.stringify(_)})()}_get(p){var _=()=>super._get,T=this;return(0,f.Z)(function*(){const x=yield _().call(T,p);return T.localCache[p]=JSON.stringify(x),x})()}_remove(p){var _=()=>super._remove,T=this;return(0,f.Z)(function*(){yield _().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),fs=(()=>{class y extends ic{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,_){}_removeListener(p,_){}}return y.type="SESSION",y})();let ea=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const _=this.receivers.find(x=>x.isListeningto(p));if(_)return _;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var _=this;return(0,f.Z)(function*(){const T=p,{eventId:x,eventType:U,data:Z}=T.data,Ce=_.handlersMap[U];if(!Ce?.size)return;T.ports[0].postMessage({status:"ack",eventId:x,eventType:U});const Ve=Array.from(Ce).map(function(){var tt=(0,f.Z)(function*(Dn){return Dn(T.origin,Z)});return function(Dn){return tt.apply(this,arguments)}}()),et=yield function ml(y){return Promise.all(y.map(function(){var h=(0,f.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(_){return{fulfilled:!1,reason:_}}});return function(p){return h.apply(this,arguments)}}()))}(Ve);T.ports[0].postMessage({status:"done",eventId:x,eventType:U,response:et})})()}_subscribe(p,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(_)}_unsubscribe(p,_){this.handlersMap[p]&&_&&this.handlersMap[p].delete(_),(!_||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ta(y="",h=10){let p="";for(let _=0;_<h;_++)p+=Math.floor(10*Math.random());return y+p}class zd{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,_=50){var T=this;return(0,f.Z)(function*(){const x=typeof MessageChannel<"u"?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let U,Z;return new Promise((Ce,Ve)=>{const et=ta("",20);x.port1.start();const tt=setTimeout(()=>{Ve(new Error("unsupported_event"))},_);Z={messageChannel:x,onMessage(Dn){const Ji=Dn;if(Ji.data.eventId===et)switch(Ji.data.status){case"ack":clearTimeout(tt),U=setTimeout(()=>{Ve(new Error("timeout"))},3e3);break;case"done":clearTimeout(U),Ce(Ji.data.response);break;default:clearTimeout(tt),clearTimeout(U),Ve(new Error("invalid_response"))}}},T.handlers.add(Z),x.port1.addEventListener("message",Z.onMessage),T.target.postMessage({eventType:h,eventId:et,data:p},[x.port2])}).finally(()=>{Z&&T.removeMessageHandler(Z)})})()}}function mn(){return window}function oc(){return typeof mn().WorkerGlobalScope<"u"&&"function"==typeof mn().importScripts}function ac(){return(ac=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const fo="firebaseLocalStorageDb",Un=1,vl="firebaseLocalStorage",Ga="fbase_key";class za{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function ps(y,h){return y.transaction([vl],h?"readwrite":"readonly").objectStore(vl)}function cc(){const y=indexedDB.open(fo,Un);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(vl,{keyPath:Ga})}catch(T){p(T)}}),y.addEventListener("success",(0,f.Z)(function*(){const _=y.result;_.objectStoreNames.contains(vl)?h(_):(_.close(),yield function Uf(){const y=indexedDB.deleteDatabase(fo);return new za(y).toPromise()}(),h(yield cc()))}))})}function po(y,h,p){return _l.apply(this,arguments)}function _l(){return(_l=(0,f.Z)(function*(y,h,p){const _=ps(y,!0).put({[Ga]:h,value:p});return new za(_).toPromise()})).apply(this,arguments)}function na(){return(na=(0,f.Z)(function*(y,h){const p=ps(y,!1).get(h),_=yield new za(p).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Rs(y,h){const p=ps(y,!0).delete(h);return new za(p).toPromise()}const go=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,f.Z)(function*(){return p.db||(p.db=yield cc()),p.db})()}_withRetries(p){var _=this;return(0,f.Z)(function*(){let T=0;for(;;)try{const x=yield _._openDb();return yield p(x)}catch(x){if(T++>3)throw x;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,f.Z)(function*(){return oc()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,f.Z)(function*(){p.receiver=ea._getInstance(function nr(){return oc()?self:null}()),p.receiver._subscribe("keyChanged",function(){var _=(0,f.Z)(function*(T,x){return{keyProcessed:(yield p._poll()).includes(x.key)}});return function(T,x){return _.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var _=(0,f.Z)(function*(T,x){return["keyChanged"]});return function(T,x){return _.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,f.Z)(function*(){var _,T;if(p.activeServiceWorker=yield function yl(){return ac.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new zd(p.activeServiceWorker);const x=yield p.sender._send("ping",{},800);x&&null!==(_=x[0])&&void 0!==_&&_.fulfilled&&null!==(T=x[0])&&void 0!==T&&T.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var _=this;return(0,f.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function uc(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:p},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const p=yield cc();return yield po(p,lo,"1"),yield Rs(p,lo),!0}catch{}return!1})()}_withPendingWrite(p){var _=this;return(0,f.Z)(function*(){_.pendingWrites++;try{yield p()}finally{_.pendingWrites--}})()}_set(p,_){var T=this;return(0,f.Z)(function*(){return T._withPendingWrite((0,f.Z)(function*(){return yield T._withRetries(x=>po(x,p,_)),T.localCache[p]=_,T.notifyServiceWorker(p)}))})()}_get(p){var _=this;return(0,f.Z)(function*(){const T=yield _._withRetries(x=>function qa(y,h){return na.apply(this,arguments)}(x,p));return _.localCache[p]=T,T})()}_remove(p){var _=this;return(0,f.Z)(function*(){return _._withPendingWrite((0,f.Z)(function*(){return yield _._withRetries(T=>Rs(T,p)),delete _.localCache[p],_.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,f.Z)(function*(){const _=yield p._withRetries(U=>{const Z=ps(U,!1).getAll();return new za(Z).toPromise()});if(!_)return[];if(0!==p.pendingWrites)return[];const T=[],x=new Set;for(const{fbase_key:U,value:Z}of _)x.add(U),JSON.stringify(p.localCache[U])!==JSON.stringify(Z)&&(p.notifyListeners(U,Z),T.push(U));for(const U of Object.keys(p.localCache))p.localCache[U]&&!x.has(U)&&(p.notifyListeners(U,null),T.push(U));return T})()}notifyListeners(p,_){this.localCache[p]=_;const T=this.listeners[p];if(T)for(const x of Array.from(T))x(_)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})(),Za=1e12;class wl{constructor(h){this.auth=h,this.counter=Za,this._widgets=new Map}render(h,p){const _=this.counter;return this._widgets.set(_,new El(h,this.auth.name,p||{})),this.counter++,_}reset(h){var p;const _=h||Za;null===(p=this._widgets.get(_))||void 0===p||p.delete(),this._widgets.delete(_)}getResponse(h){var p;return(null===(p=this._widgets.get(h||Za))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,f.Z)(function*(){var _;return null===(_=p._widgets.get(h||Za))||void 0===_||_.execute(),""})()}}class El{constructor(h,p,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;ne(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function lv(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const $f=Gn("rcb"),dv=new Te(3e4,6e4);class hv{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=mn().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return ne(function Hf(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)&&jt(mn().grecaptcha)?Promise.resolve(mn().grecaptcha):new Promise((_,T)=>{const x=mn().setTimeout(()=>{T(we(h,"network-request-failed"))},dv.get());mn()[$f]=()=>{mn().clearTimeout(x),delete mn()[$f];const Z=mn().grecaptcha;if(!Z||!jt(Z))return void T(we(h,"internal-error"));const Ce=Z.render;Z.render=(Ve,et)=>{const tt=Ce(Ve,et);return this.counter++,tt},this.hostLanguage=p,_(Z)},ur(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:$f,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(x),T(we(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=mn().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class rr{load(h){return(0,f.Z)(function*(){return new wl(h)})()}clearedOneInstance(){}}const Ka="recaptcha",lc={theme:"light",type:"image"};class Il{constructor(h,p=Object.assign({},lc),_){this.parameters=p,this.type=Ka,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=fn(_),this.isInvisible="invisible"===this.parameters.size,ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;ne(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new rr:new hv,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(p)||new Promise(x=>{const U=Z=>{Z&&(h.tokenChangeListeners.delete(U),x(Z))};h.tokenChangeListeners.add(U),h.isInvisible&&_.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(_=>_(p)),"function"==typeof h)h(p);else if("string"==typeof h){const _=mn()[h];"function"==typeof _&&_(p)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const _=document.createElement("div");p.appendChild(_),p=_}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){ne(st()&&!oc(),h.auth,"internal-error"),yield function Li(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function X(y){return Ae.apply(this,arguments)}(h.auth);ne(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Yi{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=_i._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function vo(){return(vo=(0,f.Z)(function*(y,h,p){const _=fn(y),T=yield fc(_,h,(0,O.m9)(p));return new Yi(T,x=>La(_,x))})).apply(this,arguments)}function hc(){return(hc=(0,f.Z)(function*(y,h,p){const _=(0,O.m9)(y);yield cs(!1,_,"phone");const T=yield fc(_.auth,h,(0,O.m9)(p));return new Yi(T,x=>Od(_,x))})).apply(this,arguments)}function Dl(){return(Dl=(0,f.Z)(function*(y,h,p){const _=(0,O.m9)(y),T=yield fc(_.auth,h,(0,O.m9)(p));return new Yi(T,x=>kd(_,x))})).apply(this,arguments)}function fc(y,h,p){return Gr.apply(this,arguments)}function Gr(){return Gr=(0,f.Z)(function*(y,h,p){var _;const T=yield p.verify();try{let x;if(ne("string"==typeof T,y,"argument-error"),ne(p.type===Ka,y,"argument-error"),x="string"==typeof h?{phoneNumber:h}:h,"session"in x){const U=x.session;if("phoneNumber"in x)return ne("enroll"===U.type,y,"internal-error"),(yield function Xo(y,h){return Je(y,"POST","/v2/accounts/mfaEnrollment:start",xt(y,h))}(y,{idToken:U.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{ne("signin"===U.type,y,"internal-error");const Z=(null===(_=x.multiFactorHint)||void 0===_?void 0:_.uid)||x.multiFactorUid;return ne(Z,y,"missing-multi-factor-info"),(yield function mo(y,h){return Je(y,"POST","/v2/accounts/mfaSignIn:start",xt(y,h))}(y,{mfaPendingCredential:U.credential,mfaEnrollmentId:Z,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:U}=yield function Og(y,h){return ol.apply(this,arguments)}(y,{phoneNumber:x.phoneNumber,recaptchaToken:T});return U}}finally{p._reset()}}),Gr.apply(this,arguments)}function _r(){return(_r=(0,f.Z)(function*(y,h){yield er((0,O.m9)(y),h)})).apply(this,arguments)}let ia=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=fn(p)}verifyPhoneNumber(p,_){return fc(this.auth,p,(0,O.m9)(_))}static credential(p,_){return _i._fromVerification(p,_)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:_,temporaryProof:T}=p;return _&&T?_i._fromTokenResponse(_,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Ns(y,h){return h?En(h):(ne(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ii extends is{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return ki(h,this._buildIdpRequest())}_linkToIdToken(h,p){return ki(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return ki(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Zd(y){return Fa(y.auth,new Ii(y),y.bypassAuthState)}function Cl(y){const{auth:h,user:p}=y;return ne(p,h,"internal-error"),Ms(p,new Ii(y),y.bypassAuthState)}function pc(y){return _o.apply(this,arguments)}function _o(){return(_o=(0,f.Z)(function*(y){const{auth:h,user:p}=y;return ne(p,h,"internal-error"),er(p,new Ii(y),y.bypassAuthState)})).apply(this,arguments)}class Ps{constructor(h,p,_,T,x=!1){this.auth=h,this.resolver=_,this.user=T,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,f.Z)(function*(_,T){h.pendingPromise={resolve:_,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(x){h.reject(x)}});return function(_,T){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,f.Z)(function*(){const{urlResponse:_,sessionId:T,postBody:x,tenantId:U,error:Z,type:Ce}=h;if(Z)return void p.reject(Z);const Ve={auth:p.auth,requestUri:_,sessionId:T,tenantId:U||void 0,postBody:x||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ce)(Ve))}catch(et){p.reject(et)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Zd;case"linkViaPopup":case"linkViaRedirect":return pc;case"reauthViaPopup":case"reauthViaRedirect":return Cl;default:_e(this.auth,"internal-error")}}resolve(h){Xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yn=new Te(2e3,1e4);function gc(){return(gc=(0,f.Z)(function*(y,h,p){const _=fn(y);Ne(y,h,as);const T=Ns(_,p);return new Xa(_,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function Qa(){return(Qa=(0,f.Z)(function*(y,h,p){const _=(0,O.m9)(y);Ne(_.auth,h,as);const T=Ns(_.auth,p);return new Xa(_.auth,"reauthViaPopup",h,T,_).executeNotNull()})).apply(this,arguments)}function bl(){return(bl=(0,f.Z)(function*(y,h,p){const _=(0,O.m9)(y);Ne(_.auth,h,as);const T=Ns(_.auth,p);return new Xa(_.auth,"linkViaPopup",h,T,_).executeNotNull()})).apply(this,arguments)}let Xa=(()=>{class y extends Ps{constructor(p,_,T,x,U){super(p,_,x,U),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,f.Z)(function*(){const _=yield p.execute();return ne(_,p.auth,"internal-error"),_})()}onExecution(){var p=this;return(0,f.Z)(function*(){Xe(1===p.filter.length,"Popup operations only handle one event");const _=ta();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],_),p.authWindow.associatedEvent=_,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(we(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var _,T;this.pollId=null!==(T=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,yn.get())};p()}}return y.currentPopupAction=null,y})();const ni="pendingRedirect",wr=new Map;class qf extends Ps{constructor(h,p,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,f.Z)(function*(){let _=wr.get(p.auth._key());if(!_){try{const x=(yield function mc(y,h){return Kd.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;_=()=>Promise.resolve(x)}catch(T){_=()=>Promise.reject(T)}wr.set(p.auth._key(),_)}return p.bypassAuthState||wr.set(p.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,_=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(_,h);if("unknown"!==h.type){if(h.eventId){const T=yield _.auth._redirectUserForId(h.eventId);if(T)return _.user=T,p().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Kd(){return(Kd=(0,f.Z)(function*(y,h){const p=vc(h),_=gs(y);if(!(yield _._isAvailable()))return!1;const T="true"===(yield _._get(p));return yield _._remove(p),T})).apply(this,arguments)}function wo(y,h){return sa.apply(this,arguments)}function sa(){return(sa=(0,f.Z)(function*(y,h){return gs(y)._set(vc(h),"true")})).apply(this,arguments)}function Yd(y,h){wr.set(y._key(),h)}function gs(y){return En(y._redirectPersistence)}function vc(y){return V(ni,y.config.apiKey,y.name)}function Er(y,h,p){return function Os(y,h,p){return Tl.apply(this,arguments)}(y,h,p)}function Tl(){return(Tl=(0,f.Z)(function*(y,h,p){const _=fn(y);Ne(y,h,as),yield _._initializationPromise;const T=Ns(_,p);return yield wo(T,_),T._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function ks(y,h,p){return function eu(y,h,p){return tu.apply(this,arguments)}(y,h,p)}function tu(){return(tu=(0,f.Z)(function*(y,h,p){const _=(0,O.m9)(y);Ne(_.auth,h,as),yield _.auth._initializationPromise;const T=Ns(_.auth,p);yield wo(T,_.auth);const x=yield Eo(_);return T._openRedirect(_.auth,h,"reauthViaRedirect",x)})).apply(this,arguments)}function Qd(y,h,p){return function Jd(y,h,p){return Sl.apply(this,arguments)}(y,h,p)}function Sl(){return(Sl=(0,f.Z)(function*(y,h,p){const _=(0,O.m9)(y);Ne(_.auth,h,as),yield _.auth._initializationPromise;const T=Ns(_.auth,p);yield cs(!1,_,h.providerId),yield wo(T,_.auth);const x=yield Eo(_);return T._openRedirect(_.auth,h,"linkViaRedirect",x)})).apply(this,arguments)}function Ml(){return(Ml=(0,f.Z)(function*(y,h){return yield fn(y)._initializationPromise,nu(y,h,!1)})).apply(this,arguments)}function nu(y,h){return oa.apply(this,arguments)}function oa(){return(oa=(0,f.Z)(function*(y,h,p=!1){const _=fn(y),T=Ns(_,h),U=yield new qf(_,T,p).execute();return U&&!p&&(delete U.user._redirectEventId,yield _._persistUserIfCurrent(U.user),yield _._setRedirectUser(null,h)),U})).apply(this,arguments)}function Eo(y){return ru.apply(this,arguments)}function ru(){return(ru=(0,f.Z)(function*(y){const h=ta(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Io{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(p=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Nl(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _c(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var _;if(h.error&&!_c(h)){const T=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";p.onError(we(this.auth,T))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const _=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rl(h))}saveEventToCache(h){this.cachedEventUids.add(Rl(h)),this.lastProcessedEventTime=Date.now()}}function Rl(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function _c({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function Xd(y){return eh.apply(this,arguments)}function eh(){return(eh=(0,f.Z)(function*(y,h={}){return Je(y,"GET","/v1/projects",h)})).apply(this,arguments)}const th=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pl=/^https?/;function Qi(){return(Qi=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Xd(y);for(const p of h)try{if(iu(p))return}catch{}_e(y,"unauthorized-domain")})).apply(this,arguments)}function iu(y){const h=Ht(),{protocol:p,hostname:_}=new URL(h);if(y.startsWith("chrome-extension://")){const U=new URL(y);return""===U.hostname&&""===_?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&U.hostname===_}if(!Pl.test(p))return!1;if(th.test(y))return _===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(_)}const su=new Te(3e4,6e4);function Di(){const y=mn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let ou=null;const Ls=new Te(5e3,15e3),Ol="__/auth/iframe",Wf="emulator/auth/iframe",$g={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fl(y){const h=y.config;ne(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?He(h,Wf):`https://${y.config.authDomain}/${Ol}`,_={apiKey:h.apiKey,appName:y.name,v:re.SDK_VERSION},T=kl.get(y.config.apiHost);T&&(_.eid=T);const x=y._getFrameworks();return x.length&&(_.fw=x.join(",")),`${p}?${(0,O.xO)(_).slice(1)}`}function D(){return D=(0,f.Z)(function*(y){const h=yield function Pn(y){return ou=ou||function Fs(y){return new Promise((h,p)=>{var _,T,x;function U(){Di(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Di(),p(we(y,"network-request-failed"))},timeout:su.get()})}if(null!==(T=null===(_=mn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==T&&T.Iframe)h(gapi.iframes.getContext());else{if(null===(x=mn().gapi)||void 0===x||!x.load){const Z=Gn("iframefcb");return mn()[Z]=()=>{gapi.load?U():p(we(y,"network-request-failed"))},ur(`https://apis.google.com/js/api.js?onload=${Z}`).catch(Ce=>p(Ce))}U()}}).catch(h=>{throw ou=null,h})}(y),ou}(y),p=mn().gapi;return ne(p,y,"internal-error"),h.open({where:document.body,url:Fl(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$g,dontclear:!0},_=>new Promise(function(){var T=(0,f.Z)(function*(x,U){yield _.restyle({setHideOnLeave:!1});const Z=we(y,"network-request-failed"),Ce=mn().setTimeout(()=>{U(Z)},Ls.get());function Ve(){mn().clearTimeout(Ce),x(_)}_.ping(Ve).then(Ve,()=>{U(Z)})});return function(x,U){return T.apply(this,arguments)}}()))}),D.apply(this,arguments)}const M={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},P=500,$=600,W="_blank",te="http://localhost";class ze{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Rt="__/auth/handler",Nt="emulator/auth/handler",Ci=encodeURIComponent("fac");function On(y,h,p,_,T,x){return aa.apply(this,arguments)}function aa(){return(aa=(0,f.Z)(function*(y,h,p,_,T,x){ne(y.config.authDomain,y,"auth-domain-config-required"),ne(y.config.apiKey,y,"invalid-api-key");const U={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:_,v:re.SDK_VERSION,eventId:T};if(h instanceof as){h.setDefaultLanguage(y.languageCode),U.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(U.customParameters=JSON.stringify(h.getCustomParameters()));for(const[et,tt]of Object.entries(x||{}))U[et]=tt}if(h instanceof Zi){const et=h.getScopes().filter(tt=>""!==tt);et.length>0&&(U.scopes=et.join(","))}y.tenantId&&(U.tid=y.tenantId);const Z=U;for(const et of Object.keys(Z))void 0===Z[et]&&delete Z[et];const Ce=yield y._getAppCheckToken(),Ve=Ce?`#${Ci}=${encodeURIComponent(Ce)}`:"";return`${function Ec({config:y}){return y.emulator?He(y,Nt):`https://${y.authDomain}/${Rt}`}(y)}?${(0,O.xO)(Z).slice(1)}${Ve}`})).apply(this,arguments)}const Do="webStorageSupport",Pr=class ri{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fs,this._completeRedirectFn=nu,this._overrideRedirectResult=Yd}_openPopup(h,p,_,T){var x=this;return(0,f.Z)(function*(){var U;Xe(null===(U=x.eventManagers[h._key()])||void 0===U?void 0:U.manager,"_initialize() not called before _openPopup()");const Z=yield On(h,p,_,Ht(),T);return function Ge(y,h,p,_=P,T=$){const x=Math.max((window.screen.availHeight-T)/2,0).toString(),U=Math.max((window.screen.availWidth-_)/2,0).toString();let Z="";const Ce=Object.assign(Object.assign({},M),{width:_.toString(),height:T.toString(),top:x,left:U}),Ve=(0,O.z$)().toLowerCase();p&&(Z=Oe(Ve)?W:p),pe(Ve)&&(h=h||te,Ce.scrollbars="yes");const et=Object.entries(Ce).reduce((Dn,[Ji,Oc])=>`${Dn}${Ji}=${Oc},`,"");if(function xr(y=(0,O.z$)()){var h;return cn(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Ve)&&"_self"!==Z)return function at(y,h){const p=document.createElement("a");p.href=y,p.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(_)}(h||"",Z),new ze(null);const tt=window.open(h||"",Z,et);ne(tt,y,"popup-blocked");try{tt.focus()}catch{}return new ze(tt)}(h,Z,ta())})()}_openRedirect(h,p,_,T){var x=this;return(0,f.Z)(function*(){return yield x._originValidation(h),function qd(y){mn().location.href=y}(yield On(h,p,_,Ht(),T)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:T,promise:x}=this.eventManagers[p];return T?Promise.resolve(T):(Xe(x,"If manager is not set, promise should be"),x)}const _=this.initAndGetManager(h);return this.eventManagers[p]={promise:_},_.catch(()=>{delete this.eventManagers[p]}),_}initAndGetManager(h){var p=this;return(0,f.Z)(function*(){const _=yield function E(y){return D.apply(this,arguments)}(h),T=new Io(h);return _.register("authEvent",x=>(ne(x?.authEvent,h,"invalid-auth-event"),{status:T.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:T},p.iframes[h._key()]=_,T})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Do,{type:Do},T=>{var x;const U=null===(x=T?.[0])||void 0===x?void 0:x[Do];void 0!==U&&p(!!U),_e(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function wc(y){return Qi.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return qi()||Q()||cn()}};class Co{constructor(h){this.factorId=h}_process(h,p,_){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,_);case"signin":return this._finalizeSignIn(h,p.credential);default:return Ct("unexpected MultiFactorSessionType")}}}class ua extends Co{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new ua(h)}_finalizeEnroll(h,p,_){return function gl(y,h){return Je(y,"POST","/v2/accounts/mfaEnrollment:finalize",xt(y,h))}(h,{idToken:p,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function jf(y,h){return Je(y,"POST","/v2/accounts/mfaSignIn:finalize",xt(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let bo=(()=>{class y{constructor(){}static assertion(p){return ua._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var Cc="@firebase/auth";class nh{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,f.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(_=>{h(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);p&&(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ms(){return window}(0,O.Pz)("authIdTokenMaxAge"),function Vl(y){(0,re._registerComponent)(new fe.wA("auth",(h,{options:p})=>{const _=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),x=h.getProvider("app-check-internal"),{apiKey:U,authDomain:Z}=_.options;ne(U&&!U.includes(":"),"invalid-api-key",{appName:_.name});const Ce={apiKey:U,authDomain:Z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ae(y)},Ve=new yi(_,T,x,Ce);return function Nn(y,h){const p=h?.persistence||[],_=(Array.isArray(p)?p:[p]).map(En);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(_,h?.popupRedirectResolver)}(Ve,p),Ve},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,_)=>{h.getProvider("auth-internal").initialize()})),(0,re._registerComponent)(new fe.wA("auth-internal",h=>{const p=fn(h.getProvider("auth").getImmediate());return new nh(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,re.registerVersion)(Cc,"0.23.2",function Ll(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,re.registerVersion)(Cc,"0.23.2","esm2017")}("Browser");const rh=2e3;function la(){return la=(0,f.Z)(function*(y,h,p){var _;const{BuildInfo:T}=ms();Xe(h.sessionId,"AuthEvent did not contain a session ID");const x=yield function da(y){return oh.apply(this,arguments)}(h.sessionId),U={};return cn()?U.ibi=T.packageName:Yt()?U.apn=T.packageName:_e(y,"operation-not-supported-in-this-environment"),T.displayName&&(U.appDisplayName=T.displayName),U.sessionId=x,On(y,p,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,U)}),la.apply(this,arguments)}function Bl(){return(Bl=(0,f.Z)(function*(y){const{BuildInfo:h}=ms(),p={};cn()?p.iosBundleId=h.packageName:Yt()?p.androidPackageName=h.packageName:_e(y,"operation-not-supported-in-this-environment"),yield Xd(y,p)})).apply(this,arguments)}function sh(){return(sh=(0,f.Z)(function*(y,h,p){const{cordova:_}=ms();let T=()=>{};try{yield new Promise((x,U)=>{let Z=null;function Ce(){var tt;x();const Dn=null===(tt=_.plugins.browsertab)||void 0===tt?void 0:tt.close;"function"==typeof Dn&&Dn(),"function"==typeof p?.close&&p.close()}function Ve(){Z||(Z=window.setTimeout(()=>{U(we(y,"redirect-cancelled-by-user"))},rh))}function et(){"visible"===document?.visibilityState&&Ve()}h.addPassiveListener(Ce),document.addEventListener("resume",Ve,!1),Yt()&&document.addEventListener("visibilitychange",et,!1),T=()=>{h.removePassiveListener(Ce),document.removeEventListener("resume",Ve,!1),document.removeEventListener("visibilitychange",et,!1),Z&&window.clearTimeout(Z)}})}finally{T()}})).apply(this,arguments)}function oh(){return(oh=(0,f.Z)(function*(y){const h=function Qf(y){if(Xe(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let _=0;_<y.length;_++)p[_]=y.charCodeAt(_);return p}(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const fv=20;class kC extends Io{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function qg(y){return Xf.apply(this,arguments)}function Xf(){return(Xf=(0,f.Z)(function*(y){const h=yield jl()._get(ha(y));return h&&(yield jl()._remove(ha(y))),h})).apply(this,arguments)}function ep(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<fv;p++){const _=Math.floor(Math.random()*h.length);y.push(h.charAt(_))}return y.join("")}function jl(){return En(ho)}function ha(y){return V("authEvent",y.config.apiKey,y.name)}function Sc(y){if(!y?.includes("?"))return{};const[h,...p]=y.split("?");return(0,O.zd)(p.join("?"))}const Ac=class $l{constructor(){this._redirectPersistence=fs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=nu,this._overrideRedirectResult=Yd}_initialize(h){var p=this;return(0,f.Z)(function*(){const _=h._key();let T=p.eventManagers.get(_);return T||(T=new kC(h),p.eventManagers.set(_,T),p.attachCallbackListeners(h,T)),T})()}_openPopup(h){_e(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,_,T){var x=this;return(0,f.Z)(function*(){!function zg(y){var h,p,_,T,x,U,Z,Ce,Ve,et;const tt=ms();ne("function"==typeof(null===(h=tt?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(typeof(null===(p=tt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne("function"==typeof(null===(x=null===(T=null===(_=tt?.cordova)||void 0===_?void 0:_.plugins)||void 0===T?void 0:T.browsertab)||void 0===x?void 0:x.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Ce=null===(Z=null===(U=tt?.cordova)||void 0===U?void 0:U.plugins)||void 0===Z?void 0:Z.browsertab)||void 0===Ce?void 0:Ce.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(et=null===(Ve=tt?.cordova)||void 0===Ve?void 0:Ve.InAppBrowser)||void 0===et?void 0:et.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const U=yield x._initialize(h);yield U.initialized(),U.resetRedirect(),function yc(){wr.clear()}(),yield x._originValidation(h);const Z=function ah(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:ep(),postBody:null,tenantId:y.tenantId,error:we(y,"no-auth-event")}}(h,_,T);yield function Jf(y,h){return jl()._set(ha(y),h)}(h,Z);const Ce=yield function Tc(y,h,p){return la.apply(this,arguments)}(h,Z,p),Ve=yield function Yf(y){const{cordova:h}=ms();return new Promise(p=>{h.plugins.browsertab.isAvailable(_=>{let T=null;_?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function zt(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(Ce);return function ih(y,h,p){return sh.apply(this,arguments)}(h,U,Ve)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Ul(y){return Bl.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:_,handleOpenURL:T,BuildInfo:x}=ms(),U=setTimeout((0,f.Z)(function*(){yield qg(h),p.onEvent(tp())}),500),Z=function(){var et=(0,f.Z)(function*(tt){clearTimeout(U);const Dn=yield qg(h);let Ji=null;Dn&&tt?.url&&(Ji=function uh(y,h){var p,_;const T=function pv(y){const h=Sc(y),p=h.link?decodeURIComponent(h.link):void 0,_=Sc(p).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Sc(T).link||T||_||p||y}(h);if(T.includes("/__/auth/callback")){const x=Sc(T),U=x.firebaseError?function ch(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(x.firebaseError)):null,Z=null===(_=null===(p=U?.code)||void 0===p?void 0:p.split("auth/"))||void 0===_?void 0:_[1],Ce=Z?we(Z):null;return Ce?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ce,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(Dn,tt.url)),p.onEvent(Ji||tp())});return function(Dn){return et.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,Z);const Ce=T,Ve=`${x.packageName.toLowerCase()}://`;ms().handleOpenURL=function(){var et=(0,f.Z)(function*(tt){if(tt.toLowerCase().startsWith(Ve)&&Z({url:tt}),"function"==typeof Ce)try{Ce(tt)}catch(Dn){console.error(Dn)}});return function(tt){return et.apply(this,arguments)}}()}};function tp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}const Wg=1e3;function Hl(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function lh(y=(0,O.z$)()){return!("file:"!==Hl()&&"ionic:"!==Hl()&&"capacitor:"!==Hl()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Yg(){try{const y=self.localStorage,h=ta();if(y)return y.setItem(h,"1"),y.removeItem(h),!function yv(y=(0,O.z$)()){return function xc(){return(0,O.w1)()&&11===document?.documentMode}()||function Kg(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return dh()&&(0,O.hl)()}return!1}function dh(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function uu(){return(function mv(){return"http:"===Hl()||"https:"===Hl()}()||(0,O.ru)()||lh())&&!function Zg(){return(0,O.b$)()||(0,O.UG)()}()&&Yg()&&!dh()}function Qg(){return lh()&&typeof document<"u"}function Rc(){return(Rc=(0,f.Z)(function*(){return!!Qg()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},Wg);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const ii={LOCAL:"local",NONE:"none",SESSION:"session"},Nc=ne,fh="persistence";function ph(y){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,f.Z)(function*(y){yield y._initializationPromise;const h=np(),p=V(fh,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function np(){var y;try{return(null===(y=function Jg(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const _v=ne;class hr{constructor(){this.browserResolver=En(Pr),this.cordovaResolver=En(Ac),this.underlyingResolver=null,this._redirectPersistence=fs,this._completeRedirectFn=nu,this._overrideRedirectResult=Yd}_initialize(h){var p=this;return(0,f.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,_,T){var x=this;return(0,f.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(h,p,_,T)})()}_openRedirect(h,p,_,T){var x=this;return(0,f.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(h,p,_,T)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Qg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return _v(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const p=yield function hh(){return Rc.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Pc(y){return y.unwrap()}function Ow(y){return tm(y)}function tm(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return ia.credentialFromResult(y);const p=h.providerId;if(!p||p===ce.PASSWORD)return null;let _;switch(p){case ce.GOOGLE:_=Oa;break;case ce.FACEBOOK:_=al;break;case ce.GITHUB:_=xd;break;case ce.TWITTER:_=Uu;break;default:const{oauthIdToken:T,oauthAccessToken:x,oauthTokenSecret:U,pendingToken:Z,nonce:Ce}=h;return x||U||T||Z?Z?p.startsWith("saml.")?Ss._create(p,Z):os._fromParams({providerId:p,signInMethod:p,pendingToken:Z,idToken:T,accessToken:x}):new to(p).credential({idToken:T,accessToken:x,rawNonce:Ce}):null}return y instanceof O.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function Vi(y,h){return h.catch(p=>{throw p instanceof O.ZR&&function em(y,h){var p;const _=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new nm(y,function nc(y,h){var p;const _=(0,O.m9)(y),T=h;return ne(h.customData.operationType,_,"argument-error"),ne(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,_,"argument-error"),oo._fromError(_,T)}(y,h));else if(_){const T=tm(h),x=h;T&&(x.credential=T,x.tenantId=_.tenantId||void 0,x.email=_.email||void 0,x.phoneNumber=_.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:Ow(p),additionalUserInfo:fl(p),user:To.getOrCreate(T)}})}function zl(y,h){return gh.apply(this,arguments)}function gh(){return(gh=(0,f.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:_=>Vi(y,p.confirm(_))}})).apply(this,arguments)}class nm{constructor(h,p){this.resolver=p,this.auth=function rp(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Vi(Pc(this.auth),this.resolver.resolveSignIn(h))}}class To{constructor(h){this._delegate=h,this.multiFactor=function Hd(y){const h=(0,O.m9)(y);return xs.has(h)||xs.set(h,co._fromUser(h)),xs.get(h)}(h)}static getOrCreate(h){return To.USER_MAP.has(h)||To.USER_MAP.set(h,new To(h)),To.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,f.Z)(function*(){return Vi(p.auth,Od(p._delegate,h))})()}linkWithPhoneNumber(h,p){var _=this;return(0,f.Z)(function*(){return zl(_.auth,function dc(y,h,p){return hc.apply(this,arguments)}(_._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,f.Z)(function*(){return Vi(p.auth,function Ja(y,h,p){return bl.apply(this,arguments)}(p._delegate,h,hr))})()}linkWithRedirect(h){var p=this;return(0,f.Z)(function*(){return yield ph(fn(p.auth)),Qd(p._delegate,h,hr)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,f.Z)(function*(){return Vi(p.auth,kd(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return zl(this.auth,function zf(y,h,p){return Dl.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return Vi(this.auth,function Ya(y,h,p){return Qa.apply(this,arguments)}(this._delegate,h,hr))}reauthenticateWithRedirect(h){var p=this;return(0,f.Z)(function*(){return yield ph(fn(p.auth)),ks(p._delegate,h,hr)})()}sendEmailVerification(h){return function Yu(y,h){return Ba.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,f.Z)(function*(){return yield function Nd(y,h){return Nr.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function vr(y,h){return Tn((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function ds(y,h){return Tn((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function ln(y,h){return _r.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Of(y,h){return Ju.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function dl(y,h,p){return ja.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}To.USER_MAP=new WeakMap;const cu=ne;let rm=(()=>{class y{constructor(p,_){if(this.app=p,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;cu(T,"invalid-api-key",{appName:p.name}),cu(T,"invalid-api-key",{appName:p.name});const x=typeof window<"u"?hr:void 0;this._delegate=_.initialize({options:{persistence:Vs(T,p.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(We),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?To.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,_){!function xa(y,h,p){const _=fn(y);ne(_._canInitEmulator,_,"emulator-config-failed"),ne(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const T=!!p?.disableWarnings,x=rs(h),{host:U,port:Z}=function Lt(y){const h=rs(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const _=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(_);if(T){const x=T[1];return{host:x,port:Ra(_.substr(x.length+1))}}{const[x,U]=_.split(":");return{host:x,port:Ra(U)}}}(h);_.config.emulator={url:`${x}//${U}${null===Z?"":`:${Z}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:U,port:Z,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Js(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,_)}applyActionCode(p){return function Lg(y,h){return ls.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Va(this._delegate,p)}confirmPasswordReset(p,_){return function Ld(y,h,p){return qu.apply(this,arguments)}(this._delegate,p,_)}createUserWithEmailAndPassword(p,_){var T=this;return(0,f.Z)(function*(){return Vi(T._delegate,function ro(y,h,p){return Ei.apply(this,arguments)}(T._delegate,p,_))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Ud(y,h){return Ku.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Vg(y,h){return"EMAIL_SIGNIN"===Wo.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,f.Z)(function*(){cu(uu(),p._delegate,"operation-not-supported-in-this-environment");const _=yield function Al(y,h){return Ml.apply(this,arguments)}(p._delegate,hr);return _?Vi(p._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Mc(y,h){fn(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,_,T){const{next:x,error:U,complete:Z}=mh(p,_,T);return this._delegate.onAuthStateChanged(x,U,Z)}onIdTokenChanged(p,_,T){const{next:x,error:U,complete:Z}=mh(p,_,T);return this._delegate.onIdTokenChanged(x,U,Z)}sendSignInLinkToEmail(p,_){return function Ua(y,h,p){return Wu.apply(this,arguments)}(this._delegate,p,_)}sendPasswordResetEmail(p,_){return function zu(y,h,p){return Hr.apply(this,arguments)}(this._delegate,p,_||void 0)}setPersistence(p){var _=this;return(0,f.Z)(function*(){let T;switch(function Xg(y,h){Nc(Object.values(ii).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?Nc(h!==ii.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Nc(h===ii.NONE,y,"unsupported-persistence-type"):dh()?Nc(h===ii.NONE||h===ii.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Nc(h===ii.NONE||Yg(),y,"unsupported-persistence-type")}(_._delegate,p),p){case ii.SESSION:T=fs;break;case ii.LOCAL:T=(yield En(go)._isAvailable())?go:ho;break;case ii.NONE:T=jr;break;default:return _e("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Vi(this._delegate,function lr(y){return Zo.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Vi(this._delegate,La(this._delegate,p))}signInWithCustomToken(p){return Vi(this._delegate,function ue(y,h){return Ft.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,_){return Vi(this._delegate,function Vd(y,h,p){return La((0,O.m9)(y),Nf.credential(h,p))}(this._delegate,p,_))}signInWithEmailLink(p,_){return Vi(this._delegate,function Wn(y,h,p){return Yo.apply(this,arguments)}(this._delegate,p,_))}signInWithPhoneNumber(p,_){return zl(this._delegate,function Gf(y,h,p){return vo.apply(this,arguments)}(this._delegate,p,_))}signInWithPopup(p){var _=this;return(0,f.Z)(function*(){return cu(uu(),_._delegate,"operation-not-supported-in-this-environment"),Vi(_._delegate,function vt(y,h,p){return gc.apply(this,arguments)}(_._delegate,p,hr))})()}signInWithRedirect(p){var _=this;return(0,f.Z)(function*(){return cu(uu(),_._delegate,"operation-not-supported-in-this-environment"),yield ph(_._delegate),Er(_._delegate,p,hr)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function wi(y,h){return Ki.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=ii,y})();function mh(y,h,p){let _=y;"function"!=typeof y&&({next:_,error:h,complete:p}=y);const T=_;return{next:U=>T(U&&To.getOrCreate(U)),error:h,complete:p}}function Vs(y,h){const p=function vv(y,h){const p=np();if(!p)return[];const _=V(fh,y,h);switch(p.getItem(_)){case ii.NONE:return[jr];case ii.LOCAL:return[go,fs];case ii.SESSION:return[fs];default:return[]}}(y,h);if(typeof self<"u"&&!p.includes(go)&&p.push(go),typeof window<"u")for(const _ of[ho,fs])p.includes(_)||p.push(_);return p.includes(jr)||p.push(jr),p}class lu{constructor(){this.providerId="phone",this._delegate=new ia(Pc(Y.Z.auth()))}static credential(h,p){return ia.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}lu.PHONE_SIGN_IN_METHOD=ia.PHONE_SIGN_IN_METHOD,lu.PROVIDER_ID=ia.PROVIDER_ID;const wv=ne;class yh{constructor(h,p,_=Y.Z.app()){var T;wv(null===(T=_.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new Il(h,p,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ev(y){y.INTERNAL.registerComponent(new fe.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new rm(p,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:q_EMAIL_SIGNIN,PASSWORD_RESET:q_PASSWORD_RESET,RECOVER_EMAIL:q_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:q_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:q_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:q_VERIFY_EMAIL}},EmailAuthProvider:Nf,FacebookAuthProvider:al,GithubAuthProvider:xd,GoogleAuthProvider:Oa,OAuthProvider:to,SAMLAuthProvider:Vu,PhoneAuthProvider:lu,PhoneMultiFactorGenerator:bo,RecaptchaVerifier:yh,TwitterAuthProvider:Uu,Auth:rm,AuthCredential:is,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.2")}(Y.Z)},5861:(gt,be,k)=>{function f(O,re,ie,se,fe,ve,ce){try{var j=O[ve](ce),B=j.value}catch(q){return void ie(q)}j.done?re(B):Promise.resolve(B).then(se,fe)}function Y(O){return function(){var re=this,ie=arguments;return new Promise(function(se,fe){var ve=O.apply(re,ie);function ce(B){f(ve,se,fe,ce,j,"next",B)}function j(B){f(ve,se,fe,ce,j,"throw",B)}ce(void 0)})}}k.d(be,{Z:()=>Y})}},gt=>{gt(gt.s=952)}]);